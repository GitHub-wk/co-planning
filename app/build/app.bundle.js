!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";n(1),n(243)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var i=n(2),s=o(i),a=n(101),u=n(88),l=n(110),c=n(23),d=(r(c),n(112)),f=n(142),p=n(164);n(177);var h=n(235),m=n(165),v=n(238),y=n(237),g=(n(115),n(239),s.default.generateDefaultWorld());console.log(g);var b=new v.LayerCollection;g.addToScene(b.defaultLayer.object);var _=new h.GroundLayer;_.resetWorld(g),_.add(new h.Ground(500,"images/textures/ground_1.jpg")),b.addLayer(_);var w=b.newLayer("建筑").object;w.name="buildingGroup",b.setSelectedLayer(b.getLayerByName("建筑")),g.addToScene(_,w),g.moveToLngLat({lng:114.35120420404286,lat:30.530716753548138}),l.BuildingStore.on(d.BUILDING_CONSTS.ADD,function(e){var t=b.getSelectedLayer();t.add(e),e.userData.layer=t}),l.BuildingStore.on(d.BUILDING_CONSTS.COMMAND,function(e){e.execute()}),l.BuildingStore.on(d.BUILDING_CONSTS.REMOVE,function(e){e.execute()}),p.drawPanInit.resetWorld(g).resetIntersectObjects([_.getInstance()]).addTo(window.document.body),b.addLayer(new y.Layer(p.drawPanInit.getDrawGroup(),"绘画")),f.infoInit.resetWorld(g).emptyIntersectObjects([w,p.drawPanInit.getDrawGroup(),b.defaultLayer.object]),f.layerTab.setLayers(b),f.infoBuildingInit.setIntersectNames({building:!0}),g.signal.on(m.DRAWSIGNAL.WILLDRAW,function(){f.infoInit.turnOFFStatus()}),g.signal.on(m.DRAWSIGNAL.DRAWDONE,function(){f.infoInit.turnONStatus()}),u.DomEvent.addEventListener(window,"resize",function(e){a.globalEvent.emit("windowResize",e)}),function e(){requestAnimationFrame(e),a.globalEvent.emit("requestAmimationFrame")}()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=o(i),a=n(4),u=o(a),l=n(23),c=r(l),d=n(24),f=n(101),p=n(102),h=n(88),m=(n(110),n(105)),v=(n(114),function(){function e(){(0,s.default)(this,e)}return(0,u.default)(e,null,[{key:"generateDefaultWorld",value:function(){if(e.defaultWorld)return e.defaultWorld;var t=document.getElementById("webgl");t.height=t.parentNode.clientHeight,t.width=t.parentNode.clientWidth;var n=new c.WebGLRenderer({canvas:t});n.shadowMapEnabled=!0,n.shadowMapSoft=!0;var r=new c.Scene;r.background=new c.Color(10066431);var o=new c.PerspectiveCamera(75,t.width/t.height,.1,4e7);o.position.z=500,o.position.y=0;var i=new d.World3d(r,o,n),s=new c.PointLight(16777215,1,0);s.position.set(0,0,200),s.castShadow=!0;var a=(new c.PointLightHelper(s,1),new c.AmbientLight(16777215,.8)),u=new p.GuiControl;u.addLightControl(s).addStatsMonitor("Stats-output"),new h.Draggable(h.DomUtil.getById("Stats-output"));new m.cameraControl(i.camera,i.renderer.domElement);return i.addToScene(a),f.globalEvent.on("requestAmimationFrame",function(){i.render()}),f.globalEvent.on("windowResize",function(e){var t=i.renderer.domElement;t.height=t.parentNode.clientHeight,t.width=t.parentNode.clientWidth,i.camera.aspect=t.width/t.height,i.camera.updateProjectionMatrix(),i.renderer.setSize(t.width,t.height)}),e.worlds.push(i),e.defaultWorld=i,i}}]),e}());t.default=v,v.worlds=[]},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(5),i=r(o);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){e.exports={default:n(6),__esModule:!0}},function(e,t,n){n(7);var r=n(10).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(8);r(r.S+r.F*!n(18),"Object",{defineProperty:n(14).f})},function(e,t,n){var r=n(9),o=n(10),i=n(11),s=n(13),a="prototype",u=function(e,t,n){var l,c,d,f=e&u.F,p=e&u.G,h=e&u.S,m=e&u.P,v=e&u.B,y=e&u.W,g=p?o:o[t]||(o[t]={}),b=g[a],_=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(l in n)c=!f&&_&&void 0!==_[l],c&&l in g||(d=c?_[l]:n[l],g[l]=p&&"function"!=typeof _[l]?n[l]:v&&c?i(d,r):y&&_[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[l]=d,e&u.R&&b&&!b[l]&&s(b,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(12);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(14),o=n(22);e.exports=n(18)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(15),o=n(17),i=n(21),s=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(16);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)&&!n(19)(function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(16),o=n(9).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(16);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=THREE},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.World3d=void 0;var o=n(3),i=r(o),s=n(4),a=r(s),u=n(25),l=n(88);t.World3d=function(){function e(t,n,r){(0,i.default)(this,e),this.scene=t,this.camera=n,this.renderer=r,this.signal=new l.EventEmitter,this.projection=new u.MercatorProjection}return(0,a.default)(e,[{key:"render",value:function(){return this.renderer.render(this.scene,this.camera),this}},{key:"moveToLngLat",value:function(e){var t=this.projection.lngLatToPoint(e),n=new THREE.Vector3(t.x,t.y,500);this.moveToPoint(n)}},{key:"moveToPoint",value:function(e){this.camera.position.copy(e),this.camera.lookAt(new THREE.Vector3(e.x,e.y,0)),this.camera.updateMatrixWorld(!0),this.signal.emit("CAMERACHANGE")}},{key:"addToScene",value:function(e){for(var t=0;t<arguments.length;t++)this.scene.add(arguments[t].getInstance?arguments[t].getInstance():arguments[t]);return this}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BaiDuMercator=t.MercatorProjection=void 0;var o=n(26),i=r(o),s=n(80),a=r(s),u=n(3),l=r(u),c=n(4),d=r(c),f=t.MercatorProjection=function(){function e(t){(0,l.default)(this,e),this.name=t}return(0,d.default)(e,[{key:"pointToLngLat",value:function(e){var t=e.x+33554432,n=33554432-e.y,r=360*Math.atan(Math.exp((1-n/Math.pow(2,25))*Math.PI))/Math.PI-90,o=360*t/Math.pow(2,26)-180;return{lat:r,lng:o}}},{key:"lngLatToPoint",value:function(e){var t=e.lat,n=e.lng,r=(n+180)*Math.pow(2,26)/360,o=(1-Math.log(Math.tan((t+90)*Math.PI/360))/Math.PI)*Math.pow(2,25);return{x:r-33554432,y:33554432-o}}}]),e}();t.BaiDuMercator=function(e){function t(){(0,l.default)(this,t);var e=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"BaiDuMercatorProjection"));return e.R=6378137,e}return(0,a.default)(t,e),(0,d.default)(t,[{key:"pointToLngLat",value:function(e){var t=e.x,n=e.y,r=360*Math.atan(Math.pow(Math.E,n/this.R))/Math.PI-90,o=t/(Math.PI*this.R)*180;return{lat:r,lng:o}}}]),t}(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(27),i=r(o);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(28),i=r(o),s=n(64),a=r(s),u="function"==typeof a.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===u(i.default)?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},function(e,t,n){e.exports={default:n(29),__esModule:!0}},function(e,t,n){n(30),n(59),e.exports=n(63).f("iterator")},function(e,t,n){"use strict";var r=n(31)(!0);n(34)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(32),o=n(33);e.exports=function(e){return function(t,n){var i,s,a=String(o(t)),u=r(n),l=a.length;return u<0||u>=l?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(35),o=n(8),i=n(36),s=n(13),a=n(37),u=n(38),l=n(39),c=n(55),d=n(57),f=n(56)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",v="values",y=function(){return this};e.exports=function(e,t,n,g,b,_,w){l(n,t,g);var E,x,C,S=function(e){if(!p&&e in A)return A[e];switch(e){case m:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+" Iterator",k=b==v,T=!1,A=e.prototype,D=A[f]||A[h]||b&&A[b],N=D||S(b),M=b?k?S("entries"):N:void 0,P="Array"==t?A.entries||D:D;if(P&&(C=d(P.call(new e)),C!==Object.prototype&&(c(C,O,!0),r||a(C,f)||s(C,f,y))),k&&D&&D.name!==v&&(T=!0,N=function(){return D.call(this)}),r&&!w||!p&&!T&&A[f]||s(A,f,N),u[t]=N,u[O]=y,b)if(E={values:k?N:S(v),keys:_?N:S(m),entries:M},w)for(x in E)x in A||i(A,x,E[x]);else o(o.P+o.F*(p||T),t,E);return E}},function(e,t){e.exports=!0},function(e,t,n){e.exports=n(13)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(40),o=n(22),i=n(55),s={};n(13)(s,n(56)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(15),o=n(41),i=n(53),s=n(50)("IE_PROTO"),a=function(){},u="prototype",l=function(){var e,t=n(20)("iframe"),r=i.length,o="<",s=">";for(t.style.display="none",n(54).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+s+"document.F=Object"+o+"/script"+s),e.close(),l=e.F;r--;)delete l[u][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[s]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(14),o=n(15),i=n(42);e.exports=n(18)?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},function(e,t,n){var r=n(43),o=n(53);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(37),o=n(44),i=n(47)(!1),s=n(50)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),u=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(45),o=n(33);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(46);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(44),o=n(48),i=n(49);e.exports=function(e){return function(t,n,s){var a,u=r(t),l=o(u.length),c=i(s,l);if(e&&n!=n){for(;l>c;)if(a=u[c++],a!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(32),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(32),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(51)("keys"),o=n(52);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(9),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(9).document&&document.documentElement},function(e,t,n){var r=n(14).f,o=n(37),i=n(56)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(51)("wks"),o=n(52),i=n(9).Symbol,s="function"==typeof i,a=e.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=r},function(e,t,n){var r=n(37),o=n(58),i=n(50)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(33);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(60);for(var r=n(9),o=n(13),i=n(38),s=n(56)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=a[u],c=r[l],d=c&&c.prototype;d&&!d[s]&&o(d,s,l),i[l]=i.Array}},function(e,t,n){"use strict";var r=n(61),o=n(62),i=n(38),s=n(44);e.exports=n(34)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(56)},function(e,t,n){e.exports={default:n(65),__esModule:!0}},function(e,t,n){n(66),n(77),n(78),n(79),e.exports=n(10).Symbol},function(e,t,n){"use strict";var r=n(9),o=n(37),i=n(18),s=n(8),a=n(36),u=n(67).KEY,l=n(19),c=n(51),d=n(55),f=n(52),p=n(56),h=n(63),m=n(68),v=n(69),y=n(70),g=n(73),b=n(15),_=n(44),w=n(21),E=n(22),x=n(40),C=n(74),S=n(76),O=n(14),k=n(42),T=S.f,A=O.f,D=C.f,N=r.Symbol,M=r.JSON,P=M&&M.stringify,R="prototype",L=p("_hidden"),j=p("toPrimitive"),I={}.propertyIsEnumerable,B=c("symbol-registry"),U=c("symbols"),F=c("op-symbols"),H=Object[R],V="function"==typeof N,W=r.QObject,z=!W||!W[R]||!W[R].findChild,G=i&&l(function(){return 7!=x(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=T(H,t);r&&delete H[t],A(e,t,n),r&&e!==H&&A(H,t,r)}:A,q=function(e){var t=U[e]=x(N[R]);return t._k=e,t},Y=V&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},J=function(e,t,n){return e===H&&J(F,t,n),b(e),t=w(t,!0),b(n),o(U,t)?(n.enumerable?(o(e,L)&&e[L][t]&&(e[L][t]=!1),n=x(n,{enumerable:E(0,!1)})):(o(e,L)||A(e,L,E(1,{})),e[L][t]=!0),G(e,t,n)):A(e,t,n)},X=function(e,t){b(e);for(var n,r=y(t=_(t)),o=0,i=r.length;i>o;)J(e,n=r[o++],t[n]);return e},$=function(e,t){return void 0===t?x(e):X(x(e),t)},K=function(e){var t=I.call(this,e=w(e,!0));return!(this===H&&o(U,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(U,e)||o(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=_(e),t=w(t,!0),e!==H||!o(U,t)||o(F,t)){var n=T(e,t);return!n||!o(U,t)||o(e,L)&&e[L][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=D(_(e)),r=[],i=0;n.length>i;)o(U,t=n[i++])||t==L||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===H,r=D(n?F:_(e)),i=[],s=0;r.length>s;)!o(U,t=r[s++])||n&&!o(H,t)||i.push(U[t]);return i};V||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(F,n),o(this,L)&&o(this[L],e)&&(this[L][e]=!1),G(this,e,E(1,n))};return i&&z&&G(H,e,{configurable:!0,set:t}),q(e)},a(N[R],"toString",function(){return this._k}),S.f=Z,O.f=J,n(75).f=C.f=Q,n(72).f=K,n(71).f=ee,i&&!n(35)&&a(H,"propertyIsEnumerable",K,!0),h.f=function(e){return q(p(e))}),s(s.G+s.W+s.F*!V,{Symbol:N});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=k(p.store),ne=0;te.length>ne;)m(te[ne++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=N(e)},keyFor:function(e){if(Y(e))return v(B,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!V,"Object",{create:$,defineProperty:J,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),M&&s(s.S+s.F*(!V||l(function(){var e=N();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Y(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,P.apply(M,r)}}}),N[R][j]||n(13)(N[R],j,N[R].valueOf),d(N,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(52)("meta"),o=n(16),i=n(37),s=n(14).f,a=0,u=Object.isExtensible||function(){return!0},l=!n(19)(function(){return u(Object.preventExtensions({}))}),c=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},f=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},p=function(e){return l&&h.NEED&&u(e)&&!i(e,r)&&c(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,n){var r=n(9),o=n(10),i=n(35),s=n(63),a=n(14).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){var r=n(42),o=n(44);e.exports=function(e,t){for(var n,i=o(e),s=r(i),a=s.length,u=0;a>u;)if(i[n=s[u++]]===t)return n}},function(e,t,n){var r=n(42),o=n(71),i=n(72);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var s,a=n(e),u=i.f,l=0;a.length>l;)u.call(e,s=a[l++])&&t.push(s);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(46);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(44),o=n(75).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(r(e))}},function(e,t,n){var r=n(43),o=n(53).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(72),o=n(22),i=n(44),s=n(21),a=n(37),u=n(17),l=Object.getOwnPropertyDescriptor;t.f=n(18)?l:function(e,t){if(e=i(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(68)("asyncIterator")},function(e,t,n){n(68)("observable")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(81),i=r(o),s=n(85),a=r(s),u=n(27),l=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,l.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(82),__esModule:!0}},function(e,t,n){n(83),e.exports=n(10).Object.setPrototypeOf},function(e,t,n){var r=n(8);r(r.S,"Object",{setPrototypeOf:n(84).set})},function(e,t,n){var r=n(16),o=n(15),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(11)(Function.call,n(76).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={default:n(86),__esModule:!0}},function(e,t,n){n(87);var r=n(10).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(8);r(r.S,"Object",{create:n(40)})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Dispatcher=t.Draggable=t.Promise=t.assign=t.EventEmitter=t.Util=t.DomUtil=t.DomEvent=t.Browser=void 0;var i=n(89),s=o(i),a=n(90),u=o(a),l=n(92),c=o(l),d=n(91),f=o(d),p=n(93),h=o(p),m=n(94),v=o(m),y=n(95),g=r(y),b=n(99),_=n(100),w=o(_);t.Browser=s.default,t.DomEvent=u.default,t.DomUtil=c.default,t.Util=f.default,t.EventEmitter=h.default,t.assign=v.default,t.Promise=g,t.Draggable=b.Draggable,t.Dispatcher=w.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=navigator.userAgent.toLowerCase(),r=document.documentElement,o="ActiveXObject"in window,i=n.indexOf("webkit")!==-1,s=n.indexOf("phantom")!==-1,a=n.search("android [23]")!==-1,u=n.indexOf("chrome")!==-1,l=n.indexOf("gecko")!==-1&&!i&&!window.opera&&!o,c=0===navigator.platform.indexOf("Win"),d="undefined"!=typeof orientation||n.indexOf("mobile")!==-1,f=!window.PointerEvent&&window.MSPointerEvent,p=window.PointerEvent||f,h=o&&"transition"in r.style,m="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!a,v="MozPerspective"in r.style,y="OTransition"in r.style,g=!window.L_NO_TOUCH&&(p||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),b={ie:o,ielt9:o&&!document.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in document),webkit:i,gecko:l,android:n.indexOf("android")!==-1,android23:a,chrome:u,safari:!u&&n.indexOf("safari")!==-1,win:c,ie3d:h,webkit3d:m,gecko3d:v,opera12:y,any3d:!window.L_DISABLE_3D&&(h||m||v)&&!y&&!s,mobile:d,mobileWebkit:d&&i,mobileWebkit3d:d&&m,mobileOpera:d&&window.opera,mobileGecko:d&&l,touch:!!g,msPointer:!!f,pointer:!!p,retina:(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1};t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(91),i=(r(o),{addEventListener:function(e,t,n,r){return"addEventListener"in e?e.addEventListener(t,n,r||!1):"attachEvent"in e&&e.attachEvent("on"+t,n),this},removeEventListener:function(e,t,n,r){return"removeEventListener"in e?e.removeEventListener(t,n,r||!1):"detachEvent"in e&&e.detachEvent(t,n),this},stopPropagation:function(e){return e=e||window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},preventDefault:function(e){return e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return e=e||window.event,this.preventDefault(e).stopPropagation(e),this}});!function(){i.on=i.addEventListener,i.off=i.removeEventListener}(),t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),i=r(o),s={extend:function(e){var t,n,r,o;for(n=1,r=arguments.length;n<r;n++){o=arguments[n];for(t in o)e[t]=o[t]}return e},create:Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),bind:function(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}},stamp:function(e){return e._unique_id=e._unique_id||++this.lastId,e._unique_id},lastId:0,throttle:function(e,t,n){var r,o,i,s;return s=function(){r=!1,o&&(i.apply(n,o),o=!1)},i=function(){r?o=arguments:(e.apply(n,arguments),setTimeout(s,t),r=!0)}},wrapNum:function(e,t,n){var r=t[1],o=t[0],i=r-o;return e===r&&n?e:((e-o)%i+i)%i+o},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return this.trim(e).split(/\s+/)},getParamString:function(e,t,n){var r=[];for(var o in e)r.push(encodeURIComponent(n?o.toUpperCase():o)+"="+encodeURIComponent(e[o]));return(t&&t.indexOf("?")!==-1?"&":"?")+r.join("&")},template:function(e,t){return e.replace(this.templateRe,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},isObject:function(e){var t="undefined"==typeof e?"undefined":(0,i.default)(e);return"function"===t||"object"===t&&!!e},storeData:function(e,t){var n="";return n=this.isObject(t)?JSON.stringify(t):t,localStorage.setItem(e,n),n},getData:function(e){var t=localStorage.getItem(e);try{var n=JSON.parse(t);return n}catch(e){return t}},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16).replace("-","")})},getFingerprint:function(){return this.getData("guid")||this.storeData("guid",this.guid()),this.getData("guid")},emptyArray:function(e){e.splice(0,e.length)},forEach:function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n,e);if(r===!0)return r}},removeByValue:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}},log:function(e){console.log(e)}};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(91),i=r(o),s=n(89),a=r(s),u={getById:function(e){return"string"==typeof e?document.getElementById(e):e},getStyle:function(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n},setStyle:function(e,t,n){e.style[t]=n},create:function(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r},createElement:function(e,t,n){var r=document.createElement(e);return r.className=t||"",r.innerHTML=n||"",r},appendChild:function(e,t){t instanceof Array?i.default.forEach(t,function(t){e.appendChild(t)}):e.appendChild(t)},remove:function(e){var t=e.parentNode;t&&t.removeChild(e)},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},emptyParent:function(e){var t=e.parentNode;t&&this.empty(t)},toFront:function(e){e.parentNode.appendChild(e)},toBack:function(e){var t=e.parentNode;t.insertBefore(e,t.firstChild)},hasClass:function(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=this.getClass(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){if(void 0!==e.classList)for(var n=i.default.splitWords(t),r=0,o=n.length;r<o;r++)e.classList.add(n[r]);else if(!this.hasClass(e,t)){var s=this.getClass(e);this.setClass(e,(s?s+" ":"")+t)}},removeClass:function(e,t){void 0!==e.classList?e.classList.remove(t):this.setClass(e,i.default.trim((" "+this.getClass(e)+" ").replace(" "+t+" "," ")))},toggleClass:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},setClass:function(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t},getMousePosition:function(e,t){var n=e.getBoundingClientRect();return{left:t.clientX-n.left,top:t.clientY-n.top}},getClass:function(e){return void 0===e.className.baseVal?e.className:e.className.baseVal},setOpacity:function(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&this._setOpacityIE(e,t)},_setOpacityIE:function(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(e){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"},testProp:function(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1},setTransform:function(e,t,n){var r=t||{x:0,y:0};e.style[this.TRANSFORM]=(a.default.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(e,t){e._corejs_pos=t,a.default.any3d?this.setTransform(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._corejs_pos||{x:0,y:0}}};!function(){u.TRANSFORM=u.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"])}();var l={};l.Element=function(e){this.dom=e},l.Element.prototype={add:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];t instanceof l.Element?this.dom.appendChild(t.dom):console.error("UI.Element:",t,"is not an instance of UI.Element.")}return this},remove:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];t instanceof l.Element?this.dom.removeChild(t.dom):console.error("UI.Element:",t,"is not an instance of UI.Element.")}return this},clear:function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)},setId:function(e){return this.dom.id=e,this},setClass:function(e){return this.dom.className=e,this},setStyle:function(e,t){for(var n=0;n<t.length;n++)this.dom.style[e]=t[n];return this},setDisabled:function(e){return this.dom.disabled=e,this},setTextContent:function(e){return this.dom.textContent=e,this}};var c=["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"];
c.forEach(function(e){var t="set"+e.substr(0,1).toUpperCase()+e.substr(1,e.length);l.Element.prototype[t]=function(){return this.setStyle(e,arguments),this}});var d=["KeyUp","KeyDown","MouseOver","MouseOut","Click","DblClick","Change"];d.forEach(function(e){var t="on"+e;l.Element.prototype[t]=function(t){return this.dom.addEventListener(e.toLowerCase(),i.default.bind(t,this),!1),this}}),l.Span=function(){return l.Element.call(this),this.dom=document.createElement("span"),this},l.Span.prototype=Object.create(l.Element.prototype),l.Span.prototype.constructor=l.Span,l.Div=function(){return l.Element.call(this),this.dom=document.createElement("div"),this},l.Div.prototype=Object.create(l.Element.prototype),l.Div.prototype.constructor=l.Div,l.Row=function(){l.Element.call(this);var e=document.createElement("div");return e.className="Row",this.dom=e,this},l.Row.prototype=Object.create(l.Element.prototype),l.Row.prototype.constructor=l.Row,l.Panel=function(){l.Element.call(this);var e=document.createElement("div");return e.className="Panel",this.dom=e,this},l.Panel.prototype=Object.create(l.Element.prototype),l.Panel.prototype.constructor=l.Panel,l.CollapsiblePanel=function(){l.Panel.call(this),this.setClass("Panel Collapsible");var e=this;this.static=new l.Panel,this.static.setClass("Static"),this.static.onClick(function(){e.toggle()}),this.dom.appendChild(this.static.dom),this.contents=new l.Panel,this.contents.setClass("Content"),this.dom.appendChild(this.contents.dom);var t=new l.Panel;return t.setClass("Button"),this.static.add(t),this.isCollapsed=!1,this},l.CollapsiblePanel.prototype=Object.create(l.Panel.prototype),l.CollapsiblePanel.prototype.constructor=l.CollapsiblePanel,l.CollapsiblePanel.prototype.addStatic=function(){return this.static.add.apply(this.static,arguments),this},l.CollapsiblePanel.prototype.removeStatic=function(){return this.static.remove.apply(this.static,arguments),this},l.CollapsiblePanel.prototype.clearStatic=function(){return this.static.clear(),this},l.CollapsiblePanel.prototype.add=function(){return this.contents.add.apply(this.contents,arguments),this},l.CollapsiblePanel.prototype.remove=function(){return this.contents.remove.apply(this.contents,arguments),this},l.CollapsiblePanel.prototype.clear=function(){return this.contents.clear(),this},l.CollapsiblePanel.prototype.toggle=function(){this.setCollapsed(!this.isCollapsed)},l.CollapsiblePanel.prototype.collapse=function(){this.setCollapsed(!0)},l.CollapsiblePanel.prototype.expand=function(){this.setCollapsed(!1)},l.CollapsiblePanel.prototype.setCollapsed=function(e){e?this.dom.classList.add("collapsed"):this.dom.classList.remove("collapsed"),this.isCollapsed=e,void 0!==this.onCollapsedChangeCallback&&this.onCollapsedChangeCallback(e)},l.CollapsiblePanel.prototype.onCollapsedChange=function(e){this.onCollapsedChangeCallback=e},l.Text=function(e){l.Element.call(this);var t=document.createElement("span");return t.className="Text",t.style.cursor="default",t.style.display="inline-block",t.style.verticalAlign="middle",this.dom=t,this.setValue(e),this},l.Text.prototype=Object.create(l.Element.prototype),l.Text.prototype.constructor=l.Text,l.Text.prototype.getValue=function(){return this.dom.textContent},l.Text.prototype.setValue=function(e){return void 0!==e&&(this.dom.textContent=e),this},l.Input=function(e){l.Element.call(this);var t=document.createElement("input");return t.className="Input",t.style.padding="2px",t.style.border="1px solid transparent",t.addEventListener("keydown",function(e){e.stopPropagation()},!1),this.dom=t,this.setValue(e),this},l.Input.prototype=Object.create(l.Element.prototype),l.Input.prototype.constructor=l.Input,l.Input.prototype.getValue=function(){return this.dom.value},l.Input.prototype.setValue=function(e){return this.dom.value=e,this},l.TextArea=function(){l.Element.call(this);var e=document.createElement("textarea");return e.className="TextArea",e.style.padding="2px",e.spellcheck=!1,e.addEventListener("keydown",function(t){if(t.stopPropagation(),9===t.keyCode){t.preventDefault();var n=e.selectionStart;e.value=e.value.substring(0,n)+"\t"+e.value.substring(n),e.selectionStart=n+1,e.selectionEnd=e.selectionStart}},!1),this.dom=e,this},l.TextArea.prototype=Object.create(l.Element.prototype),l.TextArea.prototype.constructor=l.TextArea,l.TextArea.prototype.getValue=function(){return this.dom.value},l.TextArea.prototype.setValue=function(e){return this.dom.value=e,this},l.Select=function(){l.Element.call(this);var e=document.createElement("select");return e.className="Select",e.style.padding="2px",this.dom=e,this},l.Select.prototype=Object.create(l.Element.prototype),l.Select.prototype.constructor=l.Select,l.Select.prototype.setMultiple=function(e){return this.dom.multiple=e,this},l.Select.prototype.setOptions=function(e){for(var t=this.dom.value;this.dom.children.length>0;)this.dom.removeChild(this.dom.firstChild);for(var n in e){var r=document.createElement("option");r.value=n,r.innerHTML=e[n],this.dom.appendChild(r)}return this.dom.value=t,this},l.Select.prototype.getValue=function(){return this.dom.value},l.Select.prototype.setValue=function(e){return e=String(e),this.dom.value!==e&&(this.dom.value=e),this},l.Checkbox=function(e){l.Element.call(this);var t=document.createElement("input");return t.className="Checkbox",t.type="checkbox",this.dom=t,this.setValue(e),this},l.Checkbox.prototype=Object.create(l.Element.prototype),l.Checkbox.prototype.constructor=l.Checkbox,l.Checkbox.prototype.getValue=function(){return this.dom.checked},l.Checkbox.prototype.setValue=function(e){return void 0!==e&&(this.dom.checked=e),this},l.Color=function(){l.Element.call(this);var e=document.createElement("input");e.className="Color",e.style.width="64px",e.style.height="17px",e.style.border="0px",e.style.padding="2px",e.style.backgroundColor="transparent";try{e.type="color",e.value="#ffffff"}catch(e){}return this.dom=e,this},l.Color.prototype=Object.create(l.Element.prototype),l.Color.prototype.constructor=l.Color,l.Color.prototype.getValue=function(){return this.dom.value},l.Color.prototype.getHexValue=function(){return parseInt(this.dom.value.substr(1),16)},l.Color.prototype.setValue=function(e){return this.dom.value=e,this},l.Color.prototype.setHexValue=function(e){return this.dom.value="#"+("000000"+e.toString(16)).slice(-6),this},l.Number=function(e){function t(e){e.preventDefault(),d=0,f=a.value,h=[e.clientX,e.clientY],document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",r,!1)}function n(e){var t=a.value;p=[e.clientX,e.clientY],d+=p[0]-h[0]-(p[1]-h[1]);var n=f+d/(e.shiftKey?5:50)*a.step;n=Math.min(a.max,Math.max(a.min,n)),t!==n&&(a.setValue(n),u.dispatchEvent(c)),h=[e.clientX,e.clientY]}function r(e){document.removeEventListener("mousemove",n,!1),document.removeEventListener("mouseup",r,!1),Math.abs(d)<2&&(u.focus(),u.select())}function o(e){a.setValue(u.value)}function i(e){u.style.backgroundColor="",u.style.cursor=""}function s(e){u.style.backgroundColor="transparent",u.style.cursor="col-resize"}l.Element.call(this);var a=this,u=document.createElement("input");u.className="Number",u.value="0.00",u.addEventListener("keydown",function(e){e.stopPropagation(),13===e.keyCode&&u.blur()},!1),this.value=0,this.min=-(1/0),this.max=1/0,this.precision=2,this.step=1,this.unit="",this.dom=u,this.setValue(e);var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!0);var d=0,f=0,p=[0,0],h=[0,0];return s(),u.addEventListener("mousedown",t,!1),u.addEventListener("change",o,!1),u.addEventListener("focus",i,!1),u.addEventListener("blur",s,!1),this},l.Number.prototype=Object.create(l.Element.prototype),l.Number.prototype.constructor=l.Number,l.Number.prototype.getValue=function(){return this.value},l.Number.prototype.setValue=function(e){return void 0!==e&&(e=parseFloat(e),e<this.min&&(e=this.min),e>this.max&&(e=this.max),this.value=e,this.dom.value=e.toFixed(this.precision)+" "+this.unit),this},l.Number.prototype.setPrecision=function(e){return this.precision=e,this},l.Number.prototype.setStep=function(e){return this.step=e,this},l.Number.prototype.setRange=function(e,t){return this.min=e,this.max=t,this},l.Number.prototype.setUnit=function(e){return this.unit=e,this},l.Integer=function(e){function t(e){e.preventDefault(),d=0,f=a.value,h=[e.clientX,e.clientY],document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",r,!1)}function n(e){var t=a.value;p=[e.clientX,e.clientY],d+=p[0]-h[0]-(p[1]-h[1]);var n=f+d/(e.shiftKey?5:50)*a.step;n=0|Math.min(a.max,Math.max(a.min,n)),t!==n&&(a.setValue(n),u.dispatchEvent(c)),h=[e.clientX,e.clientY]}function r(e){document.removeEventListener("mousemove",n,!1),document.removeEventListener("mouseup",r,!1),Math.abs(d)<2&&(u.focus(),u.select())}function o(e){a.setValue(u.value)}function i(e){u.style.backgroundColor="",u.style.cursor=""}function s(e){u.style.backgroundColor="transparent",u.style.cursor="col-resize"}l.Element.call(this);var a=this,u=document.createElement("input");u.className="Number",u.value="0",u.addEventListener("keydown",function(e){e.stopPropagation()},!1),this.value=0,this.min=-(1/0),this.max=1/0,this.step=1,this.dom=u,this.setValue(e);var c=document.createEvent("HTMLEvents");c.initEvent("change",!0,!0);var d=0,f=0,p=[0,0],h=[0,0];return s(),u.addEventListener("mousedown",t,!1),u.addEventListener("change",o,!1),u.addEventListener("focus",i,!1),u.addEventListener("blur",s,!1),this},l.Integer.prototype=Object.create(l.Element.prototype),l.Integer.prototype.constructor=l.Integer,l.Integer.prototype.getValue=function(){return this.value},l.Integer.prototype.setValue=function(e){return void 0!==e&&(e=parseInt(e),this.value=e,this.dom.value=e),this},l.Number.prototype.setStep=function(e){return this.step=e,this},l.Integer.prototype.setRange=function(e,t){return this.min=e,this.max=t,this},l.Break=function(){l.Element.call(this);var e=document.createElement("br");return e.className="Break",this.dom=e,this},l.Break.prototype=Object.create(l.Element.prototype),l.Break.prototype.constructor=l.Break,l.HorizontalRule=function(){l.Element.call(this);var e=document.createElement("hr");return e.className="HorizontalRule",this.dom=e,this},l.HorizontalRule.prototype=Object.create(l.Element.prototype),l.HorizontalRule.prototype.constructor=l.HorizontalRule,l.Button=function(e){l.Element.call(this);var t=document.createElement("button");return t.className="Button",this.dom=t,this.dom.textContent=e,this},l.Button.prototype=Object.create(l.Element.prototype),l.Button.prototype.constructor=l.Button,l.Button.prototype.setLabel=function(e){return this.dom.textContent=e,this},l.Modal=function(e){var t=this,n=document.createElement("div");return n.style.position="absolute",n.style.width="100%",n.style.height="100%",n.style.backgroundColor="rgba(0,0,0,0.5)",n.style.display="none",n.style.alignItems="center",n.style.justifyContent="center",n.addEventListener("click",function(e){t.hide()}),this.dom=n,this.container=new l.Panel,this.container.dom.style.width="200px",this.container.dom.style.padding="20px",this.container.dom.style.backgroundColor="#ffffff",this.container.dom.style.boxShadow="0px 5px 10px rgba(0,0,0,0.5)",this.add(this.container),this},l.Modal.prototype=Object.create(l.Element.prototype),l.Modal.prototype.constructor=l.Modal,l.Modal.prototype.show=function(e){return this.container.clear(),this.container.add(e),this.dom.style.display="flex",this},l.Modal.prototype.hide=function(){return this.dom.style.display="none",this},u.UI=l,t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function a(e){return"object"===("undefined"==typeof e?"undefined":(0,c.default)(e))&&null!==e}function u(e){return void 0===e}var l=n(27),c=r(l);e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var t,n,r,o,s,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,s=0;s<r;s++)l[s].apply(this,o);return!0},o.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?o.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},o.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},o.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},o.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},o.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,u=n(e),l=1;l<arguments.length;l++){r=Object(arguments[l]);for(var c in r)i.call(r,c)&&(u[c]=r[c]);if(o){a=o(r);for(var d=0;d<a.length;d++)s.call(r,a[d])&&(u[a[d]]=r[a[d]])}}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,n){(function(t,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){X=e}function s(e){$=e}function a(){return function(){return t.nextTick(f)}}function u(){return"undefined"!=typeof J?function(){J(f)}:d()}function l(){var e=0,t=new Q(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<Y;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}Y=0}function p(){try{var e=n(98);return J=e.runOnLoop||e.runOnContext,u()}catch(e){return d()}}function h(e,t){var n=arguments,r=this,o=new this.constructor(v);void 0===o[oe]&&L(o);var i=r._state;return i?!function(){var e=n[i-1];$(function(){return M(i,o,e,r._result)})}():T(r,o,e,t),o}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return C(n,e),n}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return ue.error=e,ue}}function _(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function w(e,t,n){$(function(e){var r=!1,o=_(n,t,function(n){r||(r=!0,t!==n?C(e,n):O(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,k(e,o))},e)}function E(e,t){t._state===se?O(e,t._result):t._state===ae?k(e,t._result):T(t,void 0,function(t){return C(e,t)},function(t){return k(e,t)})}function x(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===m?E(e,t):n===ue?k(e,ue.error):void 0===n?O(e,t):o(n)?w(e,t,n):O(e,t)}function C(t,n){t===n?k(t,y()):e(n)?x(t,n,b(n)):O(t,n)}function S(e){e._onerror&&e._onerror(e._result),A(e)}function O(e,t){e._state===ie&&(e._result=t,e._state=se,0!==e._subscribers.length&&$(A,e))}function k(e,t){e._state===ie&&(e._state=ae,e._result=t,$(S,e))}function T(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+se]=n,o[i+ae]=r,0===i&&e._state&&$(A,e)}function A(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?M(n,r,o,i):o(i);e._subscribers.length=0}}function D(){this.error=null}function N(e,t){try{return e(t)}catch(e){return le.error=e,le}}function M(e,t,n,r){var i=o(n),s=void 0,a=void 0,u=void 0,l=void 0;if(i){if(s=N(n,r),s===le?(l=!0,a=s.error,s=null):u=!0,t===s)return void k(t,g())}else s=r,u=!0;t._state!==ie||(i&&u?C(t,s):l?k(t,a):e===se?O(t,s):e===ae&&k(t,s))}function P(e,t){try{t(function(t){C(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function R(){return ce++}function L(e){e[oe]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function j(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[oe]||L(this.promise),q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&O(this.promise,this._result))):k(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function B(e){return new j(this,e).promise}function U(e){var t=this;return new t(q(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(v);return k(n,e),n}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(e){this[oe]=R(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&H(),this instanceof W?P(this,e):V())}function z(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=W}var G=void 0;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var q=G,Y=0,J=void 0,X=void 0,$=function(e,t){ne[Y]=e,ne[Y+1]=t,Y+=2,2===Y&&(X?X(f):re())},K="undefined"!=typeof window?window:void 0,Z=K||{},Q=Z.MutationObserver||Z.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?a():Q?l():te?c():void 0===K?p():d();var oe=Math.random().toString(36).substring(16),ie=void 0,se=1,ae=2,ue=new D,le=new D,ce=0;return j.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&n<e;n++)this._eachEntry(t[n],n)},j.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var o=b(e);if(o===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===W){var i=new n(v);x(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},j.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ie&&(this._remaining--,e===ae?k(r,n):this._result[t]=n),0===this._remaining&&O(r,this._result)},j.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ae,t,e)})},W.all=B,W.race=U,W.resolve=m,W.reject=F,W._setScheduler=i,W._setAsap=s,W._asap=$,W.prototype={constructor:W,then:h,catch:function(e){return this.then(null,e)}},W.polyfill=z,W.Promise=W,W})}).call(t,n(97),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&a())}function a(){if(!m){var e=o(s);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,d,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,h=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Draggable=void 0;var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88),l={OFF:0,CLICKED:1};t.Draggable=function(){function e(t){(0,i.default)(this,e),this.element=t,this.element._draggable=!0,this.element._mousestats=l.OFF;var n={x:0,y:0};u.DomEvent.on(this.element,"mousedown",function(e){this._draggable&&(this._mousestats=l.CLICKED,n.x=e.offsetX,n.y=e.offsetY)}),u.DomEvent.on(this.element,"mousemove",function(e){this._mousestats!==l.CLICKED||0===e.movementX&&0===e.movementY||(this.style.right="auto",this.style.bottom="auto",this.style.left=e.clientX-20+"px",this.style.top=e.clientY-20+"px")}),u.DomEvent.on(this.element,"mouseup",function(e){this._mousestats=l.OFF})}return(0,a.default)(e,[{key:"enable",value:function(){this.element._draggable=!0}},{key:"disable",value:function(){this.element._draggable=!1}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(95).Promise,o=n(94),i=[],s=[],a=function(){};a.prototype=o({},a.prototype,{register:function(e){return i.push(e),i.length-1},dispatch:function(e){var t=[],n=[];s=i.map(function(e,o){return new r(function(e,r){t[o]=e,n[o]=r})}),i.forEach(function(o,i){r.resolve(o(e)).then(function(){t[i](e)},function(){n[i](new Error("Dispatcher callback unsuccessful"))})}),s=[]}}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalEvent=void 0;var r=n(88),o=new r.EventEmitter;t.globalEvent=o},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GuiControl=void 0;var i=n(3),s=o(i),a=n(4),u=o(a),l=n(103),c=r(l),d=n(101),f=n(88);t.GuiControl=function(){function e(){(0,s.default)(this,e),this.gui=new c.dat.GUI,this.gui.close()}return(0,u.default)(e,[{key:"addLightControl",value:function(e){if(this._lightControlInit=!1,!this._lightControlInit){var t=0,n=this.lightControls={lightspeed:0};this.gui.add(this.lightControls,"lightspeed",0,.5),d.globalEvent.on("requestAmimationFrame",function(){t+=n.lightspeed,t>314&&(console.log(t),t-=314),e.position.setX(250*Math.sin(t)),e.position.setY(250*Math.cos(t))}),this._lightControlInit=!0}return this}},{key:"addStatsMonitor",value:function(e){if(this._statsMonitorInit=!1,!this._statsMonitorInit){var t=f.DomUtil.getById(e),n=this.statsMonitor=new c.Stats;n.setMode(0),t.appendChild(n.domElement),d.globalEvent.on("requestAmimationFrame",function(){n.update()})}this._statsMonitorInit=!0}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.cameraControl=t.message=t.Stats=t.dat=void 0;var o=n(104),i=r(o),s=n(105);n(106),n(107);t.dat=n(108),t.Stats=n(109);t.message=i.default,t.cameraControl=s.cameraControl},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.MESSAGE={SUCCESS:"success",INFO:"info",ERROR:"error"},n.POSITION={},n.show=function(e,t,r){switch(t){case MESSAGE.ERROR:n.error(e,r);break;case MESSAGE.SUCCESS:n.success(e,r);break;case MESSAGE.INFO:n.info(e,r);break;default:console.log("unknown type")}},n.error=function(e,t){window.alert(e)},n.info=function(e,t){console.log("un write")},n.success=function(e,t){console.log("un write")},t.default=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){function n(e,t){var n=r.camera.position.z*e/r.domElement.width,o=r.camera.position.z*t/r.domElement.height,i=r.camera.position;i.setX(i.x-2*n),i.setY(i.y+2*o),r.camera.updateMatrixWorld(!0)}this.domElement=t,this.camera=e,this.tempCamera=this.camera.clone();var r=this,o={OFF:1,ROLATE:2,PAN:3};this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var s=o.OFF,u=this.camera.quaternion.clone(),l={x:0,y:0};this.mouseButtons={OR:a.MOUSE.LEFT,ZOOM:a.MOUSE.MIDDLE,PAN:a.MOUSE.RIGHT};var c=function(e){e.button===a.MOUSE.LEFT?s=o.ROLATE:e.button===a.MOUSE.RIGHT&&(s=o.PAN)},d=function(e){if(Math.pow(e.movementX,2)+Math.pow(e.movementY,2)<2)return!1;if(s===o.PAN)n(e.movementX,e.movementY);else if(s===o.ROLATE){var t=Math.PI/2*e.movementX/r.domElement.width,i=Math.PI/2*e.movementY/r.domElement.height;l.x+=t,l.y+=i;var c=new a.Quaternion;c.setFromAxisAngle(new a.Vector3(1,0,0),l.y);var d=new a.Quaternion;d.setFromAxisAngle(new a.Vector3(0,1,0),l.x);var f=new a.Quaternion;r.camera.quaternion.copy(f.multiply(u).multiply(c).multiply(d)),r.camera.updateMatrixWorld(!0)}},f=function(e){s=o.OFF},p=function(e){i.DomEvent.preventDefault(e)},h=function(e){var t=r.camera.position;e.deltaY<0?t.setZ(t.z/2):e.deltaY>0&&t.setZ(2*t.z),r.camera.updateMatrixWorld(!0)},m=function(e){switch(console.log(e),e.keyCode){case r.keys.UP:n(0,10),console.log("up");break;case r.keys.BOTTOM:n(0,-10);break;case r.keys.LEFT:n(10,0);break;case r.keys.RIGHT:n(-10,0)}};i.DomEvent.on(this.domElement,"mousedown",c),i.DomEvent.on(this.domElement,"mousemove",d),i.DomEvent.on(this.domElement,"mouseup",f),i.DomEvent.on(this.domElement,"contextmenu",p),i.DomEvent.on(this.domElement,"wheel",h),i.DomEvent.on(window,"keydown",m)}Object.defineProperty(t,"__esModule",{value:!0}),t.cameraControl=void 0;var i=n(88),s=n(23),a=r(s);t.cameraControl=o},function(e,t){"use strict";THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*P.autoRotateSpeed}function r(){return Math.pow(.95,P.zoomSpeed)}function o(e){H.theta-=e}function i(e){H.phi-=e}function s(e){P.object instanceof THREE.PerspectiveCamera?V/=e:P.object instanceof THREE.OrthographicCamera?(P.object.zoom=Math.max(P.minZoom,Math.min(P.maxZoom,P.object.zoom*e)),P.object.updateProjectionMatrix(),z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),P.enableZoom=!1)}function a(e){P.object instanceof THREE.PerspectiveCamera?V*=e:P.object instanceof THREE.OrthographicCamera?(P.object.zoom=Math.max(P.minZoom,Math.min(P.maxZoom,P.object.zoom/e)),P.object.updateProjectionMatrix(),z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),P.enableZoom=!1)}function u(e){G.set(e.clientX,e.clientY)}function l(e){K.set(e.clientX,e.clientY)}function c(e){J.set(e.clientX,e.clientY)}function d(e){q.set(e.clientX,e.clientY),Y.subVectors(q,G);var t=P.domElement===document?P.domElement.body:P.domElement;o(2*Math.PI*Y.x/t.clientWidth*P.rotateSpeed),i(2*Math.PI*Y.y/t.clientHeight*P.rotateSpeed),G.copy(q),P.update()}function f(e){Z.set(e.clientX,e.clientY),Q.subVectors(Z,K),Q.y>0?s(r()):Q.y<0&&a(r()),K.copy(Z),P.update()}function p(e){X.set(e.clientX,e.clientY),$.subVectors(X,J),ne($.x,$.y),J.copy(X),P.update()}function h(e){}function m(e){e.deltaY<0?a(r()):e.deltaY>0&&s(r()),P.update()}function v(e){switch(e.keyCode){case P.keys.UP:ne(0,P.keyPanSpeed),P.update();break;case P.keys.BOTTOM:ne(0,-P.keyPanSpeed),P.update();break;case P.keys.LEFT:ne(P.keyPanSpeed,0),P.update();break;case P.keys.RIGHT:ne(-P.keyPanSpeed,0),P.update()}}function y(e){G.set(e.touches[0].pageX,e.touches[0].pageY)}function g(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);K.set(0,r)}function b(e){J.set(e.touches[0].pageX,e.touches[0].pageY)}function _(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Y.subVectors(q,G);var t=P.domElement===document?P.domElement.body:P.domElement;o(2*Math.PI*Y.x/t.clientWidth*P.rotateSpeed),i(2*Math.PI*Y.y/t.clientHeight*P.rotateSpeed),G.copy(q),P.update()}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);Z.set(0,o),Q.subVectors(Z,K),Q.y>0?a(r()):Q.y<0&&s(r()),K.copy(Z),P.update()}function E(e){X.set(e.touches[0].pageX,e.touches[0].pageY),$.subVectors(X,J),ne($.x,$.y),J.copy(X),P.update()}function x(e){}function C(e){if(P.enabled!==!1){if(e.preventDefault(),e.button===P.mouseButtons.ORBIT){if(P.enableRotate===!1)return;u(e),B=I.ROTATE}else if(e.button===P.mouseButtons.ZOOM){if(P.enableZoom===!1)return;l(e),B=I.DOLLY}else if(e.button===P.mouseButtons.PAN){if(P.enablePan===!1)return;c(e),B=I.PAN}B!==I.NONE&&(document.addEventListener("mousemove",S,!1),document.addEventListener("mouseup",O,!1),P.dispatchEvent(L))}}function S(e){if(P.enabled!==!1)if(e.preventDefault(),B===I.ROTATE){if(P.enableRotate===!1)return;d(e)}else if(B===I.DOLLY){if(P.enableZoom===!1)return;f(e)}else if(B===I.PAN){if(P.enablePan===!1)return;p(e)}}function O(e){P.enabled!==!1&&(h(e),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",O,!1),P.dispatchEvent(j),B=I.NONE)}function k(e){P.enabled===!1||P.enableZoom===!1||B!==I.NONE&&B!==I.ROTATE||(e.preventDefault(),e.stopPropagation(),m(e),P.dispatchEvent(L),P.dispatchEvent(j))}function T(e){P.enabled!==!1&&P.enableKeys!==!1&&P.enablePan!==!1&&v(e)}function A(e){if(P.enabled!==!1){switch(e.touches.length){case 1:if(P.enableRotate===!1)return;y(e),B=I.TOUCH_ROTATE;break;case 2:if(P.enableZoom===!1)return;g(e),B=I.TOUCH_DOLLY;break;case 3:if(P.enablePan===!1)return;b(e),B=I.TOUCH_PAN;break;default:B=I.NONE}B!==I.NONE&&P.dispatchEvent(L)}}function D(e){if(P.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(P.enableRotate===!1)return;if(B!==I.TOUCH_ROTATE)return;_(e);break;case 2:if(P.enableZoom===!1)return;if(B!==I.TOUCH_DOLLY)return;w(e);break;case 3:if(P.enablePan===!1)return;if(B!==I.TOUCH_PAN)return;E(e);break;default:B=I.NONE}}function N(e){P.enabled!==!1&&(x(e),P.dispatchEvent(j),B=I.NONE)}function M(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return F.phi},this.getAzimuthalAngle=function(){return F.theta},this.reset=function(){P.target.copy(P.target0),P.object.position.copy(P.position0),P.object.zoom=P.zoom0,P.object.updateProjectionMatrix(),P.dispatchEvent(R),P.update(),B=I.NONE},this.update=function(){var t=new THREE.Vector3,r=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),i=r.clone().inverse(),s=new THREE.Vector3,a=new THREE.Quaternion;return function(){var e=P.object.position;return t.copy(e).sub(P.target),t.applyQuaternion(r),F.setFromVector3(t),P.autoRotate&&B===I.NONE&&o(n()),F.theta+=H.theta,F.phi+=H.phi,F.theta=Math.max(P.minAzimuthAngle,Math.min(P.maxAzimuthAngle,F.theta)),F.phi=Math.max(P.minPolarAngle,Math.min(P.maxPolarAngle,F.phi)),F.makeSafe(),F.radius*=V,F.radius=Math.max(P.minDistance,Math.min(P.maxDistance,F.radius)),P.target.add(W),t.setFromSpherical(F),t.applyQuaternion(i),e.copy(P.target).add(t),P.object.lookAt(P.target),P.enableDamping===!0?(H.theta*=1-P.dampingFactor,H.phi*=1-P.dampingFactor):H.set(0,0,0),V=1,W.set(0,0,0),!!(z||s.distanceToSquared(P.object.position)>U||8*(1-a.dot(P.object.quaternion))>U)&&(P.dispatchEvent(R),s.copy(P.object.position),a.copy(P.object.quaternion),z=!1,!0)}}(),this.dispose=function(){P.domElement.removeEventListener("contextmenu",M,!1),P.domElement.removeEventListener("mousedown",C,!1),P.domElement.removeEventListener("wheel",k,!1),P.domElement.removeEventListener("touchstart",A,!1),P.domElement.removeEventListener("touchend",N,!1),P.domElement.removeEventListener("touchmove",D,!1),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",O,!1),window.removeEventListener("keydown",T,!1)};var P=this,R={type:"change"},L={type:"start"},j={type:"end"},I={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},B=I.NONE,U=1e-6,F=new THREE.Spherical,H=new THREE.Spherical,V=1,W=new THREE.Vector3,z=!1,G=new THREE.Vector2,q=new THREE.Vector2,Y=new THREE.Vector2,J=new THREE.Vector2,X=new THREE.Vector2,$=new THREE.Vector2,K=new THREE.Vector2,Z=new THREE.Vector2,Q=new THREE.Vector2,ee=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),W.add(e)}}(),te=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),W.add(e)}}(),ne=function(){var e=new THREE.Vector3;return function(t,n){var r=P.domElement===document?P.domElement.body:P.domElement;if(P.object instanceof THREE.PerspectiveCamera){var o=P.object.position;e.copy(o).sub(P.target);var i=e.length();i*=Math.tan(P.object.fov/2*Math.PI/180),ee(2*t*i/r.clientHeight,P.object.matrix),te(2*n*i/r.clientHeight,P.object.matrix)}else P.object instanceof THREE.OrthographicCamera?(ee(t*(P.object.right-P.object.left)/P.object.zoom/r.clientWidth,P.object.matrix),te(n*(P.object.top-P.object.bottom)/P.object.zoom/r.clientHeight,P.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),P.enablePan=!1)}}();P.domElement.addEventListener("contextmenu",M,!1),P.domElement.addEventListener("mousedown",C,!1),P.domElement.addEventListener("wheel",k,!1),P.domElement.addEventListener("touchstart",A,!1),P.domElement.addEventListener("touchend",N,!1),P.domElement.addEventListener("touchmove",D,!1),window.addEventListener("keydown",T,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var o=n(23),i=r(o);i.Raycaster.prototype.setFromCameraHP=function(e,t){if(t&&t.isPerspectiveCamera){var n=t.clone();n.position.set(0,0,0),n.updateMatrixWorld(!0),this.ray.direction.set(e.x,e.y,.5).unproject(n).normalize(),this.ray.origin.setFromMatrixPosition(t.matrixWorld)}else t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(27),i=r(o),s=s||{};s.gui=s.gui||{},s.utils=s.utils||{},s.controllers=s.controllers||{},s.dom=s.dom||{},s.color=s.color||{},s.utils.css=function(){return{load:function(e,t){t=t||document;var n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),s.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;0<=r;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0)for(var o=0,i=t.length;o<i&&!(o in t&&n.call(r,t[o],o)===this.BREAK);o++);else for(o in t)if(n.call(r,t[o],o)===this.BREAK)break},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),s.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onFinishChange=this.__onChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(s.utils.common),s.dom.dom=function(e){function t(t){return"0"===t||e.isUndefined(t)?0:(t=t.match(r),e.isNull(t)?0:parseFloat(t[1]))}var n={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,r){e.each(t,function(e){n[e]=r})});var r=/(\d+(\.\d+)?)px/,o={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,r,o,i){o=o||{};var s=n[r];if(!s)throw Error("Event type "+r+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":a.initMouseEvent(r,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,o.x||o.clientX||0,o.y||o.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":s=a.initKeyboardEvent||a.initKeyEvent,e.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),s(r,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:a.initEvent(r,o.bubbles||!1,o.cancelable||!0)}e.defaults(a,i),t.dispatchEvent(a)},bind:function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n),o},unbind:function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n),o},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(e,t){if(t){if(void 0!==e.className)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!=r&&(n.splice(r,1),e.className=n.join(" "))}}else e.className=void 0;return o},hasClass:function(e,t){return RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){return e=getComputedStyle(e),t(e["border-left-width"])+t(e["border-right-width"])+t(e["padding-left"])+t(e["padding-right"])+t(e.width)},getHeight:function(e){return e=getComputedStyle(e),t(e["border-top-width"])+t(e["border-bottom-width"])+t(e["padding-top"])+t(e["padding-bottom"])+t(e.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return o}(s.utils.common),s.controllers.OptionController=function(e,t,n){var r=function e(r,o,i){e.superclass.call(this,r,o);var s=this;if(this.__select=document.createElement("select"),n.isArray(i)){var a={};n.each(i,function(e){a[e]=e}),i=a}n.each(i,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){s.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.controllers.NumberController=function(e,t){var n=function e(n,r,o){e.superclass.call(this,n,r),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,t.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,n=this.__impliedStep,n=n.toString(),n=-1<n.indexOf(".")?n.length-n.indexOf(".")-1:0,this.__precision=n};return n.superclass=e,t.extend(n.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&0!=e%this.__step&&(e=Math.round(e/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),n}(s.controllers.Controller,s.utils.common),s.controllers.NumberControllerBox=function(e,t,n){var r=function e(r,o,i){function s(){var e=parseFloat(c.__input.value);n.isNaN(e)||c.setValue(e)}function a(e){var t=l-e.clientY;c.setValue(c.getValue()+t*c.__impliedStep),l=e.clientY}function u(){t.unbind(window,"mousemove",a),t.unbind(window,"mouseup",u)}this.__truncationSuspended=!1,e.superclass.call(this,r,o,i);var l,c=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",s),t.bind(this.__input,"blur",function(){
s(),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",a),t.bind(window,"mouseup",u),l=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(c.__truncationSuspended=!0,this.blur(),c.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){var e,t=this.__input;if(this.__truncationSuspended)e=this.getValue();else{e=this.getValue();var n=Math.pow(10,this.__precision);e=Math.round(e*n)/n}return t.value=e,r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.NumberController,s.dom.dom,s.utils.common),s.controllers.NumberControllerSlider=function(e,t,n,r,o){function i(e,t,n,r,o){return r+(e-t)/(n-t)*(o-r)}var s=function e(n,r,o,s,a){function u(e){e.preventDefault();var n=t.getOffset(c.__background),r=t.getWidth(c.__background);return c.setValue(i(e.clientX,n.left,n.left+r,c.__min,c.__max)),!1}function l(){t.unbind(window,"mousemove",u),t.unbind(window,"mouseup",l),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}e.superclass.call(this,n,r,{min:o,max:s,step:a});var c=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",u),t.bind(window,"mouseup",l),u(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=e,s.useDefaultStyles=function(){n.inject(o)},r.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(s.controllers.NumberController,s.dom.dom,s.utils.css,s.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),s.controllers.FunctionController=function(e,t,n){var r=function e(n,r,o){e.superclass.call(this,n,r);var i=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===o?"Fire":o,t.bind(this.__button,"click",function(e){return e.preventDefault(),i.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.controllers.BooleanController=function(e,t,n){var r=function e(n,r){e.superclass.call(this,n,r);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){o.setValue(!o.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){return e=r.superclass.prototype.setValue.call(this,e),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(t=t.hex.toString(16);6>t.length;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(s.utils.common),s.color.interpret=function(e,t){var n,r,o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i),null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){return e=e.match(/^#([A-F0-9]{6})$/i),null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:e},CSS_RGB:{read:function(e){return e=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/),null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(e){return e=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/),null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=1<arguments.length?t.toArray(arguments):arguments[0];return t.each(o,function(o){if(o.litmus(e))return t.each(o.conversions,function(o,i){if(n=o.read(e),!1===r&&!1!==n)return r=n,n.conversionName=i,n.conversion=o,t.BREAK}),t.BREAK}),r}}(s.color.toString,s.utils.common),s.GUI=s.gui.GUI=function(e,t,n,r,o,s,a,u,l,c,d,f,p,h,m){function v(e,t,n,s){if(void 0===t[n])throw Error("Object "+t+' has no property "'+n+'"');s.color?t=new d(t,n):(t=[t,n].concat(s.factoryArgs),t=r.apply(e,t)),s.before instanceof o&&(s.before=s.before.__li),b(e,t),h.addClass(t.domElement,"c"),n=document.createElement("span"),h.addClass(n,"property-name"),n.innerHTML=t.property;var a=document.createElement("div");return a.appendChild(n),a.appendChild(t.domElement),s=y(e,a,s.before),h.addClass(s,R.CLASS_CONTROLLER_ROW),h.addClass(s,(0,i.default)(t.getValue())),g(e,s,t),e.__controllers.push(t),t}function y(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function g(e,t,n){if(n.__li=t,n.__gui=e,m.extend(n,{options:function(t){return 1<arguments.length?(n.remove(),v(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[m.toArray(arguments)]})):m.isArray(t)||m.isObject(t)?(n.remove(),v(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var r=new u(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});m.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],o=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),o.apply(r,e)}}),h.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof u){var o=function(t){return m.isNumber(n.__min)&&m.isNumber(n.__max)?(n.remove(),v(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=m.compose(o,n.min),n.max=m.compose(o,n.max)}else n instanceof s?(h.bind(t,"click",function(){h.fakeEvent(n.__checkbox,"click")}),h.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof a?(h.bind(t,"click",function(){h.fakeEvent(n.__button,"click")}),h.bind(t,"mouseover",function(){h.addClass(n.__button,"hover")}),h.bind(t,"mouseout",function(){h.removeClass(n.__button,"hover")})):n instanceof d&&(h.addClass(t,"color"),n.updateDisplay=m.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=m.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&S(e.getRoot(),!0),t},n.setValue)}function b(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!=r){var o=n.__rememberedObjectIndecesToControllers[r];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[r]=o),o[t.property]=t,n.load&&n.load.remembered){if(n=n.load.remembered,n[e.preset])n=n[e.preset];else{if(!n[T])return;n=n[T]}n[r]&&void 0!==n[r][t.property]&&(r=n[r][t.property],t.initialValue=r,t.setValue(r))}}}function _(e){var t=e.__save_row=document.createElement("li");h.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),h.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",h.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",h.addClass(r,"button"),h.addClass(r,"save");var o=document.createElement("span");o.innerHTML="New",h.addClass(o,"button"),h.addClass(o,"save-as");var i=document.createElement("span");i.innerHTML="Revert",h.addClass(i,"button"),h.addClass(i,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?m.each(e.load.remembered,function(t,n){C(e,n,n==e.preset)}):C(e,T,!1),h.bind(s,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(i),k){var t=document.getElementById("dg-save-locally"),a=document.getElementById("dg-local-explain");t.style.display="block",t=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&t.setAttribute("checked","checked");var u=function(){a.style.display=e.useLocalStorage?"block":"none"};u(),h.bind(t,"change",function(){e.useLocalStorage=!e.useLocalStorage,u()})}var l=document.getElementById("dg-new-constructor");h.bind(l,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||A.hide()}),h.bind(n,"click",function(){l.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),A.show(),l.focus(),l.select()}),h.bind(r,"click",function(){e.save()}),h.bind(o,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),h.bind(i,"click",function(){e.revert()})}function w(e){function t(t){return t.preventDefault(),o=t.clientX,h.addClass(e.__closeButton,R.CLASS_DRAG),h.bind(window,"mousemove",n),h.bind(window,"mouseup",r),!1}function n(t){return t.preventDefault(),e.width+=o-t.clientX,e.onResize(),o=t.clientX,!1}function r(){h.removeClass(e.__closeButton,R.CLASS_DRAG),h.unbind(window,"mousemove",n),h.unbind(window,"mouseup",r)}e.__resize_handle=document.createElement("div"),m.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var o;h.bind(e.__resize_handle,"mousedown",t),h.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function E(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function x(e,t){var n={};return m.each(e.__rememberedObjects,function(r,o){var i={};m.each(e.__rememberedObjectIndecesToControllers[o],function(e,n){i[n]=t?e.initialValue:e.getValue()}),n[o]=i}),n}function C(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function S(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function O(e){0!=e.length&&f(function(){O(e)}),m.each(e,function(e){e.updateDisplay()})}e.inject(n);var k,T="Default";try{k="localStorage"in window&&null!==window.localStorage}catch(e){k=!1}var A,D,N=!0,M=!1,P=[],R=function e(t){function n(){localStorage.setItem(document.location.href+".gui",JSON.stringify(o.getSaveObject()))}function r(){var e=o.getRoot();e.width+=1,m.defer(function(){e.width-=1})}var o=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),h.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=m.defaults(t,{autoPlace:!0,width:e.DEFAULT_WIDTH}),t=m.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),m.isUndefined(t.load)?t.load={preset:T}:t.preset&&(t.load.preset=t.preset),m.isUndefined(t.parent)&&t.hideable&&P.push(this),t.resizable=m.isUndefined(t.parent)&&t.resizable,t.autoPlace&&m.isUndefined(t.scrollable)&&(t.scrollable=!0);var i=k&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return o.parent?o.getRoot().preset:t.load.preset},set:function(e){for(o.parent?o.getRoot().preset=e:t.load.preset=e,e=0;e<this.__preset_select.length;e++)this.__preset_select[e].value==this.preset&&(this.__preset_select.selectedIndex=e);o.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,E(o,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,a&&(a.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(n){t.closed=n,t.closed?h.addClass(o.__ul,e.CLASS_CLOSED):h.removeClass(o.__ul,e.CLASS_CLOSED),this.onResize(),o.__closeButton&&(o.__closeButton.innerHTML=n?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return i},set:function(e){k&&((i=e)?h.bind(window,"unload",n):h.unbind(window,"unload",n),localStorage.setItem(document.location.href+".isLocal",e))}}}),m.isUndefined(t.parent)){if(t.closed=!1,h.addClass(this.domElement,e.CLASS_MAIN),h.makeSelectable(this.domElement,!1),k&&i){o.useLocalStorage=!0;var s=localStorage.getItem(document.location.href+".gui");s&&(t.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,h.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),h.bind(this.__closeButton,"click",function(){o.closed=!o.closed})}else{void 0===t.closed&&(t.closed=!0);var a=document.createTextNode(t.name);h.addClass(a,"controller-name"),s=y(o,a),h.addClass(this.__ul,e.CLASS_CLOSED),h.addClass(s,"title"),h.bind(s,"click",function(e){return e.preventDefault(),o.closed=!o.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(m.isUndefined(t.parent)&&(N&&(D=document.createElement("div"),h.addClass(D,"dg"),h.addClass(D,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(D),N=!1),D.appendChild(this.domElement),h.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||E(o,t.width)),h.bind(window,"resize",function(){o.onResize()}),h.bind(this.__ul,"webkitTransitionEnd",function(){o.onResize()}),h.bind(this.__ul,"transitionend",function(){o.onResize()}),h.bind(this.__ul,"oTransitionEnd",function(){o.onResize()}),this.onResize(),t.resizable&&w(this),o.getRoot(),t.parent||r()};return R.toggleHide=function(){M=!M,m.each(P,function(e){e.domElement.style.zIndex=M?-999:999,e.domElement.style.opacity=M?0:1})},R.CLASS_AUTO_PLACE="a",R.CLASS_AUTO_PLACE_CONTAINER="ac",R.CLASS_MAIN="main",R.CLASS_CONTROLLER_ROW="cr",R.CLASS_TOO_TALL="taller-than-window",R.CLASS_CLOSED="closed",R.CLASS_CLOSE_BUTTON="close-button",R.CLASS_DRAG="drag",R.DEFAULT_WIDTH=245,R.TEXT_CLOSED="Close Controls",R.TEXT_OPEN="Open Controls",h.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||R.toggleHide()},!1),m.extend(R.prototype,{add:function(e,t){return v(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return v(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;m.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&D.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};return t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]),t=new R(t),this.__folders[e]=t,e=y(this,t.domElement),h.addClass(e,"folder"),t},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=h.getOffset(e.__ul).top,n=0;m.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=h.getHeight(t))}),window.innerHeight-t-20<n?(h.addClass(e.domElement,R.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(h.removeClass(e.domElement,R.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&m.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(m.isUndefined(A)&&(A=new p,A.domElement.innerHTML=t),this.parent)throw Error("You can only call remember on a top level GUI.");var e=this;m.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&_(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&E(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=x(this)),e.folders={},m.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=x(this),S(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[T]=x(this,!0)),this.load.remembered[e]=x(this),this.preset=e,C(this,e,!0)},revert:function(e){m.each(this.__controllers,function(t){this.getRoot().load.remembered?b(e||this.getRoot(),t):t.setValue(t.initialValue)},this),m.each(this.__folders,function(e){e.revert(e)}),e||S(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&O(this.__listening)}}),R}(s.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",s.controllers.factory=function(e,t,n,r,o,i,s){return function(a,u,l,c){var d=a[u];return s.isArray(l)||s.isObject(l)?new e(a,u,l):s.isNumber(d)?s.isNumber(l)&&s.isNumber(c)?new n(a,u,l,c):new t(a,u,{min:l,max:c}):s.isString(d)?new r(a,u):s.isFunction(d)?new o(a,u,""):s.isBoolean(d)?new i(a,u):void 0}}(s.controllers.OptionController,s.controllers.NumberControllerBox,s.controllers.NumberControllerSlider,s.controllers.StringController=function(e,t,n){var r=function e(n,r){function o(){i.setValue(i.__input.value)}e.superclass.call(this,n,r);var i=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",o),t.bind(this.__input,"change",o),t.bind(this.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.controllers.FunctionController,s.controllers.BooleanController,s.utils.common),s.controllers.Controller,s.controllers.BooleanController,s.controllers.FunctionController,s.controllers.NumberControllerBox,s.controllers.NumberControllerSlider,s.controllers.OptionController,s.controllers.ColorController=function(e,t,n,r,o){function i(e,t,n,r){e.style.background="",o.each(u,function(o){e.style.cssText+="background: "+o+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function s(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function e(a,u){function l(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",c)}function d(){var e=r(this.value);!1!==e?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function f(){t.unbind(window,"mousemove",h),t.unbind(window,"mouseup",f)}function p(e){e.preventDefault();var n=t.getWidth(m.__saturation_field),r=t.getOffset(m.__saturation_field),o=(e.clientX-r.left+document.body.scrollLeft)/n;return e=1-(e.clientY-r.top+document.body.scrollTop)/n,1<e?e=1:0>e&&(e=0),1<o?o=1:0>o&&(o=0),m.__color.v=e,m.__color.s=o,m.setValue(m.__color.toOriginal()),!1}function h(e){e.preventDefault();var n=t.getHeight(m.__hue_field),r=t.getOffset(m.__hue_field);return e=1-(e.clientY-r.top+document.body.scrollTop)/n,1<e?e=1:0>e&&(e=0),m.__color.h=360*e,m.setValue(m.__color.toOriginal()),!1}e.superclass.call(this,a,u),this.__color=new n(this.getValue()),
this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&d.call(this)}),t.bind(this.__input,"blur",d),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(m.__selector,"drag")})});var v=document.createElement("div");o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(v.style,{width:"100%",height:"100%",background:"none"}),i(v,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",l),t.bind(this.__field_knob,"mousedown",l),t.bind(this.__hue_field,"mousedown",function(e){h(e),t.bind(window,"mousemove",h),t.bind(window,"mouseup",f)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=e,o.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(!1!==e){var t=!1;o.each(n.COMPONENTS,function(n){if(!o.isUndefined(e[n])&&!o.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&o.extend(this.__color.__state,e)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=.5>this.__color.v||.5<this.__color.s?255:0,a=255-s;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,i(this.__saturation_field,"left","#fff",this.__temp.toString()),o.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return a}(s.controllers.Controller,s.dom.dom,s.color.Color=function(e,t,n,r){function o(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function i(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(a(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,o){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,o);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function a(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS="r g b h s v hex a".split(" "),r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(u.prototype,"r",2),o(u.prototype,"g",1),o(u.prototype,"b",0),i(u.prototype,"h"),i(u.prototype,"s"),i(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(s.color.interpret,s.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=e/60-Math.floor(e/60),o=n*(1-t),i=n*(1-r*t);return t=n*(1-(1-r)*t),e=[[n,t,o],[i,n,o],[o,n,t],[o,i,n],[t,o,n],[n,o,i]][Math.floor(e/60)%6],{r:255*e[0],g:255*e[1],b:255*e[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),o=Math.max(e,t,n),r=o-r;return 0==o?{h:NaN,s:0,v:0}:(e=(e==o?(t-n)/r:t==o?2+(n-e)/r:4+(e-t)/r)/6,0>e&&(e+=1),{h:360*e,s:r/o,v:o/255})},rgb_to_hex:function(e,t,n){return e=this.hex_with_component(0,2,e),e=this.hex_with_component(e,1,t),e=this.hex_with_component(e,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),s.color.toString,s.utils.common),s.color.interpret,s.utils.common),s.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),s.dom.CenteredDiv=function(e,t){var n=function n(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function n(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(s.dom.dom,s.utils.common),s.dom.dom,s.utils.common),e.exports=s},function(e,t){"use strict";var n=function(){var e=Date.now(),t=e,n=0,r=1/0,o=0,i=0,s=1/0,a=0,u=0,l=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),g(++l%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var d=document.createElement("div");d.id="fps",d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(d);var f=document.createElement("div");f.id="fpsText",f.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",f.innerHTML="FPS",d.appendChild(f);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",d.appendChild(p);p.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(h)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var v=document.createElement("div");v.id="msText",v.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",v.innerHTML="MS",m.appendChild(v);var y=document.createElement("div");for(y.id="msGraph",y.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(y);y.children.length<74;){var h=document.createElement("span");h.style.cssText="width:1px;height:30px;float:left;background-color:#131",y.appendChild(h)}var g=function(e){switch(l=e){case 0:d.style.display="block",m.style.display="none";break;case 1:d.style.display="none",m.style.display="block"}},b=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"};return{REVISION:11,domElement:c,setMode:g,begin:function(){e=Date.now()},end:function(){var l=Date.now();return n=l-e,r=Math.min(r,n),o=Math.max(o,n),v.textContent=n+" MS ("+r+"-"+o+")",b(y,Math.min(30,30-n/200*30)),u++,l>t+1e3&&(i=Math.round(1e3*u/(l-t)),s=Math.min(s,i),a=Math.max(a,i),f.textContent=i+" FPS ("+s+"-"+a+")",b(p,Math.min(30,30-i/100*30)),t=l,u=0),l},update:function(){e=this.end()}}};e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.userData.id=e.userData.id||e.uuid,f[e.userData.id]={dirty:!0,mesh:e},!0}function i(e){var t=e.userData.id;return!!f[t]&&(f[t].dirty=!0,!0)}function s(e){var t=e.userData.id;if(f[t])return f[t].dirty=!0,f[t].remove=!0,f[t].mesh=null,!0}Object.defineProperty(t,"__esModule",{value:!0}),t.BuildingStore=void 0;var a=n(111),u=r(a),l=n(88),c=n(112),d=n(113),f={VERSION:"0.0.1"},p=(0,l.assign)({},l.EventEmitter.prototype,{getAll:function(){var e=[];for(var t in f)"VERSION"!==t&&e.push(f[t].mesh);return e},toJson:function(){var e={type:"FeatureCollection",features:[]};for(var t in f){var n=f[t];"VERSION"===t||n.remove||e.features.push((0,d.buildingTOJSON)(n.mesh))}return e},dispatcherIndex:u.default.register(function(e){var t,n=e.action;switch(n.actionType){case c.BUILDING_CONSTS.ADD:t=n.message,t&&o(t)&&(console.log("create Building"),p.emit(c.BUILDING_CONSTS.ADD,t),p.emit(c.BUILDING_CONSTS.CHANGE));break;case c.BUILDING_CONSTS.COMMAND:var r=n.message;r&&i(r.object)&&(console.log(r.name),p.emit(c.BUILDING_CONSTS.COMMAND,r));break;case c.BUILDING_CONSTS.REMOVE:var r=n.message;r&&s(r.object)&&(console.log(r.name),p.emit(c.BUILDING_CONSTS.REMOVE,r));break;case c.BUILDING_CONSTS.REMOVEALL:for(var a in f)if("VERSION"!==a){var u=f[a].mesh;u.parent.remove(u),delete f[a]}}return!0})});t.BuildingStore=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),o=(0,r.assign)({},r.Dispatcher.prototype,{handleViewAction:function(e){this.dispatch({source:"VIEW_ACTION",action:e})}});t.default=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BUILDING_CONSTS={ADD:"BUILDING_ADD",REMOVE:"BUILDING_REMOVE",MODIFY:"BUILDING_MODIFY",CHANGE:"BUILDING_CHANGE",COMMAND:"BUILDING_COMMAND",REMOVRALL:"REMOVEALL"}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.jsonToBuilding=t.buildingTOJSON=t.modifyBuildingHeight=t.createBuilding=void 0;var o=n(23),i=r(o),s=n(25),a=new s.MercatorProjection,u=function(e,t){var n={steps:1,amount:t&&t.FLOORNUM&&t.FLOORHEIGHT?t.FLOORNUM*t.FLOORHEIGHT:10,bevelEnabled:!1},r=new i.ExtrudeGeometry(e,n),o=r.center().negate(),s=new i.MeshLambertMaterial({color:13660510}),a=(new i.TextureLoader).load("images/textures/brick_diffuse.jpg");a.wrapS=i.RepeatWrapping,a.wrapT=i.RepeatWrapping;var u=new i.MeshLambertMaterial({map:a}),l=new i.Mesh(r,new i.MultiMaterial([s,u]));return l.name="building",l.castShadow=!0,l.receiveShadow=!0,l.position.copy(o),l.userData.floorHeight=t&&t.FLOORHEIGHT?t.FLOORHEIGHT:10,l.userData.floorNum=t&&t.FLOORNUM?t.FLOORNUM:1,l.userData.id=t&&t.ID?t.ID:l.uuid,l.userData.name=t&&t.NAME?t.NAME:"建筑",l.userData.materialUrl=t&&t.MATERIALURL?t.MATERIALURL:"buildingDefualtUrl.jpg",l.userData.layer=t?t.LAYER:"",t&&t.ROTATION&&l.rotation.copy((new i.Euler).fromArray(t.ROTATION)),t&&t.SCALE&&l.scale.copy((new i.Vector3).fromArray(t.SCALE)),l.position.setZ(l.position.z+(t?t.STARTHEIGHT||0:0)),c(r,l.userData.floorNum,1),l},l=function(e,t,n){for(var r=e.geometry.vertices,o=r[0].z,i=t*n,s=r.length/2;s<r.length;s++)r[s].z=o+i;e.userData.floorHeight=t,e.userData.floorNum=n;var a=e.geometry.center().negate();e.position.add(a),c(e.geometry,n,1),e.geometry.verticesNeedUpdate=!0},c=function(e,t,n){for(var r=e.vertices.length,o=e.faceVertexUvs[0],i=r-4,s=!0,a=i;a<o.length;a++){var u=o[a];s?(u[0].set(0,0),u[1].set(1,0),u[2].set(0,1*t)):(u[0].set(1,0),u[1].set(1,1*t),u[2].set(0,1*t)),s=!s}e.uvsNeedUpdate=!0},d=function(e){for(var t=e,n=t.geometry,r=t.properties,o=n.coordinates,s=[],l=0;l<o[0].length;l++){var c=o[0][l],d=a.lngLatToPoint({lng:c[0],lat:c[1]}),f=new i.Vector2(d.x,d.y);s.push(f)}var p=new i.Shape;p.fromPoints(s);var h=u(p,r);return h},f=function(e){var t={type:"Feature",properties:{NAME:"",ID:"",FLOORHEIGHT:0,FLOORNUM:0,LAYER:"",SCALE:1,ROLATE:[0,0,0],STARTHEIGHT:0},geometry:{type:"Polygon",coordinates:[[]]}};t.properties.NAME=e.userData.name,t.properties.ID=e.userData.id,t.properties.FLOORHEIGHT=e.userData.floorHeight,t.properties.FLOORNUM=e.userData.floorNum,t.properties.LAYER=e.userData.layer.name,t.properties.MATERIALURL=e.userData.materialUrl,t.properties.SCALE=e.scale.toArray(),t.properties.ROTATION=e.rotation.toArray(),t.properties.STARTHEIGHT=e.position.z-e.userData.floorHeight*e.userData.floorNum/2;for(var n=e.geometry.vertices,r=(e.position,0);r<n.length/2;r++){var o=new i.Vector3(0,0,0),s=a.pointToLngLat(o.add(n[r]).add(e.position));t.geometry.coordinates[0].push([s.lng,s.lat])}return t};console.log(f),t.createBuilding=u,t.modifyBuildingHeight=l,t.buildingTOJSON=f,t.jsonToBuilding=d},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Solar=void 0;var o=n(3),i=r(o),s=n(4),a=r(s),u=n(25),l=n(115),c=1e4,d=n(116);d.get("../../index.html").then(function(e){}).catch(function(e){});var f=n(141);console.log("=================path ========="),console.log(f),console.log(f.resolve(e));t.Solar=function(){function e(){(0,i.default)(this,e),this.date=null,this.targetLatLng=null,this.light=new THREE.DirectionalLight(16777215,1),this.light.name="solarLight",this.light.castShadow=!0,this.light.shadow.camera.near=1,this.light.shadow.camera.far=2e4,this.light.shadow.camera.right=1e4,this.light.shadow.camera.left=-1e4,this.light.shadow.camera.top=1e4,this.light.shadow.camera.bottom=-1e4,this.light.shadow.mapSize.width=1e4,this.light.shadow.mapSize.height=1e4,this.projection=new u.MercatorProjection}return(0,a.default)(e,[{key:"showLight",value:function(e,t){this.date=e,this.targetLatLng=t;var n=new l.SolarAngle(this.date,this.targetLatLng).getSolarAngle();if(console.log(n),n.elevation<=0)return console.log("here has no solar now");var r=c*Math.sin(n.direction),o=c*Math.cos(n.direction),i=c*Math.sin(n.elevation),s=this.projection.lngLatToPoint(this.targetLatLng);this.light.target.position.set(s.x,s.y,0),this.light.position.set(s.x+r,s.y+o,i)}}]),e}()}).call(t,"/")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e instanceof String)var t=new Date(e);else if(e instanceof Date)var t=e;var n=t.getFullYear(),r=t.getTime(),o=new Date(n+"-1-1").getTime(),i=r-o;return Math.floor(i/24/3600/1e3)+1}Object.defineProperty(t,"__esModule",{value:!0}),t.SolarAngle=void 0;var i=n(3),s=r(i),a=n(4),u=r(a);t.SolarAngle=function(){function e(t,n){(0,s.default)(this,e),this.dateTime=t,this.latLng={lat:n.lat,lng:n.lng}}return(0,u.default)(e,[{key:"_getSolarDeclination",value:function(){var e=o(this.dateTime);console.log(e);var t=2*Math.PI*(e-1)/365,n=.006918-.399912*Math.cos(t)+.0070257*Math.sin(t)-.006758*Math.cos(2*t)+907e-6*Math.sin(2*t)-.002697*Math.cos(3*t)+.00148*Math.sin(3*t);return n}},{key:"_getHourAngle",value:function(){var e=this.dateTime.getTime()+24e4*(120-this.latLng.lng),t=new Date(e);return console.log(15*(t.getHours()-12)),15*(t.getHours()-12)}},{key:"getSolarAngle",value:function(){var e=this._getSolarDeclination(),t=this._getHourAngle()/180*Math.PI,n=this.latLng.lat/180*Math.PI;console.log(t);var r=Math.sin(n)*Math.sin(e)+Math.cos(n)*Math.cos(e)*Math.cos(t);console.log(r);var o=Math.asin(r),i=Math.acos(Math.sin(e)-Math.sin(o)*Math.sin(n)/(Math.cos(o)*Math.cos(n)));return i=t>=0?2*Math.PI-i:i,{elevation:o,direction:i}}}]),e}()},function(e,t,n){e.exports=n(117)},function(e,t,n){"use strict";function r(e){var t=new s(e),n=i(s.prototype.request,t);return o.extend(n,s.prototype,t),o.extend(n,t),n}var o=n(118),i=n(119),s=n(120),a=n(121),u=r(a);u.Axios=s,u.create=function(e){return r(o.merge(a,e))},u.Cancel=n(138),u.CancelToken=n(139),u.isCancel=n(135),u.all=function(e){return Promise.all(e)},u.spread=n(140),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";function r(e){return"[object Array]"===x.call(e)}function o(e){return"[object ArrayBuffer]"===x.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function s(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function a(e){return"string"==typeof e}function u(e){return"number"==typeof e}function l(e){return"undefined"==typeof e}function c(e){return null!==e&&"object"==typeof e}function d(e){return"[object Date]"===x.call(e)}function f(e){return"[object File]"===x.call(e)}function p(e){return"[object Blob]"===x.call(e)}function h(e){return"[object Function]"===x.call(e)}function m(e){return c(e)&&h(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)b(arguments[n],e);return t}function w(e,t,n){return b(t,function(t,r){n&&"function"==typeof t?e[r]=E(t,n):e[r]=t}),e}var E=n(119),x=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:o,isFormData:i,isArrayBufferView:s,isString:a,isNumber:u,isObject:c,isUndefined:l,isDate:d,isFile:f,isBlob:p,isFunction:h,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:g,forEach:b,merge:_,extend:w,trim:y}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var o=n(121),i=n(118),s=n(132),a=n(133),u=n(136),l=n(137);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=l(e.baseURL,e.url));var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(123):"undefined"!=typeof t&&(e=n(123)),e}var i=n(118),s=n(122),a=/^\)\]\}',?\n/,u={"Content-Type":"application/x-www-form-urlencoded"},l={adapter:o(),transformRequest:[function(e,t){return s(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){l.headers[e]={}}),i.forEach(["post","put","patch"],function(e){l.headers[e]=i.merge(u)}),e.exports=l}).call(t,n(97))},function(e,t,n){"use strict";var r=n(118);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){(function(t){"use strict";var r=n(118),o=n(124),i=n(127),s=n(128),a=n(129),u=n(125),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(130);e.exports=function(e){return new Promise(function(c,d){var f=e.data,p=e.headers;r.isFormData(f)&&delete p["Content-Type"];var h=new XMLHttpRequest,m="onreadystatechange",v=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||a(e.url)||(h=new window.XDomainRequest,m="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var y=e.auth.username||"",g=e.auth.password||"";p.Authorization="Basic "+l(y+":"+g)}if(h.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[m]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in h?s(h.getAllResponseHeaders()):null,n=e.responseType&&"text"!==e.responseType?h.response:h.responseText,r={data:n,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:t,config:e,request:h};o(c,d,r),h=null}},h.onerror=function(){d(u("Network Error",e)),h=null},h.ontimeout=function(){d(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(131),_=(e.withCredentials||a(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;_&&(p[e.xsrfHeaderName]=_)}if("setRequestHeader"in h&&r.forEach(p,function(e,t){"undefined"==typeof f&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),d(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(97))},function(e,t,n){"use strict";var r=n(125);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";var r=n(126);e.exports=function(e,t,n,o){var i=new Error(e);return r(i,t,n,o)}},function(e,t){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(118);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var s=[];o.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))}))}),i=s.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(118);e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}},function(e,t,n){"use strict";var r=n(118);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,i=String(e),s="",a=0,u=o;i.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&t>>8-a%1*8)){if(r=i.charCodeAt(a+=.75),r>255)throw new n;t=t<<8|r}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){"use strict";var r=n(118);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(118);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(118),i=n(134),s=n(135),a=n(121);e.exports=function(e){r(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||a.adapter;return t(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(118);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(138);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r(function(t){e=t});return{token:t,cancel:e}},e.exports=r},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,o="/"===s.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===s(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),s=Math.min(o.length,i.length),a=s,u=0;u<s;u++)if(o[u]!==i[u]){a=u;break}for(var l=[],u=a;u<o.length;u++)l.push("..");return l=l.concat(i.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(97))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){void 0===e.visible||e.visible||v.BuildingAction.command(new y.SetValueCommand(e,"visible",!0));for(var t=0;t<e.children.length;t++)o(e.children[t])}Object.defineProperty(t,"__esModule",{value:!0}),t.objectTab=t.layerTab=t.infoBuildingInit=t.infoInit=void 0;
var i=n(143),s=r(i),a=n(88),u=n(144),l=r(u),c=n(150),d=r(c),f=n(159),p=r(f),h=n(160),m=r(h),v=n(161),y=n(151),g={LAYER:"图层",OBJECT:"物体",MATERIAL:"材质"};n(162);var b=a.DomUtil.getById("info-pan"),_=new s.default(b),w=new l.default,E=new d.default;E.signal.on("update",function(e){console.log(e),v.BuildingAction.command(e)}),E.signal.on("remove",function(e){v.BuildingAction.remove(e)}),w.signal.on("clear",function(e){for(var t=e.object;t.children[0];)v.BuildingAction.remove(new y.RemoveObjectCommand(t.children[0]))}),w.signal.on("visibleall",function(e){o(e.object)});var x=new p.default;_.addChild(w).addChild(E).addChild(x);var C=new m.default;E.addChild(C);var S=a.DomUtil.create("div","info-tab",_.element),O=a.DomUtil.create("span","tab-item",S),k=a.DomUtil.create("span","tab-item",S),T=a.DomUtil.create("span","tab-item",S);O.innerHTML=g.LAYER,k.innerHTML=g.OBJECT,T.innerHTML=g.MATERIAL;var A=function(e){D(e.target.textContent)};a.DomEvent.on(O,"click",A),a.DomEvent.on(k,"click",A),a.DomEvent.on(T,"click",A),a.DomUtil.appendChild(_.element,[w.element,E.element,x.element]);var D=function(e){switch(a.DomUtil.removeClass(O,"selected"),a.DomUtil.removeClass(k,"selected"),a.DomUtil.removeClass(T,"selected"),a.DomUtil.setStyle(w.element,"display","none"),a.DomUtil.setStyle(E.element,"display","none"),a.DomUtil.setStyle(x.element,"display","none"),e){case g.LAYER:a.DomUtil.addClass(O,"selected"),a.DomUtil.setStyle(w.element,"display","block");break;case g.OBJECT:a.DomUtil.addClass(k,"selected"),a.DomUtil.setStyle(E.element,"display","block");break;case g.MATERIAL:a.DomUtil.addClass(T,"selected"),a.DomUtil.setStyle(x.element,"display","block")}};D(g.LAYER),t.infoInit=_,t.infoBuildingInit=C,t.layerTab=w,t.objectTab=E},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=o(i),a=n(4),u=o(a),l=n(88),c=n(23),d=r(c),f={ON:"ON",OFF:"OFF"},p=function(){function e(t,n,r){(0,s.default)(this,e),this.element=t,this.children=[],this._intersectObjects=r||[],this._raycaster=new d.Raycaster,this.turnONStatus(),n&&this.resetWorld(n)}return(0,u.default)(e,[{key:"turnONStatus",value:function(){return this.infoStatus=f.ON,this}},{key:"turnOFFStatus",value:function(){return this.infoStatus=f.OFF,this}},{key:"addChild",value:function(e){return this.children.push(e),this}},{key:"removeChild",value:function(e){return l.Util.removeByValue(this.children,e),this}},{key:"resetWorld",value:function(e){this._world=e;var t=this._world.renderer.domElement,n=this._raycaster,r=this._world.camera,o=function(e){if(this.infoStatus!==f.OFF){console.log("IN select mode");var o=new d.Vector2(0,0),i=l.DomUtil.getMousePosition(t,e);o.x=i.left/t.width*2-1,o.y=2*-(i.top/t.height)+1,n.setFromCameraHP(o,r);var s=n.intersectObjects(this._intersectObjects,!0);console.log(s),this.refresh(s)}};return l.DomEvent.on(t,"click",l.Util.bind(o,this)),this}},{key:"refresh",value:function(e){this._world&&this._world.signal.emit("SELECT",e),l.Util.forEach(this.children,function(t){t.refresh&&t.refresh(e)})}},{key:"emptyIntersectObjects",value:function(e){if(l.Util.emptyArray(this._intersectObjects),e)for(var t=0;t<e.length;t++)this.addIntersectObject(e[t]);return this}},{key:"addIntersectObject",value:function(e){return this._intersectObjects.push(e),this}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88),l=n(145),c=u.DomUtil.UI,d=function(){function e(t){(0,i.default)(this,e),this.signal=new u.EventEmitter,this.element=u.DomUtil.createElement("div","info-layer","this is layer"),t&&this.setLayers(t)}return(0,a.default)(e,[{key:"setLayers",value:function(e){u.DomUtil.empty(this.element);for(var t=(new c.Panel).setClass("layer-pan"),n=e.getLayers(),r=[],o=this.signal,i=0;i<n.length;i++){var s=n[i];if(s.name){var a=(new c.Row).setClass("layer-item");r.push(a),a.add(new c.Text(s.name).setWidth("90px"));var d=(new c.Span).setClass("iconfont icon-trash").setStyle("float",["right"]),f=(new c.Span).setClass("iconfont icon-eye").setStyle("float",["right"]),p=(new c.Span).setClass("iconfont icon-bulb").setStyle("float",["right"]);a.add(d,p,f),t.add(a);var h=function(e,t){return function(){return e.clearable?(l.confirmModal.show({content:"确认清除此图层？(删除后不可复原！)",callback:function(t){t&&o.emit("clear",e)}}),void u.DomEvent.stop()):(alert("不可清除！"),!1)}}(s,d),m=function(e,t){return function(){e.toggleVisible()?u.DomUtil.removeClass(t.dom,"unselected"):u.DomUtil.addClass(t.dom,"unselected"),o.emit("toogleVisible",e),u.DomEvent.stop()}}(s,f),v=function(e,t){return function(){o.emit("visibleall",e),u.DomEvent.stop()}}(s,p),y=function(t,n){return function(){t.selectable&&(u.Util.forEach(r,function(e){u.DomUtil.removeClass(e.dom,"selected")}),e.setSelectedLayer(t),u.DomUtil.addClass(n.dom,"selected"),o.emit("selectLayer",e.getSelectedLayer()))}}(s,a);d.onClick(h),p.onClick(v),f.onClick(m),a.onClick(y)}}u.DomUtil.appendChild(this.element,t.dom)}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confirmModal=void 0;var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88);n(146);var l=u.DomUtil.UI,c=function(){function e(){(0,i.default)(this,e),this.modal=new l.Modal,this.modal.setPosition("fixed").setClass("modal"),this.modal.container.setWidth("300px"),u.DomUtil.appendChild(document.body,this.modal.dom),this.confirm=(new l.Div).setClass("confirm-modal"),this.confirmHeader=(new l.Div).setClass("confirm-header"),this.confirmBody=(new l.Div).setClass("confirm-body"),this.confirmFooter=(new l.Div).setClass("confirm-footer"),this.headerText=new u.DomUtil.create("h2","header",this.confirmHeader.dom),this.bodyText=new u.DomUtil.create("p","body",this.confirmBody.dom);var t=this,n=new l.Button("取消").setClass("button-cancel").onClick(function(){t.confirmFn(!1)}),r=new l.Button("确认").setClass("button-confirm").onClick(function(){t.confirmFn(!0)});this.confirmFooter.add(n,r)}return(0,a.default)(e,[{key:"show",value:function(e){this.confirm.clear(),e.header&&(this.headerText.innerHTML=e.header,this.confirm.add(this.confirmHeader)),e.content&&(this.bodyText.innerHTML=e.content,this.confirm.add(this.confirmBody)),this.confirm.add(this.confirmFooter),this.confirmFn=e.callback||u.Util.falseFn,this.modal.show(this.confirm)}}]),e}(),d=new c;t.confirmModal=d},function(e,t,n){var r=n(147);"string"==typeof r&&(r=[[e.id,r,""]]);n(149)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(148)(),t.push([e.id,".confirm-body{margin-bottom:20px}.confirm-footer{overflow:hidden}.button-cancel,.button-confirm{float:right;font-size:15px;color:#444;margin-left:10px;cursor:pointer}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(l(r.parts[i],t))}else{for(var s=[],i=0;i<r.parts.length;i++)s.push(l(r.parts[i],t));p[r.id]={id:r.id,refs:1,parts:s}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],s=o[1],a=o[2],u=o[3],l={css:s,media:a,sourceMap:u};n[i]?n[i].parts.push(l):t.push(n[i]={id:i,parts:[l]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function l(e,t){var n,r,o;if(t.singleton){var i=g++;n=y||(y=a(t)),r=c.bind(null,n,i,!1),o=c.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=f.bind(null,n),o=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=d.bind(null,n),o=function(){s(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function c(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,g=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],s=0;s<n.length;s++){var a=n[s],u=p[a.id];u.refs--,i.push(u)}if(e){var l=o(e);r(l,t)}for(var s=0;s<i.length;s++){var u=i[s];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete p[u.id]}}}};var _=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=o(i),a=n(4),u=o(a),l=n(88),c=n(23),d=r(c),f=n(145),p=n(151),h=l.DomUtil.UI,m={NAME:"名字",POSITION:"位置",ROTATION:"旋转",SCALE:"比例",VISIBLE:"可见",DEL:"删除",CONFIRM_DEL_OBJ:"确认删除此物体?"},v=function(){function e(){(0,s.default)(this,e),this.element=l.DomUtil.createElement("div","info-object"),this.children=[],this.commonEle=this._initDom(),this.signal=new l.EventEmitter;var t=this;this.signal.on("updateUI",function(){t.updateUI(t.selectedObject)}),this.signal.on("refresh",function(e){t.refresh(e)})}return(0,u.default)(e,[{key:"addChild",value:function(e){return e.containerEle=this.element,e.fatherComponent=this,this.children.push(e),this}},{key:"removeChild",value:function(e){return e.containerEle=null,e.fatherComponent=null,l.Util.removeByValue(this.children,e),this}},{key:"_initDom",value:function(){function e(){var e=C.selectedObject;if(null!=e){var t=new d.Vector3(a.getValue(),u.getValue(),c.getValue());e.position.distanceTo(t)>=.01&&C.signal.emit("update",new p.SetPositionCommand(e,t));var n=new d.Euler(y.getValue()*d.Math.DEG2RAD,g.getValue()*d.Math.DEG2RAD,b.getValue()*d.Math.DEG2RAD);e.rotation.toVector3().distanceTo(n.toVector3())>=.01&&C.signal.emit("update",new p.SetRotationCommand(e,n));var r=new d.Vector3(w.getValue(),w.getValue(),w.getValue());e.scale.distanceTo(r)>=.01&&C.signal.emit("update",new p.SetScaleCommand(e,r)),e.visible!==x.getValue()&&C.signal.emit("update",new p.SetValueCommand(e,"visible",x.getValue()))}}function t(){f.confirmModal.show({content:m.CONFIRM_DEL_OBJ,callback:function(e){C.selectedObject&&e&&C.signal.emit("remove",new p.RemoveObjectCommand(C.selectedObject,C.signal))}})}var n=(new h.Panel).setClass("info-commonObject"),r=new h.Row,o=new h.Text;r.add(new h.Text(m.NAME).setWidth("90px")),r.add(o);var i=new h.Button(m.DEL).setClass("btn btn-danger").setPosition("absolute").setRight("10px").onClick(t);r.add(i),n.add(r);var s=new h.Row,a=(new h.Number).setWidth("50px").onChange(e),u=(new h.Number).setWidth("50px").onChange(e),c=(new h.Number).setWidth("50px").onChange(e);s.add(new h.Text(m.POSITION).setWidth("90px")),s.add(a,u,c),n.add(s);var v=new h.Row,y=(new h.Number).setStep(10).setUnit("°").setWidth("50px").onChange(e),g=(new h.Number).setStep(10).setUnit("°").setWidth("50px").onChange(e),b=(new h.Number).setStep(10).setUnit("°").setWidth("50px").onChange(e);v.add(new h.Text(m.ROTATION).setWidth("90px")),v.add(y,g,b),n.add(v);var _=new h.Row,w=new h.Number(1).setRange(.01,1/0).setWidth("50px").onChange(e);_.add(new h.Text(m.SCALE).setWidth("90px")),_.add(w),n.add(_);var E=new h.Row,x=(new h.Checkbox).onChange(e);E.add(new h.Text(m.VISIBLE).setWidth("90px")),E.add(x),n.add(E);var C=this;return this.updateUI=function(e){e&&(l.Util.log("updateUI in InfoObject.component.js"),o.setValue(e.userData.name||e.name||e.type),a.setValue(e.position.x),u.setValue(e.position.y),c.setValue(e.position.z),y.setValue(e.rotation.x*d.Math.RAD2DEG),g.setValue(e.rotation.y*d.Math.RAD2DEG),b.setValue(e.rotation.z*d.Math.RAD2DEG),w.setValue(e.scale.x),x.setValue(e.visible))},n.dom}},{key:"refresh",value:function(e){var t=e[0];t||(l.DomUtil.empty(this.element),this.selectedObject=null),t&&t.object!==this.selectedObject&&(this.selectedObject=t.object,this.updateUI(this.selectedObject),l.DomUtil.appendChild(this.element,this.commonEle)),l.Util.forEach(this.children,function(t){t.execute(e)})}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SetBuildingHeightCommand=t.RemoveObjectCommand=t.SetValueCommand=t.SetRotationCommand=t.SetScaleCommand=t.SetPositionCommand=void 0;var o=n(152),i=r(o),s=n(154),a=r(s),u=n(155),l=r(u),c=n(156),d=r(c),f=n(157),p=r(f),h=n(158),m=r(h);t.SetPositionCommand=i.default,t.SetScaleCommand=a.default,t.SetRotationCommand=l.default,t.SetValueCommand=d.default,t.RemoveObjectCommand=p.default,t.SetBuildingHeightCommand=m.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(26),l=r(u),c=n(80),d=r(c),f=n(153),p=r(f),h=function(e){function t(e,n){(0,i.default)(this,t);var r=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"setPosition"));return r.object=e,void 0!==e&&void 0!==n&&(r.newPosition=n,r.oldPosition=r.object.position),r}return(0,d.default)(t,e),(0,a.default)(t,[{key:"execute",value:function(){this.object&&(this.object.position.copy(this.newPosition),this.object.updateMatrixWorld(!0))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=function e(t){(0,i.default)(this,e),this.name=t};t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(26),l=r(u),c=n(80),d=r(c),f=n(153),p=r(f),h=function(e){function t(e,n){(0,i.default)(this,t);var r=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"setScale"));return r.object=e,void 0!==e&&void 0!==n&&(r.oldScale=e.scale,r.newScale=n),r}return(0,d.default)(t,e),(0,a.default)(t,[{key:"execute",value:function(){this.object&&(this.object.scale.copy(this.newScale),this.object.updateMatrixWorld(!0))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(26),l=r(u),c=n(80),d=r(c),f=n(153),p=r(f),h=function(e){function t(e,n){(0,i.default)(this,t);var r=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"set rotation"));return r.object=e,void 0!==r.object&&void 0!==n&&(r.oldRotation=r.object.rotation,r.newRotation=n),r}return(0,d.default)(t,e),(0,a.default)(t,[{key:"execute",value:function(){this.object.rotation.copy(this.newRotation),this.object.updateMatrixWorld(!0)}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(26),l=r(u),c=n(80),d=r(c),f=n(153),p=r(f),h=function(e){function t(e,n,r){(0,i.default)(this,t);var o=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"set value"+n));return o.object=e,void 0!==o.object&&void 0!==n&&void 0!==r&&(o.attributeName=n,o.oldValue=o.object[n],o.newValue=r),o}return(0,d.default)(t,e),(0,a.default)(t,[{key:"execute",value:function(){this.object[this.attributeName]=this.newValue}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(26),l=r(u),c=n(80),d=r(c),f=n(153),p=r(f),h=function(e){function t(e,n){(0,i.default)(this,t);var r=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"remove object"));return r.parent=e.parent,r.object=e,r.signal=n,r}return(0,d.default)(t,e),(0,a.default)(t,[{key:"execute",value:function(){this.parent.remove(this.object),this.signal&&this.signal.emit("refresh",[])}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(26),l=r(u),c=n(80),d=r(c),f=n(153),p=r(f),h=n(113),m=function(e){function t(e,n,r,o){(0,i.default)(this,t);var s=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"set building height"));return e&&n&&r&&(s.object=e,s.oldFloorNum=e.userData.floorNum,s.oldFloorHeight=e.userData.floorHeight,s.newFloorNum=n,s.newFloorHeight=r,s.signal=o),s}return(0,d.default)(t,e),(0,a.default)(t,[{key:"execute",value:function(){(0,h.modifyBuildingHeight)(this.object,this.newFloorHeight,this.newFloorNum),this.signal&&this.signal.emit("updateUI")}}]),t}(p.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88),l=(u.DomUtil.UI,function(){function e(){(0,i.default)(this,e),this.element=u.DomUtil.createElement("div","info-material","this is material"),this.children=[]}return(0,a.default)(e,[{key:"addChild",value:function(e){return e.containerEle=this.element,this.children.push(e),this}},{key:"removeChild",value:function(e){return e.containerEle=null,u.Util.removeByValue(this.children,e),this}},{key:"refresh",value:function(e){u.Util.forEach(this.children,function(t){t.execute(e)})}}]),e}());t.default=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=o(i),a=n(4),u=o(a),l=n(88),c=n(23),d=r(c),f=n(151),p=l.DomUtil.UI,h={FLOORHEIGHT:"层高",FLOORNUM:"层数"},m=function(){function e(t){(0,s.default)(this,e),this._intersectNames=t||{},this.element=l.DomUtil.createElement("div","info-building"),this._initDom()}return(0,u.default)(e,[{key:"_initDom",value:function(){function e(){var e=i.selectedObject;if(null!=e){var t=n.getValue(),r=o.getValue();(Math.abs(e.userData.floorHeight-t)>=.01||Math.abs(e.userData.floorNum-r))&&i.fatherComponent&&i.fatherComponent.signal.emit("update",new f.SetBuildingHeightCommand(e,r,t,i.fatherComponent.signal))}}var t=new p.Row,n=(new p.Number).setStep(10).setUnit("m").setWidth("50px").onChange(e);n.min=.1,t.add(new p.Text(h.FLOORHEIGHT).setWidth("90px")),t.add(n),l.DomUtil.appendChild(this.element,t.dom);var r=new p.Row,o=new p.Integer(1).setWidth("100px").onChange(e);o.min=1,r.add(new p.Text(h.FLOORNUM).setWidth("90px")),r.add(o),l.DomUtil.appendChild(this.element,r.dom);var i=this;this.updateUI=function(e){l.Util.log("updateUI in infoObject.building.component"),n.setValue(e.userData.floorHeight||10),o.setValue(e.userData.floorNum||1)}}},{key:"setIntersectNames",value:function(e){return this._intersectNames=e,this}},{key:"execute",value:function(e){var t=e[0];this.unoutlineBuilding(),t&&this._intersectNames[t.object.name]&&(this.selectedObject=t.object,this.updateUI(this.selectedObject),this.outlineBuilding(this.selectedObject),l.DomUtil.appendChild(this.containerEle,this.element))}},{key:"unoutlineBuilding",value:function(){this.selectedObject&&(l.Util.emptyArray(this.selectedObject.children),this.selectedObject=null)}},{key:"outlineBuilding",value:function(e){var t=new d.MeshBasicMaterial({color:65280,side:d.BackSide}),n=new d.Mesh(e.geometry,t);n.name="building-outline",n.scale.multiplyScalar(1.05),e.add(n)}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BuildingAction=void 0;var o=n(111),i=r(o),s=n(112),a={add:function(e){i.default.handleViewAction({actionType:s.BUILDING_CONSTS.ADD,message:e})},remove:function(e){i.default.handleViewAction({actionType:s.BUILDING_CONSTS.REMOVE,message:e})},modify:function(e){i.default.handleViewAction({actionType:s.BUILDING_CONSTS.MODIFY,message:e})},command:function(e){i.default.handleViewAction({actionType:s.BUILDING_CONSTS.COMMAND,message:e})},removeAll:function(){i.default.handleViewAction({actionType:s.BUILDING_CONSTS.REMOVEALL,message:""})}};t.BuildingAction=a},function(e,t,n){var r=n(163);"string"==typeof r&&(r=[[e.id,r,""]]);n(149)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(148)(),t.push([e.id,".info-tab{background-color:#ddd;border-top:1px solid #ccc;font-size:16px}.tab-item{padding:10px;display:inline-block;cursor:pointer;color:#aaa;border-right:1px solid #ccc}.tab-item.selected{color:#888;background-color:#eee}.info-object{padding:10px;font-size:15px}.info-layer{padding:20px 10px}.layer-pan{color:#444;background:#fff;padding:0;width:100%;height:300px;font-size:12px;cursor:default;overflow:auto;outline:none}.layer-item{padding:10px 4px;font-size:15px;font-weight:700}.layer-item .iconfont{font-weight:400;color:#444;margin-right:5px;cursor:pointer;font-size:16px}.layer-item .iconfont.icon-eye{color:#ee9e23}.layer-item .iconfont.icon-eye.unselected{color:#444}.layer-item .iconfont.icon-bulb:hover,.layer-item .iconfont.icon-trash:hover{font-size:20px;color:#e43535}.layer-item:before{content:'\\25A0';font-size:10px;font-weight:100;color:#727bab;margin-right:4px}.layer-item.selected{background-color:#ddd}input.Number{color:#0080f0!important;font-size:12px;border:0;padding:2px;cursor:col-resize}.Row{min-height:20px;margin-bottom:10px}.btn.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a;border-style:solid;border-radius:4px;cursor:pointer}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawPanInit=void 0;var o=n(165),i=r(o),s=n(167),a=r(s),u=n(168),l=r(u),c=n(169),d=r(c),f=n(170),p=r(f),h=n(171),m=r(h),v=n(172),y=r(v),g=n(173),b=r(g),_=n(174),w=r(_),E=n(88),x=n(161);n(175);var C=new i.default;new E.Draggable(C.element),C.addChild(a.default.defaultInit).addChild(b.default.defaultInit).addChild(l.default.defaultInit).addChild(d.default.defaultInit).addChild(w.default.defaultInit).addChild(m.default.defaultInit).addChild(y.default.defaultInit).addChild(p.default.defaultInit),d.default.defaultInit.setAfterDrawFunction(function(e){x.BuildingAction.add(e)}),t.drawPanInit=C},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e._setStartPoint){var t=new y.Mesh,n=s(e),r=new y.Geometry;m.Util.forEach(n,function(e){r.vertices.push(new y.Vector3(e.x,e.y,0))});var o=new y.Points(r,new y.PointsMaterial({color:65280,size:5}));if(o.name="featurePoints",t.add(o),e.curves.length>0){var i=e.createPointsGeometry(),a=new y.Line(i,new y.LineBasicMaterial({color:16711680,linewidth:10}));a.name="featureLine",t.add(a)}return t}return null}function s(e){var t=[];return 0===e.curves.length?(t.push(e.currentPoint),t):(m.Util.forEach(e.curves,function(e,n){e instanceof y.LineCurve&&(0!==n&&e.v1.equals(t[t.length-1])||t.push(e.v1),t.push(e.v2)),e instanceof y.SplineCurve&&(0!==n&&e.points[0].equals(t[t.length-1])||t.push(e.points[0]),m.Util.forEach(e.points,function(e,n){0!==n&&t.push(e)}))}),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.DRAWSIGNAL=t.DRAWMODE=void 0;var a=n(3),u=o(a),l=n(4),c=o(l),d=n(26),f=o(d),p=n(80),h=o(p),m=n(88),v=n(23),y=r(v),g=n(166),b=o(g),_=t.DRAWMODE={OFF:0,LINE:"L",CLOSE:"C",BACK:"BACK",EXIT:"E",EXTRUDE:"EXTRUDE",CLEAR:"CLEAR",SPLINE:"SPLINE",SELECT:"SELECT"},w=t.DRAWSIGNAL={WILLDRAW:"WILLDRAW",DRAWDONE:"DRAWDONE"},E=function(e){function t(e,n,r){(0,u.default)(this,t);var o=(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,m.DomUtil.createElement("div","draw-pan")));return o._intersectObjects=e||[],o.intersectNames=n,o._raycaster=new y.Raycaster,o.children={},o.reset(),r&&o.resetWorld(r),o}return(0,h.default)(t,e),(0,c.default)(t,[{key:"addChild",value:function(e){return e.fatherPan=this,this.children[e.drawMode]=e,m.DomUtil.appendChild(this.element,e.element),this}},{key:"removeChild",value:function(e){return m.DomUtil.remove(e.element),e.fatherPan=null,delete this.children[e.drawMode],this}},{key:"removeAllChild",value:function(){}},{key:"removeDrawMesh",value:function(){this._drawMesh&&(this.drawMeshGroup.remove(this._drawMesh),this.drawMesh=null)}},{key:"getDrawGroup",value:function(){return this.drawMeshGroup}},{key:"resetWorld",value:function(e){this._world=e,this.drawMeshGroup=new y.Group,this.drawMeshGroup.name="drawpan_mesh",this._world.scene.add(this.drawMeshGroup);var t=this._world.renderer.domElement,n=this._raycaster,r=this._world.camera;this.backOperation=[];var o=function(e){if(this.drawMode!==_.OFF){this._world.signal.emit(w.WILLDRAW),console.log("IN draw mode");var o=new y.Vector2(0,0),i=m.DomUtil.getMousePosition(t,e);o.x=i.left/t.width*2-1,o.y=2*-(i.top/t.height)+1,n.setFromCameraHP(o,r);var s=n.intersectObjects(this._intersectObjects,!0);this.children[this.drawMode].draw(s)}};return m.DomEvent.on(t,"click",m.Util.bind(o,this)),this}},{key:"resetIntersectObjects",value:function(e){return this._intersectObjects=e,this}},{key:"updateDrawMesh",value:function(){this._drawMesh&&this.drawMeshGroup.remove(this._drawMesh),this._drawMesh=i(this.drawShape),console.log(this._drawMesh),this._drawMesh&&(this._drawMesh.translateZ(.5),this._drawMesh.name="draw-line",this.drawMeshGroup.add(this._drawMesh))}},{key:"setStartPoint",value:function(e){return!!this.drawShape._setStartPoint||(this.drawShape.moveTo(e.x,e.y),this.drawShape._setStartPoint=!0,!1)}},{key:"reset",value:function(){this.drawShape=new y.Shape,this.drawShape._setStartPoint=!1,this._drawMesh=null,this.backOperation=this.backOperation||[],m.Util.emptyArray(this.backOperation),this.turnOffDrawMode()}},{key:"turnOffDrawMode",value:function(){this.drawMode=_.OFF,this._world&&this._world.signal.emit(w.DRAWDONE)}},{key:"addTo",value:function(e){m.DomUtil.appendChild(e,this.element)}}]),t}(b.default);t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88),l=function(){function e(t){(0,i.default)(this,e),this.element=t}return(0,a.default)(e,[{key:"addChild",value:function(e){u.DomUtil.appendElement(this.element,e)}},{key:"removeChild",value:function(e){u.DomUtil.remove(e)}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88),l=n(165),c=function(){function e(t,n){(0,i.default)(this,e),this.element=t,this.fatherPan=null,this.intersectNames=n,this.drawMode=l.DRAWMODE.LINE;var r=function(e){this.fatherPan&&(console.log("click"),this.fatherPan.drawMode=this.drawMode),u.DomEvent.stop(e)};u.DomEvent.on(this.element,"click",u.Util.bind(r,this))}return(0,a.default)(e,[{key:"draw",value:function(e){var t=this.intersectNames||this.fatherPan.intersectNames,n=e[0];if(n&&t[n.object.name]){var r=n.point;if(this.fatherPan.setStartPoint(r)){var o=new THREE.Vector2;o.copy(this.fatherPan.drawShape.currentPoint);var i=new THREE.Vector2(r.x,r.y);this.fatherPan.drawShape.lineTo(i.x,i.y),this.fatherPan.updateDrawMesh(),this.putBackOperation(o)}else this.fatherPan.updateDrawMesh(),this.putBackOperation()}}},{key:"putBackOperation",value:function(e){this.fatherPan.backOperation&&this.fatherPan.backOperation.push({obj:this,opts:e})}},{key:"backDraw",value:function(e){e?(this.fatherPan.drawShape.moveTo(e.x,e.y),this.fatherPan.drawShape.curves.pop()):this.fatherPan.drawShape._setStartPoint=!1,this.fatherPan.updateDrawMesh()}},{key:"setIntersectNamaes",value:function(e){this.intersectNames=e}}]),e}();t.default=c;var d=u.DomUtil.createElement("div","line","<span>线</span>");c.defaultInit=new c(d,{land:!0})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88),l=n(165),c=n(103),d=function(){function e(t){(0,i.default)(this,e),this.element=t,this.fatherPan=null,this.drawMode=l.DRAWMODE.CLOSE;var n=function(e){if(this.fatherPan){var t=new THREE.Vector2;t.copy(this.fatherPan.drawShape.currentPoint);var n=this.fatherPan.drawShape.curves;n.length>0?1===n.length&&n[0]instanceof THREE.LineCurve?c.message.error("a line can't close"):(this.fatherPan.drawMode=l.DRAWMODE.OFF,this.fatherPan.drawShape.closePath(),this.fatherPan.updateDrawMesh(),this.putBackOperation(t)):c.message.error("no curve to close")}u.DomEvent.stop(e)};u.DomEvent.on(this.element,"click",u.Util.bind(n,this))}return(0,a.default)(e,[{key:"putBackOperation",value:function(e){this.fatherPan.backOperation&&this.fatherPan.backOperation.push({obj:this,opts:e})}},{key:"backDraw",value:function(e){this.fatherPan.drawShape.moveTo(e.x,e.y),this.fatherPan.drawShape.curves.pop(),this.fatherPan.updateDrawMesh()}}]),e}();t.default=d;var f=u.DomUtil.createElement("div","close","<span>闭合</span>");d.defaultInit=new d(f)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=o(i),a=n(4),u=o(a),l=n(88),c=n(165),d=n(23),f=r(d),p=n(103),h=n(113),m=function(){function e(t){(0,s.default)(this,e),this.element=t,this.fatherPan=null,this.drawMode=c.DRAWMODE.EXTRUDE;var n=function(e){if(this.fatherPan){var t=this.fatherPan.drawShape.curves;if(t.length>0)if(1===t.length&&t[0]instanceof f.LineCurve)p.message.error("a line can't build");else{var n=this.draw();this.fatherPan.removeDrawMesh(),this.fatherPan.reset(),this._afterDraw&&this._afterDraw(n)}else p.message.error("no curve to build")}l.DomEvent.stop(e)};l.DomEvent.on(this.element,"click",l.Util.bind(n,this));
}return(0,u.default)(e,[{key:"draw",value:function(){var e=this.fatherPan.drawShape;console.log(e);var t=(0,h.createBuilding)(e);return console.log(this.fatherPan._world.scene),t}},{key:"setAfterDrawFunction",value:function(e){this._afterDraw=e}}]),e}();t.default=m;var v=l.DomUtil.createElement("div","extrude","<span>建楼</span>");m.defaultInit=new m(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(88),a=n(165),u=function e(t){(0,i.default)(this,e),this.element=t,this.fatherPan=null,this.drawMode=a.DRAWMODE.EXIT;var n=function(e){this.fatherPan&&this.fatherPan.reset(),s.DomEvent.stop(e)};s.DomEvent.on(this.element,"click",s.Util.bind(n,this))};t.default=u;var l=s.DomUtil.createElement("div","exit","<span>退出</span>");u.defaultInit=new u(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(88),a=n(165),u=function e(t){(0,i.default)(this,e),this.element=t,this.fatherPan=null,this.drawMode=a.DRAWMODE.BACK;var n=function(e){if(this.fatherPan){var t=this.fatherPan.backOperation.pop();t?t.obj.backDraw(t.opts):alert("has no operation to back")}s.DomEvent.stop(e)};s.DomEvent.on(this.element,"click",s.Util.bind(n,this))};t.default=u;var l=s.DomUtil.createElement("div","back","<span>回退</span>");u.defaultInit=new u(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(165),a=n(88),u=function e(t){(0,i.default)(this,e),this.fatherPan=null,this.element=t,this.drawMode=s.DRAWMODE.CLEAR;var n=function(e){this.fatherPan&&(a.Util.emptyArray(this.fatherPan.backOperation),a.Util.emptyArray(this.fatherPan.drawShape.curves),this.fatherPan.drawShape._setStartPoint=!1,this.fatherPan.updateDrawMesh()),a.DomEvent.stop(e)};a.DomEvent.on(this.element,"click",a.Util.bind(n,this))};t.default=u;var l=a.DomUtil.createElement("div","clear","<span>清除</span>");u.defaultInit=new u(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(4),a=r(s),u=n(165),l=n(88),c=function(){function e(t,n){(0,i.default)(this,e),this.element=t,this.fatherPan=null,this.drawMode=u.DRAWMODE.SPLINE,this.intersectNames=n;var r=function(e){this.fatherPan&&(this.fatherPan.drawMode=this.drawMode),l.DomEvent.stop(e)};l.DomEvent.on(this.element,"click",l.Util.bind(r,this))}return(0,a.default)(e,[{key:"draw",value:function(e){var t=this.intersectNames||this.fatherPan.intersectNames,n=e[0];if(n&&t[n.object.name]){var r=n.point;if(this.fatherPan.setStartPoint(r)){var o=new THREE.Vector2;o.copy(this.fatherPan.drawShape.currentPoint);var i=new THREE.Vector2(r.x,r.y),s=this.fatherPan.drawShape.curves;s[s.length-1]instanceof THREE.SplineCurve?(s[s.length-1].points.push(i),this.fatherPan.drawShape.moveTo(i.x,i.y)):this.fatherPan.drawShape.splineThru([i]),this.fatherPan.updateDrawMesh(),this.putBackOperation(o)}else this.fatherPan.updateDrawMesh(),this.putBackOperation()}}},{key:"putBackOperation",value:function(e){this.fatherPan.backOperation&&this.fatherPan.backOperation.push({obj:this,opts:e})}},{key:"backDraw",value:function(e){if(e){var t=this.fatherPan.drawShape.curves,n=t[t.length-1];this.fatherPan.drawShape.moveTo(e.x,e.y),n.points.pop(),1===n.points.length&&t.pop()}else this.fatherPan.drawShape._setStartPoint=!1;this.fatherPan.updateDrawMesh()}},{key:"setIntersectNamaes",value:function(e){this.intersectNames=e}}]),e}();t.default=c;var d=l.DomUtil.createElement("div","spline","<span>样条</span>");c.defaultInit=new c(d,{land:!0})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(88),a=n(165),u=function e(t){(0,i.default)(this,e),this.element=t,this.drawMode=a.DRAWMODE.SELECT,this.fatherPan=null;var n=function(e){this.fatherPan&&this.fatherPan.turnOffDrawMode(),s.DomEvent.stop(e)};s.DomEvent.on(this.element,"click",s.Util.bind(n,this))};t.default=u;var l=s.DomUtil.createElement("div","select","<span>选择</span>");u.defaultInit=new u(l)},function(e,t,n){var r=n(176);"string"==typeof r&&(r=[[e.id,r,""]]);n(149)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(148)(),t.push([e.id,".draw-pan{position:absolute;background-color:#5285b6;padding:20px 0;color:#fff;top:50px;right:300px;font-weight:blod;font-size:20px;box-shadow:-1px 2px 3px rgba(0,0,0,.15)}.draw-pan div{text-align:center;padding:5px}.draw-pan:hover{cursor:pointer}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(178),i=r(o),s=n(180),a=r(s),u=n(88),l=n(182),c=n(110),d=document.getElementsByClassName("menu")[0];console.log(d);var f=new i.default;console.log(f),u.DomUtil.appendChild(d,f.element);var p=new a.default;u.DomUtil.appendChild(d,p.element);var h=u.DomUtil.createElement("span","menu-bar","刷新");u.DomUtil.appendChild(d,h),u.DomEvent.on(h,"click",function(){console.log("refersh click");var e=c.BuildingStore.toJson();l.socket.emit("refresh",e)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(88),a=n(179),u={FILE:"文件",IMPORT:"导入",BUILDING:"建筑",GREEN:"绿化",MODEL:"模型"},l=function e(){(0,i.default)(this,e),this.element=s.DomUtil.createElement("span","menu-bar",u.FILE),console.log(this.element);var t=s.DomUtil.create("div","menu-file",this.element),n=s.DomUtil.createElement("div","item item-text",u.IMPORT),r=new a.ImportItem(u.BUILDING,a.IMPORTTYPE.BUILDING),o=new a.ImportItem(u.GREEN,a.IMPORTTYPE.GREEN),l=new a.ImportItem(u.MODEL,a.IMPORTTYPE.MODEL);console.log(r,o,l),s.DomUtil.appendChild(t,[n,r.element,o.element,l.element])};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ImportItem=t.IMPORTTYPE=void 0;var o=n(3),i=r(o),s=n(88);t.IMPORTTYPE={BUILDING:0,GREEN:1,MODEL:2},t.ImportItem=function e(t,n){(0,i.default)(this,e),this.element=s.DomUtil.createElement("div","item",t),s.DomEvent.on(this.element,"click",function(){console.log(n)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){console.log("lighting function clicked")}function i(){console.log("form function clicked")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),a=r(s),u=n(88),l=n(181),c={ANALYSIS:"分析",LIGHTING:"光照",FORM:"小区报表"},d=function e(){(0,a.default)(this,e),this.element=u.DomUtil.createElement("div","menu-bar",c.ANALYSIS);var t=u.DomUtil.create("div","menu-file",this.element),n=new l.AnalysisItem(c.LIGHTING,l.ANALYSISTYPE.LIGHTING,o),r=new l.AnalysisItem(c.FORM,l.ANALYSISTYPE.FORM,i);u.DomUtil.appendChild(t,[n.element,r.element])};t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AnalysisItem=t.ANALYSISTYPE=void 0;var o=n(3),i=r(o),s=n(88);t.ANALYSISTYPE={LIGHTING:0,FORM:1},t.AnalysisItem=function e(t,n,r){(0,i.default)(this,e),this.element=s.DomUtil.createElement("div","item",t),s.DomEvent.on(this.element,"click",r||function(){})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.socket=void 0;var o=n(116),i=(r(o),n(183)),s=r(i),a=n(233),u=n(234),l=n(161),c=n(113);a.user.asynLogin("1249561679@qq.com","19920910wk").then(function(e){console.log(e),f()},function(e){console.log(e.message)});var d=s.default.connect(u.socketUrl);d.on("connect",function(){f()}),d.on("login",function(e){console.log("login:",e),e&&e.data&&e.data.projectData&&p(e.data.projectData)}),d.on("memberChange",function(e){console.log("memberChange",e)}),d.on("refresh",function(e){console.log(e),e&&e.data&&p(e.data)});var f=function(){var e=a.user.getUser();return!!e&&void d.emit("login",{email:e.email,unionId:e.unionId,projectId:e.joinedProjectId||"58b127ce459b74334090d5f6"})},p=function(e){console.log("reload",e),l.BuildingAction.removeAll(),console.log(e);for(var t=0;t<e.features.length;t++){var n=(0,c.jsonToBuilding)(e.features[t]);l.BuildingAction.add(n)}};t.socket=d},function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=i(e),s=r.source,c=r.id,d=r.path,f=l[c]&&d in l[c].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||f;return p?(u("ignoring socket cache for %s",s),n=a(s,t)):(l[c]||(u("new io instance for %s",s),l[c]=a(s,t)),n=l[c]),r.query&&!t.query?t.query=r.query:t&&"object"==typeof t.query&&(t.query=o(t.query)),n.socket(r.path,t)}function o(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var i=n(184),s=n(189),a=n(200),u=n(186)("socket.io-client");e.exports=t=r;var l=t.managers={};t.protocol=s.protocol,t.connect=r,t.Manager=n(200),t.Socket=n(228)},function(e,t,n){(function(t){function r(e,n){var r=e;n=n||t.location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof n?n.protocol+"//"+e:"https://"+e),i("parse %s",e),r=o(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=r.host.indexOf(":")!==-1,a=s?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}var o=n(185),i=n(186)("socket.io-client:url");e.exports=r}).call(t,function(){return this}())},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");o!=-1&&i!=-1&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=n.exec(e||""),a={},u=14;u--;)a[r[u]]=s[u]||"";return o!=-1&&i!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){(function(r){function o(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function u(){try{return t.storage.debug}catch(e){}if("undefined"!=typeof r&&"env"in r)return r.env.DEBUG}function l(){try{return window.localStorage}catch(e){}}t=e.exports=n(187),t.log=s,t.formatArgs=i,t.save=a,t.load=u,t.useColors=o,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(u())}).call(t,n(97))},function(e,t,n){function r(){return t.colors[c++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(l||n);e.diff=i,e.prev=l,e.curr=n,l=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var u=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;u++;var o=t.formatters[r];if("function"==typeof o){var i=s[u];n=o.call(e,i),s.splice(u,1),u--}return n}),s=t.formatArgs.apply(e,s);var c=o.log||t.log||console.log.bind(console);c.apply(e,s)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o,t.coerce=u,t.disable=s,t.enable=i,t.enabled=a,t.humanize=n(188),t.names=[],t.skips=[],t.formatters={};var l,c=0},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,l,"day")||i(e,u,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,l=24*u,c=365.25*l;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return n(e);if("number"===i&&isNaN(e)===!1)return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){function r(){}function o(e){var n="",r=!1;return n+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(n+=e.attachments,n+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,n+=e.nsp),null!=e.id&&(r&&(n+=",",r=!1),n+=e.id),null!=e.data&&(r&&(n+=","),n+=f.stringify(e.data)),d("encoded %j as %s",e,n),n}function i(e,t){function n(e){var n=h.deconstructPacket(e),r=o(n.packet),i=n.buffers;i.unshift(r),t(i)}h.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var n={},r=0;if(n.type=Number(e.charAt(0)),null==t.types[n.type])return c();if(t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type){for(var o="";"-"!=e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!=e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"==e.charAt(r+1))for(n.nsp="";++r;){var i=e.charAt(r);if(","==i)break;if(n.nsp+=i,r==e.length)break}else n.nsp="/";var s=e.charAt(r+1);if(""!==s&&Number(s)==s){for(n.id="";++r;){var i=e.charAt(r);if(null==i||Number(i)!=i){--r;break}if(n.id+=e.charAt(r),r==e.length)break}n.id=Number(n.id)}return e.charAt(++r)&&(n=u(n,e.substr(r))),d("decoded %s as %j",e,n),n}function u(e,t){try{e.data=f.parse(t)}catch(e){return c()}return e}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error"}}var d=n(190)("socket.io-parser"),f=n(193),p=n(196),h=n(197),m=n(199);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=r,t.Decoder=s,r.prototype.encode=function(e,n){if(d("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)i(e,n);else{var r=o(e);n([r])}},p(s.prototype),s.prototype.add=function(e){var n;if("string"==typeof e)n=a(e),t.BINARY_EVENT==n.type||t.BINARY_ACK==n.type?(this.reconstructor=new l(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!m(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=h.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function a(){var e;try{e=t.storage.debug}catch(e){}return e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n(191),t.log=i,t.formatArgs=o,t.save=s,t.load=a,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,n){function r(){return t.colors[c++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(l||n);e.diff=i,e.prev=l,e.curr=n,l=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(e,i),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var u=o.log||t.log||console.log.bind(console);u.apply(e,s)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=u,t.disable=s,t.enable=i,t.enabled=a,t.humanize=n(192),t.names=[],t.skips=[],t.formatters={};var l,c=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,l,"day")||i(e,u,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,u=60*a,l=24*u,c=365.25*l;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?o(e):r(e)}},function(e,t,n){var r;(function(e,o){(function(){function i(e,t){function n(e){if(n[e]!==v)return n[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=n("json-stringify")&&n("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,c="function"==typeof l&&b;if(c){(s=function(){return 1}).toJSON=s;try{c="0"===l(0)&&"0"===l(new r)&&'""'==l(new o)&&l(g)===v&&l(v)===v&&l()===v&&"1"===l(s)&&"[1]"==l([s])&&"[null]"==l([v])&&"null"==l(null)&&"[null,null,null]"==l([v,g,null])&&l({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===l(null,s)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new u(-1))}catch(e){c=!1}}i=c}if("json-parse"==e){var d=t.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){s=d(a);var f=5==s.a.length&&1===s.a[0];if(f){try{f=!d('"\t"')}catch(e){}if(f)try{f=1!==d("01")}catch(e){}if(f)try{f=1!==d("1.")}catch(e){}}}}catch(e){f=!1}i=f}}return n[e]=!!i}e||(e=l.Object()),t||(t=l.Object());var r=e.Number||l.Number,o=e.String||l.String,s=e.Object||l.Object,u=e.Date||l.Date,c=e.SyntaxError||l.SyntaxError,d=e.TypeError||l.TypeError,f=e.Math||l.Math,p=e.JSON||l.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,m,v,y=s.prototype,g=y.toString,b=new u(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!n("json")){var _="[object Function]",w="[object Date]",E="[object Number]",x="[object String]",C="[object Array]",S="[object Boolean]",O=n("bug-string-char-index");if(!b)var k=f.floor,T=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return T[t]+365*(e-1970)+k((e-1969+(t=+(t>1)))/4)-k((e-1901+t)/100)+k((e-1601+t)/400)};if((h=y.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=g?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)h.call(r,o)&&i++;return n=r=null,i?m=2==i?function(e,t){var n,r={},o=g.call(e)==_;for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o=g.call(e)==_;for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,o,i=g.call(e)==_,s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(o=r.length;n=r[--o];s.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N="000000",M=function(e,t){return(N+(t||0)).slice(-e)},P="\\u00",R=function(e){for(var t='"',n=0,r=e.length,o=!O||r>10,i=o&&(O?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[s];break;default:if(s<32){t+=P+M(2,s.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},L=function(e,t,n,r,o,i,s){var a,u,l,c,f,p,y,b,_,O,T,D,N,P,j,I;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if(u=g.call(a),u!=w||h.call(a,"toJSON"))"function"==typeof a.toJSON&&(u!=E&&u!=x&&u!=C||h.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&a<1/0){if(A){for(f=k(a/864e5),l=k(f/365.2425)+1970-1;A(l+1,0)<=f;l++);for(c=k((f-A(l,0))/30.42);A(l,c+1)<=f;c++);f=1+f-A(l,c),p=(a%864e5+864e5)%864e5,y=k(p/36e5)%24,b=k(p/6e4)%60,_=k(p/1e3)%60,O=p%1e3}else l=a.getUTCFullYear(),c=a.getUTCMonth(),f=a.getUTCDate(),y=a.getUTCHours(),b=a.getUTCMinutes(),_=a.getUTCSeconds(),O=a.getUTCMilliseconds();a=(l<=0||l>=1e4?(l<0?"-":"+")+M(6,l<0?-l:l):M(4,l))+"-"+M(2,c+1)+"-"+M(2,f)+"T"+M(2,y)+":"+M(2,b)+":"+M(2,_)+"."+M(3,O)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if(u=g.call(a),u==S)return""+a;if(u==E)return a>-1/0&&a<1/0?""+a:"null";if(u==x)return R(""+a);if("object"==typeof a){for(P=s.length;P--;)if(s[P]===a)throw d();if(s.push(a),T=[],j=i,i+=o,u==C){for(N=0,P=a.length;N<P;N++)D=L(N,a,n,r,o,i,s),T.push(D===v?"null":D);I=T.length?o?"[\n"+i+T.join(",\n"+i)+"\n"+j+"]":"["+T.join(",")+"]":"[]"}else m(r||a,function(e){var t=L(e,a,n,r,o,i,s);t!==v&&T.push(R(e)+":"+(o?" ":"")+t)}),I=T.length?o?"{\n"+i+T.join(",\n"+i)+"\n"+j+"}":"{"+T.join(",")+"}":"{}";return s.pop(),I}};t.stringify=function(e,t,n){var r,o,i,s;if(a[typeof t]&&t)if((s=g.call(t))==_)o=t;else if(s==C){i={};for(var u,l=0,c=t.length;l<c;u=t[l++],s=g.call(u),(s==x||s==E)&&(i[u]=1));}if(n)if((s=g.call(n))==E){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else s==x&&(r=n.length<=10?n:n.slice(0,10));return L("",(u={},u[""]=e,u),o,i,r,"",[])}}if(!n("json-parse")){var j,I,B=o.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw j=I=null,c()},H=function(){for(var e,t,n,r,o,i=I,s=i.length;j<s;)switch(o=i.charCodeAt(j)){case 9:case 10:case 13:case 32:j++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=O?i.charAt(j):i[j],j++,e;case 34:for(e="@",j++;j<s;)if(o=i.charCodeAt(j),o<32)F();else if(92==o)switch(o=i.charCodeAt(++j)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=U[o],j++;break;case 117:for(t=++j,n=j+4;j<n;j++)o=i.charCodeAt(j),o>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||F();e+=B("0x"+i.slice(t,j));break;default:F()}else{if(34==o)break;for(o=i.charCodeAt(j),t=j;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++j);e+=i.slice(t,j)}if(34==i.charCodeAt(j))return j++,e;F();default:if(t=j,45==o&&(r=!0,o=i.charCodeAt(++j)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(j+1),o>=48&&o<=57)&&F(),r=!1;j<s&&(o=i.charCodeAt(j),o>=48&&o<=57);j++);if(46==i.charCodeAt(j)){for(n=++j;n<s&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==j&&F(),j=n}if(o=i.charCodeAt(j),101==o||69==o){for(o=i.charCodeAt(++j),43!=o&&45!=o||j++,n=j;n<s&&(o=i.charCodeAt(n),o>=48&&o<=57);n++);n==j&&F(),j=n}return+i.slice(t,j)}if(r&&F(),"true"==i.slice(j,j+4))return j+=4,!0;if("false"==i.slice(j,j+5))return j+=5,!1;if("null"==i.slice(j,j+4))return j+=4,null;F()}return"$"},V=function(e){var t,n;if("$"==e&&F(),"string"==typeof e){if("@"==(O?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=H(),"]"!=e;n||(n=!0))n&&(","==e?(e=H(),"]"==e&&F()):F()),","==e&&F(),t.push(V(e));return t}if("{"==e){for(t={};e=H(),"}"!=e;n||(n=!0))n&&(","==e?(e=H(),"}"==e&&F()):F()),","!=e&&"string"==typeof e&&"@"==(O?e.charAt(0):e[0])&&":"==H()||F(),t[e.slice(1)]=V(H());return t}F()}return e},W=function(e,t,n){var r=z(e,t,n);r===v?delete e[t]:e[t]=r},z=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(g.call(o)==C)for(r=o.length;r--;)W(o,r,n);else m(o,function(e){W(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return j=0,I=""+e,n=V(H()),"$"!=H()&&F(),j=I=null,t&&g.call(t)==_?z((r={},r[""]=n,r),"",t):n}}}return t.runInContext=i,t}var s=n(195),a={function:!0,object:!0},u=a[typeof t]&&t&&!t.nodeType&&t,l=a[typeof window]&&window||this,c=u&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof o&&o;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(l=c),u&&!s)i(l,u);else{var d=l.JSON,f=l.JSON3,p=!1,h=i(l,l.JSON3={noConflict:function(){return p||(p=!0,l.JSON=d,l.JSON3=f,d=f=null),h}});l.JSON={parse:h.parse,stringify:h.stringify}}s&&(r=function(){return h}.call(t,n,t,e),!(void 0!==r&&(e.exports=r)))}).call(this)}).call(t,n(194)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){(function(e){var r=n(198),o=n(199);t.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(r(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var u in e)s[u]=t(e[u]);return s}return e}var n=[],i=e.data,s=e;return s.data=t(i),s.attachments=n.length,{packet:s,buffers:n}},t.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var o=t[e.num];return o}if(r(e)){for(var i=0;i<e.length;i++)e[i]=n(e[i]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=n(e[s]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,n){function i(t,u,l){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){s++;var c=new FileReader;c.onload=function(){l?l[u]=this.result:a=this.result,--s||n(a)},c.readAsArrayBuffer(t)}else if(r(t))for(var d=0;d<t.length;d++)i(t[d],d,t);else if(t&&"object"==typeof t&&!o(t))for(var f in t)i(t[f],f,t)}var s=0,a=t;i(a),s||n(a)}}).call(t,function(){return this}())},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e,t){return this instanceof r?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),
this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(e,t)}var o=n(201),i=n(228),s=n(219),a=n(189),u=n(230),l=n(231),c=n(186)("socket.io-client:manager"),d=n(226),f=n(232),p=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},s(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=o(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=u(n,"open",function(){r.onopen(),e&&e()}),s=u(n,"error",function(t){if(c("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a);var l=setTimeout(function(){c("connect attempt timed out after %d",a),i.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(i),this.subs.push(s),this},r.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",l(this,"ondata"))),this.subs.push(u(e,"ping",l(this,"onping"))),this.subs.push(u(e,"pong",l(this,"onpong"))),this.subs.push(u(e,"error",l(this,"onerror"))),this.subs.push(u(e,"close",l(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",l(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},r.prototype.socket=function(e,t){function n(){~d(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[e];if(!r){r=new i(this,e,t),this.nsps[e]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},r.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){e.exports=n(202)},function(e,t,n){e.exports=n(203),e.exports.parser=n(210)},function(e,t,n){(function(t){function r(e,n){if(!(this instanceof r))return new r(e,n);n=n||{},e&&"object"==typeof e&&(n=e,e=null),e?(e=c(e),n.hostname=e.host,n.secure="https"===e.protocol||"wss"===e.protocol,n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=c(n.host).host),this.secure=null!=n.secure?n.secure:t.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(t.location?location.hostname:"localhost"),this.port=n.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized?null:n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof t&&t;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i=n(204),s=n(219),a=n(186)("engine.io-client:socket"),u=n(226),l=n(210),c=n(185),d=n(227),f=n(220);e.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=l.protocol,r.Socket=r,r.Transport=n(209),r.transports=n(204),r.parser=n(210),r.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=o(this.query);t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress});return n},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(f.onlyBinaryUpgrades){var t=!this.supportsBinary&&f.transport.supportsBinary;d=d||t}d||(a('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!d)if("pong"===t.type&&"probe"===t.data){if(a('probe transport "%s" pong',e),f.upgrading=!0,f.emit("upgrading",c),!c)return;r.priorWebsocketSuccess="websocket"===c.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){d||"closed"!==f.readyState&&(a("changing transport and sending upgrade packet"),l(),f.setTransport(c),c.send([{type:"upgrade"}]),f.emit("upgrade",c),c=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,f.emit("upgradeError",n)}}))}function n(){d||(d=!0,l(),c.close(),c=null)}function o(t){var r=new Error("probe error: "+t);r.transport=c.name,n(),a('probe transport "%s" failed because of error: %s',e,t),f.emit("upgradeError",r)}function i(){o("transport closed")}function s(){o("socket closed")}function u(e){c&&e.name!==c.name&&(a('"%s" works - aborting "%s"',e.name,c.name),n())}function l(){c.removeListener("open",t),c.removeListener("error",o),c.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",u)}a('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),d=!1,f=this;r.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",o),c.once("close",i),this.once("close",s),this.once("upgrading",u),c.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){a("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~u(this.transports,e[n])&&t.push(e[n]);return t}}).call(t,function(){return this}())},function(e,t,n){(function(e){function r(t){var n,r=!1,a=!1,u=!1!==t.jsonp;if(e.location){var l="https:"===location.protocol,c=location.port;c||(c=l?443:80),r=t.hostname!==location.hostname||c!==t.port,a=t.secure!==l}if(t.xdomain=r,t.xscheme=a,n=new o(t),"open"in n&&!t.forceJSONP)return new i(t);if(!u)throw new Error("JSONP disabled");return new s(t)}var o=n(205),i=n(207),s=n(223),a=n(224);t.polling=r,t.websocket=a}).call(t,function(){return this}())},function(e,t,n){(function(t){var r=n(206);e.exports=function(e){var n=e.xdomain,o=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(e){}if(!n)try{return new(t[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){(function(t){function r(){}function o(e){if(u.call(this,e),this.requestTimeout=e.requestTimeout,t.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=e.hostname!==t.location.hostname||r!==e.port,this.xs=e.secure!==n}else this.extraHeaders=e.extraHeaders}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var a=n(205),u=n(208),l=n(219),c=n(221),d=n(186)("engine.io-client:polling-xhr");e.exports=o,e.exports.Request=i,c(o,u),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new i(e)},o.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},o.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(e),r=this;try{d("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(e){}if(this.supportsBinary&&(n.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},d("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}t.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(e){}t.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],o=0,i=n.length;o<i;o++)r.push(n[o]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",s):t.addEventListener&&t.addEventListener("beforeunload",s,!1))}).call(t,function(){return this}())},function(e,t,n){function r(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=n(209),i=n(220),s=n(210),a=n(221),u=n(222),l=n(186)("engine.io-client:polling");e.exports=r;var c=function(){var e=n(205),t=new e({xdomain:!1});return null!=t.responseType}();a(r,o),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){l("pre-pause polling complete"),--r||t()})),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",function(){l("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,r){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var o=n(210),i=n(219);e.exports=r,i(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(e){function r(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}function o(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=g[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function i(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){e.data=o.result,t.encodePacket(e,n,!0,r)},o.readAsArrayBuffer(e.data)}function s(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(y)return i(e,n,r);var o=new Uint8Array(1);o[0]=g[e.type];var s=new w([o.buffer,e.data]);return r(s)}function a(e){try{e=h.decode(e)}catch(e){return!1}return e}function u(e,t,n){for(var r=new Array(e.length),o=p(e.length,n),i=function(e,n,o){t(n,function(t,n){r[e]=n,o(t,r)})},s=0;s<e.length;s++)i(s,e[s],o)}var l,c=n(211),d=n(212),f=n(214),p=n(215),h=n(216);e&&e.ArrayBuffer&&(l=n(217));var m="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),v="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=m||v;t.protocol=3;var g=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=c(g),_={type:"error",data:"parser error"},w=n(218);t.encodePacket=function(t,n,i,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof i&&(a=i,i=null);var u=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&u instanceof ArrayBuffer)return o(t,n,a);if(w&&u instanceof e.Blob)return s(t,n,a);if(u&&u.base64)return r(t,a);var l=g[t.type];return void 0!==t.data&&(l+=i?h.encode(String(t.data)):String(t.data)),a(""+l)},t.encodeBase64Packet=function(n,r){var o="b"+t.packets[n.type];if(w&&n.data instanceof e.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var a=new Uint8Array(n.data),u=new Array(a.length),l=0;l<a.length;l++)u[l]=a[l];s=String.fromCharCode.apply(null,u)}return o+=e.btoa(s),r(o)},t.decodePacket=function(e,n,r){if(void 0===e)return _;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&(e=a(e),e===!1))return _;var o=e.charAt(0);return Number(o)==o&&b[o]?e.length>1?{type:b[o],data:e.substring(1)}:{type:b[o]}:_}var i=new Uint8Array(e),o=i[0],s=f(e,1);return w&&"blob"===n&&(s=new w([s])),{type:b[o],data:s}},t.decodeBase64Packet=function(e,t){var n=b[e.charAt(0)];if(!l)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=l.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},t.encodePayload=function(e,n,r){function o(e){return e.length+":"+e}function i(e,r){t.encodePacket(e,!!s&&n,!0,function(e){r(null,o(e))})}"function"==typeof n&&(r=n,n=null);var s=d(e);return n&&s?w&&!y?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void u(e,i,function(e,t){return r(t.join(""))}):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);"function"==typeof n&&(r=n,n=null);var o;if(""==e)return r(_,0,1);for(var i,s,a="",u=0,l=e.length;u<l;u++){var c=e.charAt(u);if(":"!=c)a+=c;else{if(""==a||a!=(i=Number(a)))return r(_,0,1);if(s=e.substr(u+1,i),a!=s.length)return r(_,0,1);if(s.length){if(o=t.decodePacket(s,n,!0),_.type==o.type&&_.data==o.data)return r(_,0,1);var d=r(o,u+i,l);if(!1===d)return}u+=i,a=""}}return""!=a?r(_,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){return n(null,e)})}return e.length?void u(e,r,function(e,t){var r=t.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}t?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,n){function r(e,n){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var u=new w([t.buffer,a.buffer,e]);n(null,u)}})}u(e,r,function(e,t){return n(new w(t))})},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,i=[],s=!1;o.byteLength>0;){for(var a=new Uint8Array(o),u=0===a[0],l="",c=1;255!=a[c];c++){if(l.length>310){s=!0;break}l+=a[c]}if(s)return r(_,0,1);o=f(o,2+l.length),l=parseInt(l);var d=f(o,0,l);if(u)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var p=new Uint8Array(d);d="";for(var c=0;c<p.length;c++)d+=String.fromCharCode(p[c])}i.push(d),o=f(o,l)}var h=i.length;i.forEach(function(e,o){r(t.decodePacket(e,n,!0),o,h)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t,n){(function(t){function r(e){function n(e){if(!e)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer||t.Blob&&e instanceof Blob||t.File&&e instanceof File)return!0;if(o(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&n(e[i]))return!0}return!1}return n(e)}var o=n(213);e.exports=r}).call(t,function(){return this}())},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(e,t){function n(e,t,n){function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}var i=!1;return n=n||r,o.count=e,0===e?t():o}function r(){}e.exports=n},function(e,t,n){var r;(function(e,o){!function(i){function s(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function a(e){for(var t,n=e.length,r=-1,o="";++r<n;)t=e[r],t>65535&&(t-=65536,o+=b(t>>>10&1023|55296),t=56320|1023&t),o+=b(t);return o}function u(e,t){return b(e>>t&63|128)}function l(e){if(0==(4294967168&e))return b(e);var t="";return 0==(4294965248&e)?t=b(e>>6&31|192):0==(4294901760&e)?(t=b(e>>12&15|224),t+=u(e,6)):0==(4292870144&e)&&(t=b(e>>18&7|240),t+=u(e,12),t+=u(e,6)),t+=b(63&e|128)}function c(e){for(var t,n=s(e),r=n.length,o=-1,i="";++o<r;)t=n[o],i+=l(t);return i}function d(){if(g>=y)throw Error("Invalid byte index");var e=255&v[g];if(g++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t,n,r,o;if(g>y)throw Error("Invalid byte index");if(g==y)return!1;if(e=255&v[g],g++,0==(128&e))return e;if(192==(224&e)){var t=d();if(o=(31&e)<<6|t,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),o=(15&e)<<12|t<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),r=d(),o=(15&e)<<18|t<<12|n<<6|r,o>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function p(e){v=s(e),y=v.length,g=0;for(var t,n=[];(t=f())!==!1;)n.push(t);return a(n)}var h="object"==typeof t&&t,m=("object"==typeof e&&e&&e.exports==h&&e,"object"==typeof o&&o);
m.global!==m&&m.window!==m||(i=m);var v,y,g,b=String.fromCharCode,_={version:"1.0.0",encode:c,decode:p};r=function(){return _}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(194)(e),function(){return this}())},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,r,o,i,s,a=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),d=new Uint8Array(c);for(t=0;t<u;t+=4)r=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],i=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],d[l++]=r<<2|o>>4,d[l++]=(15&o)<<4|i>>2,d[l++]=(3&i)<<6|63&s;return c}}()},function(e,t){(function(t){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new i;n(e);for(var o=0;o<e.length;o++)r.append(e[o]);return t.type?r.getBlob(t.type):r.getBlob()}function o(e,t){return n(e),new Blob(e,t||{})}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(e){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(e){return!1}}(),u=i&&i.prototype.append&&i.prototype.getBlob;e.exports=function(){return s?a?t.Blob:o:u?r:void 0}()}).call(t,function(){return this}())},function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){"use strict";function n(e){var t="";do t=s[e%a]+t,e=Math.floor(e/a);while(e>0);return t}function r(e){var t=0;for(c=0;c<e.length;c++)t=t*a+u[e.charAt(c)];return t}function o(){var e=n(+new Date);return e!==i?(l=0,i=e):e+"."+n(l++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,u={},l=0,c=0;c<a;c++)u[s[c]]=c;o.encode=n,o.decode=r,e.exports=o},function(e,t,n){(function(t){function r(){}function o(e){i.call(this,e),this.query=this.query||{},a||(t.___eio||(t.___eio=[]),a=t.___eio),this.index=a.length;var n=this;a.push(function(e){n.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(208),s=n(221);e.exports=o;var a,u=/\n/g,l=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},o.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(e){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(l,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(t,function(){return this}())},function(e,t,n){(function(t){function r(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=d&&!e.forceNode,this.usingBrowserWebSocket||(f=o),i.call(this,e)}var o,i=n(209),s=n(210),a=n(220),u=n(221),l=n(222),c=n(186)("engine.io-client:websocket"),d=t.WebSocket||t.MozWebSocket;if("undefined"==typeof window)try{o=n(225)}catch(e){}var f=d;f||"undefined"!=typeof window||(f=o),e.exports=r,u(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var o=e.length,i=0,a=o;i<a;i++)!function(e){s.encodePacket(e,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),r.perMessageDeflate){var a="string"==typeof i?t.Buffer.byteLength(i):i.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(e){c("websocket closed before onclose event")}--o||n()})}(e[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e);var r=this.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===r.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(o,"]").replace(i,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,n){function r(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o=n(189),i=n(219),s=n(229),a=n(230),u=n(231),l=n(186)("socket.io-client:socket"),c=n(212);e.exports=t=r;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;i(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",u(this,"onopen")),a(e,"packet",u(this,"onpacket")),a(e,"close",u(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=s(arguments),n=o.EVENT;c(t)&&(n=o.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){l("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:o.CONNECT,query:this.query}):this.packet({type:o.CONNECT}))},r.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:this.onevent(e);break;case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:this.onack(e);break;case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);l("sending ack %j",r);var i=c(r)?o.BINARY_ACK:o.ACK;t.packet({type:i,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function n(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}e.exports=n},function(e,t){function n(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}e.exports=n},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.user=void 0;var o=n(116),i=r(o),s=n(234),a=n(91),u=r(a),l="$$user",c=function(){this.data=null};c.prototype.asynLogin=function(e,t){var n=(0,s.getAPI)("Login"),r=this;return i.default[n.method](n.url,{email:e,password:t}).then(function(e){var t=e.data;if(t.data)return r.setUser(t.data),t;throw new Error(t.msg)},function(){throw new Error(null)})},c.prototype.storeUserInLocal=function(){u.default.storeData(l,this.data)},c.prototype.getUserFromLocal=function(){return this.data=u.default.getData(l),this.data},c.prototype.getUser=function(){return this.data},c.prototype.setUser=function(e){return this.data=e,this.storeUserInLocal(),this.data};var d=new c;t.user=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={GET:"get",POST:"post",PUT:"put",DELETE:"delete"},r="ws://localhost:3000",o="http://localhost:8082",i={Register:{url:o+"/user/register",method:n.POST},Login:{url:o+"/user/login",method:n.POST},Logout:{url:o+"/user/logout",method:n.POST},CreatProject:{url:o+"/project",method:n.POST},DeleteProject:{url:o+"/project",method:n.POST},AddMembers:{url:o+"/project/members",method:n.POST},DeleteMembers:{url:o+"/project/members",method:n.DELETE},AddResources:{url:o+"/project/resources",method:n.POST},DELETEResources:{url:o+"/project/resources",method:n.DELETE},GetProjectList:{url:o+"/projects/search?pageNumber={pageNumber}",method:n.POST},GetProjectDetail:{url:o+"/project/search",method:n.POST}},s=function(e){return i[e]};t.getAPI=s,t.socketUrl=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GroundLayer=t.Ground=void 0;var i=n(26),s=o(i),a=n(80),u=o(a),l=n(3),c=o(l),d=n(4),f=o(d),p=n(23),h=r(p),m=n(236);n(25),t.Ground=function(){function e(t,n){if((0,c.default)(this,e),this.width=t,n){var r=new h.TextureLoader;this.groundTexture=r.load(n),this.groundTexture.wrapS=this.groundTexture.wrapT=h.RepeatWrapping,this.groundTexture.repeat.set(1,1)}var o=new h.PlaneGeometry(2*t,2*t),i=new h.MeshLambertMaterial({map:this.groundTexture});return this.instance=new h.Mesh(o,i),this.instance.receiveShadow=!0,this.instance.name="land",this}return(0,f.default)(e,[{key:"getInstance",value:function(){return this.instance}}]),e}(),t.GroundLayer=function(e){function t(){var e;(0,c.default)(this,t);var n=new h.Group;n.name="ground_group";var r=(0,s.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,"地面"));return r.setSelectable(!1).setDeleteable(!1).setClearable(!1),e=r,(0,s.default)(r,e)}return(0,u.default)(t,e),(0,f.default)(t,[{key:"add",value:function(e){e.getInstance?this.object.add(e.getInstance()):this.object.add(e)}},{key:"getInstance",value:function(){return this.object}}]),t}(m.TileLayer)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t={xMin:1/0,yMin:1/0,xMax:-(1/0),yMax:-(1/0)},n=0;n<e.length;n++){if(!e[n])return null;t.xMin=Math.min(e[n].x,t.xMin),t.yMin=Math.min(e[n].y,t.yMin),t.xMax=Math.max(e[n].x,t.xMax),t.yMax=Math.max(e[n].y,t.yMax)}return t.xWidth=t.xMax-t.xMin,t.yWidth=t.yMax-t.yMin,t}function s(e,t){if(e.userData.id===t)return e;for(var n=0;n<e.children.length;n++){var r=s(e.children[n],t);if(r)return r}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.TileLayer=void 0;var a=n(3),u=o(a),l=n(4),c=o(l),d=n(26),f=o(d),p=n(80),h=o(p),m=n(237),v=n(88),y=n(23),g=r(y);t.TileLayer=function(e){function t(e,n,r){(0,u.default)(this,t);var o=(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.resetUrl(r),o._plane=new g.Plane(new g.Vector3(0,0,1),0),o._raycaster=new g.Raycaster,o._mouse=new g.Vector2,o}return(0,h.default)(t,e),(0,c.default)(t,[{key:"resetUrl",value:function(e){this.url=e||"http://a.tile.openstreetmap.org/{z}/{x}/{y}.png"}},{key:"destoryWorld",value:function(){this._world&&(v.DomEvent.off(this._world.renderer.domElement,"mouseup",this._mouseupFn),v.DomEvent.off(this._world.renderer.domElement,"mousedown",this._mousedownFn),v.DomEvent.off(this._world.renderer.domElement,"mousemove",this._mousemoveFn),this._world.signal.removeListener("CAMERACHANGE",this._camerachangeFn),this._world=null)}},{key:"resetWorld",value:function(e){this.destoryWorld(),this._world=e;var t=e.renderer.domElement,n="off";this._mousedownFn=function(){n="down"},this._mousemoveFn=function(e){"down"==n&&(Math.abs(e.movementX)>2||Math.abs(e.movementY)>2)&&(n="move")},this._mouseupFn=v.Util.bind(function(){"move"==n&&this.refreshTile()},this),v.DomEvent.on(t,"mousedown",this._mousedownFn),v.DomEvent.on(t,"mousemove",this._mousemoveFn),v.DomEvent.on(t,"mouseup",this._mouseupFn),this._camerachangeFn=v.Util.bind(function(){this.refreshTile()},this),this._world.signal.on("CAMERACHANGE",this._camerachangeFn)}},{key:"refreshTile",value:function(){var e=this._world.camera;this._mouse.set(1,1),this._raycaster.setFromCameraHP(this._mouse,e);var t=this._raycaster.ray.clone();this._mouse.set(1,-1),this._raycaster.setFromCameraHP(this._mouse,e);var n=this._raycaster.ray.clone();this._mouse.set(-1,-1),this._raycaster.setFromCameraHP(this._mouse,e);var r=this._raycaster.ray.clone();this._mouse.set(-1,1),this._raycaster.setFromCameraHP(this._mouse,e);var o=this._raycaster.ray.clone(),s=t.intersectPlane(this._plane),a=n.intersectPlane(this._plane),u=r.intersectPlane(this._plane),l=o.intersectPlane(this._plane),c=[s,a,u,l],d=i(c);this.loadBoxTile(d)}},{key:"getTile",value:function(e,t,n){var r=new g.TextureLoader,o=r.load(v.Util.template(this.url,{x:e,y:t,z:n}));o.wrapS=o.wrapT=g.RepeatWrapping,o.repeat.set(1,1);var i=new g.PlaneGeometry(256*Math.pow(2,18-n),256*Math.pow(2,18-n)),s=new g.MeshLambertMaterial({map:o}),a=new g.Mesh(i,s);return a.userData.id=e+"_"+t+"_"+n,a}},{key:"loadBoxTile",value:function(e){if(e){var t=18-Math.log2(Math.max(e.xWidth,e.yWidth)/256)+2;t=Math.max(0,Math.min(18,Math.floor(t)));var n={};n.xMin=Math.floor((33554432+e.xMin)/(256*Math.pow(2,18-t))),n.yMin=Math.floor((33554432-e.yMax)/(256*Math.pow(2,18-t))),n.xMax=Math.floor((33554432+e.xMax)/(256*Math.pow(2,18-t))),n.yMax=Math.floor((33554432-e.yMin)/(256*Math.pow(2,18-t))),n.xWidth=n.xMax-n.xMin,n.yWidth=n.yMax-n.yMin,n.z=t,console.log(n),v.Util.forEach(this.object.children,function(e){e.userData.old=!0});for(var r=n.xMin-1;r<=n.xMax+1;r++)for(var o=n.yMin-1;o<=n.yMax+1;o++){var i=s(this.object,r+"_"+o+"_"+t);if(i)i.userData.old=!1;else if(r>=0&&o>=0&&t>=0&&r<Math.pow(2,t)&&o<Math.pow(2,t)){var i=this.getTile(r,o,t);i.position.set((r+.5)*Math.pow(2,26-t)-33554432,33554432-(o+.5)*Math.pow(2,26-t),0),i.receiveShadow=!0,i.name="land",this.object.add(i)}}for(var a=[],u=0;u<this.object.children.length;u++){var l=this.object.children[u];l.userData.old&&a.push(l)}v.Util.forEach(a,v.Util.bind(function(e){this.object.remove(e)},this))}}}]),t}(m.Layer)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=void 0;var o=n(3),i=r(o),s=n(4),a=r(s),u=n(88);t.Layer=function(){function e(t,n){return(0,i.default)(this,e),this.object=t,this.name=n,this.selectable=!0,this.deleteable=!0,this.clearable=!0,this.selected=!1,this}return(0,a.default)(e,[{key:"add",value:function(e){this.object&&this.object.add(e)}},{key:"remove",value:function(e){this.object&&this.object.remove(e)}},{key:"setSelectable",value:function(e){return this.selectable=e,this}},{key:"setDeleteable",value:function(e){return this.deleteable=e,this}},{key:"setClearable",value:function(e){return this.clearable=e,this}},{key:"clear",value:function(){return!!this.object&&(u.Util.emptyArray(this.object.children),!0)}},{key:"toggleVisible",value:function(){return!!this.object&&(this.object.visible=!this.object.visible,this.object.visible)}}]),e}()},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LayerCollection=void 0;var i=n(3),s=o(i),a=n(4),u=o(a),l=n(23),c=r(l),d=n(237);t.LayerCollection=function(){function e(){(0,s.default)(this,e),this.layers=[];var t=new c.Group;t.name="default",this.defaultLayer=new d.Layer(t,"默认").setDeleteable(!1),this.layers.push(this.defaultLayer)}return(0,u.default)(e,[{key:"addLayer",value:function(e){return!this.getLayerByName(e.name)&&(this.layers.push(e),!0)}},{key:"setSelectedLayer",value:function(e){for(var t=this.getLayers(),n=0;n<t.length;n++)t[n].selected=!1,e===t[n]&&e.selectable&&(e.selected=!0)}},{key:"getSelectedLayer",value:function(){for(var e=this.getLayers(),t=0;t<e.length;t++)if(e[t].selected&&e[t].selectable)return e[t];return this.defaultLayer}},{key:"newLayer",value:function(e){if(this.getLayerByName(e))return null;var t=new c.Group;t.name=e;var n=new d.Layer(t,e);return this.layers.push(n),n}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayerByName",value:function(e){for(var t=0;t<this.layers.length;t++)if(this.layers[t].name===e)return this.layers[t];return""===e||void 0===e||null===e||null}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=(n(88),n(240)),i=(r(o),n(241));r(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=r(o),s=n(88),a=n(241),u=r(a),l=function e(t,n){(0,i.default)(this,e),this.firstName=u.default.observable(t),this.lastName=u.default.observable(n),this.fullName=u.default.pureComputed(function(){return this.firstName()+" "+this.lastName()},this),this.element=s.DomUtil.createElement("div","user-modal",'\n\t\t\t\t<div style="width:200px;height:200px;background-color:#fff;">\n\t\t\t\t\t<p>First name: <input data-bind="value: firstName" /></p>\n\t\t\t\t\t<p>Last name: <input data-bind="value: lastName" /></p>\n\t\t\t\t\t<h2>Hello, <span data-bind="text: fullName"> </span>!</h2>\n\t\t\t\t</div>\n\t\t\t')};t.default=l},function(e,t,n){var r,o,i;(function(e){/*!
	 * Knockout JavaScript library v3.4.1
	 * (c) The Knockout.js team - http://knockoutjs.com/
	 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
	 */
!function(){var s=!0;!function(a){var u=this||(0,eval)("this"),l=u.document,c=u.navigator,d=u.jQuery,f=u.JSON;!function(s){n(242).amd?(o=[t,n],r=s,i="function"==typeof r?r.apply(t,o):r,!(i!==a&&(e.exports=i))):s(e.exports||t)}(function(e,t){function n(e,t){var n=null===e||typeof e in b;return!!n&&e===t}function r(e,t){var n;return function(){n||(n=g.utils.setTimeout(function(){n=a,e()},t))}}function o(e,t){var n;return function(){clearTimeout(n),n=g.utils.setTimeout(e,t)}}function i(e){var t=this;return e&&g.utils.objectForEach(e,function(e,n){var r=g.extenders[e];"function"==typeof r&&(t=r(t,n)||t)}),t}function p(e,t){t&&t!==_?"beforeChange"===t?this._limitBeforeChange(e):this._origNotifySubscribers(e,t):this._limitChange(e)}function h(e,t){null!==t&&t.dispose&&t.dispose()}function m(e,t){var n=this.computedObservable,r=n[O];r.isDisposed||(this.disposalCount&&this.disposalCandidates[t]?(n.addDependencyTracking(t,e,this.disposalCandidates[t]),this.disposalCandidates[t]=null,--this.disposalCount):r.dependencyTracking[t]||n.addDependencyTracking(t,e,r.isSleeping?{_target:e}:n.subscribeToDependency(e)))}function v(e){g.bindingHandlers[e]={init:function(t,n,r,o,i){var s=function(){var t={};return t[e]=n(),t};return g.bindingHandlers.event.init.call(this,t,s,r,o,i)}}}function y(e,t,n,r){g.bindingHandlers[e]={init:function(e,o,i,s,a){var u,l;return g.computed(function(){var i=o(),s=g.utils.unwrapObservable(i),c=!n!=!s,d=!l,f=d||t||c!==u;f&&(d&&g.computedContext.getDependenciesCount()&&(l=g.utils.cloneNodes(g.virtualElements.childNodes(e),!0)),c?(d||g.virtualElements.setDomNodeChildren(e,g.utils.cloneNodes(l)),g.applyBindingsToDescendants(r?r(a,i):a,e)):g.virtualElements.emptyNode(e),u=c)},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},g.expressionRewriting.bindingRewriteValidators[e]=!1,g.virtualElements.allowedBindings[e]=!0}var g="undefined"!=typeof e?e:{};g.exportSymbol=function(e,t){for(var n=e.split("."),r=g,o=0;o<n.length-1;o++)r=r[n[o]];r[n[n.length-1]]=t},g.exportProperty=function(e,t,n){e[t]=n},g.version="3.4.1",g.exportSymbol("version",g.version),g.options={deferUpdates:!1,useOnlyNativeEvents:!1},g.utils=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,t){return e.__proto__=t,e}function r(e,t){if("input"!==g.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}function o(e,t,n){var r;t&&("object"==typeof e.classList?(r=e.classList[n?"add":"remove"],g.utils.arrayForEach(t.match(x),function(t){r.call(e.classList,t)})):"string"==typeof e.className.baseVal?i(e.className,"baseVal",t,n):i(e,"className",t,n))}function i(e,t,n,r){var o=e[t].match(x)||[];g.utils.arrayForEach(n.match(x),function(e){g.utils.addOrRemoveItem(o,e,r)}),e[t]=o.join(" ")}var p={__proto__:[]}instanceof Array,h=!s&&"function"==typeof Symbol,m={},v={},y=c&&/Firefox\/2/i.test(c.userAgent)?"KeyboardEvent":"UIEvents";m[y]=["keyup","keydown","keypress"],m.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],e(m,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)v[t[n]]=e});var b={propertychange:!0},_=l&&function(){for(var e=3,t=l.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return e>4?e:a}(),w=6===_,E=7===_,x=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r))return e[r];return null},arrayRemoveItem:function(e,t){var n=g.utils.arrayIndexOf(e,t);n>0?e.splice(n,1):0===n&&e.shift()},arrayGetDistinctValues:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)g.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];for(var n=[],r=0,o=e.length;r<o;r++)n.push(t(e[r],r));return n},arrayFilter:function(e,t){e=e||[];for(var n=[],r=0,o=e.length;r<o;r++)t(e[r],r)&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var r=g.utils.arrayIndexOf(g.utils.peekObservable(e),t);r<0?n&&e.push(t):n||e.splice(r,1)},canSetPrototype:p,extend:t,setPrototypeOf:n,setPrototypeOfOrExtend:p?n:t,objectForEach:e,objectMap:function(e,t){if(!e)return e;var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},emptyDomNode:function(e){for(;e.firstChild;)g.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=g.utils.makeArray(e),n=t[0]&&t[0].ownerDocument||l,r=n.createElement("div"),o=0,i=t.length;o<i;o++)r.appendChild(g.cleanNode(t[o]));return r},cloneNodes:function(e,t){for(var n=0,r=e.length,o=[];n<r;n++){var i=e[n].cloneNode(!0);o.push(t?g.cleanNode(i):i)}return o},setDomNodeChildren:function(e,t){if(g.utils.emptyDomNode(e),t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){for(var r=n[0],o=r.parentNode,i=0,s=t.length;i<s;i++)o.insertBefore(t[i],r);for(var i=0,s=n.length;i<s;i++)g.removeNode(n[i])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;e.length>1&&e[e.length-1].parentNode!==t;)e.length--;if(e.length>1){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)e.push(n),n=n.nextSibling;e.push(r)}}return e},setOptionNodeSelectionState:function(e,t){_<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===a?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return g.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!g.utils.arrayFirst(e,g.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},catchFunctionErrors:function(e){return g.onError?function(){try{return e.apply(this,arguments)}catch(e){throw g.onError&&g.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(g.utils.catchFunctionErrors(e),t)},deferError:function(e){setTimeout(function(){throw g.onError&&g.onError(e),e},0)},registerEventHandler:function(e,t,n){var r=g.utils.catchFunctionErrors(n),o=_&&b[t];if(g.options.useOnlyNativeEvents||o||!d)if(o||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){r.call(e,t)},s="on"+t;e.attachEvent(s,i),g.utils.domNodeDisposal.addDisposeCallback(e,function(){e.detachEvent(s,i)})}else e.addEventListener(t,r,!1);else d(e).bind(t,r)},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=r(e,t);if(g.options.useOnlyNativeEvents||!d||n)if("function"==typeof l.createEvent){if("function"!=typeof e.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var o=v[t]||"HTMLEvents",i=l.createEvent(o);i.initEvent(t,!0,!0,u,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else if(n&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else d(e).trigger(t)},unwrapObservable:function(e){return g.isObservable(e)?e():e},peekObservable:function(e){return g.isObservable(e)?e.peek():e},toggleDomNodeCssClass:o,setTextContent:function(e,t){var n=g.utils.unwrapObservable(t);null!==n&&n!==a||(n="");var r=g.virtualElements.firstChild(e);!r||3!=r.nodeType||g.virtualElements.nextSibling(r)?g.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)]):r.data=n,g.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,_<=7)try{e.mergeAttributes(l.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},forceRefresh:function(e){if(_>=9){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(_){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=g.utils.unwrapObservable(e),t=g.utils.unwrapObservable(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},createSymbolOrString:function(e){return h?Symbol(e):e},isIe6:w,isIe7:E,ieVersion:_,getFormFields:function(e,t){for(var n=g.utils.makeArray(e.getElementsByTagName("input")).concat(g.utils.makeArray(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},o=[],i=n.length-1;i>=0;i--)r(n[i])&&o.push(n[i]);return o},parseJson:function(e){return"string"==typeof e&&(e=g.utils.stringTrim(e))?f&&f.parse?f.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!f||!f.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(g.utils.unwrapObservable(e),t,n)},postJson:function(t,n,r){r=r||{};var o=r.params||{},i=r.includeFields||this.fieldsIncludedWithJsonPost,s=t;if("object"==typeof t&&"form"===g.utils.tagNameLower(t)){var a=t;s=a.action;for(var u=i.length-1;u>=0;u--)for(var c=g.utils.getFormFields(a,i[u]),d=c.length-1;d>=0;d--)o[c[d].name]=c[d].value}n=g.utils.unwrapObservable(n);var f=l.createElement("form");f.style.display="none",f.action=s,f.method="post";for(var p in n){var h=l.createElement("input");h.type="hidden",h.name=p,h.value=g.utils.stringifyJson(g.utils.unwrapObservable(n[p])),f.appendChild(h)}e(o,function(e,t){var n=l.createElement("input");n.type="hidden",n.name=e,n.value=t,f.appendChild(n)}),l.body.appendChild(f),r.submitter?r.submitter(f):f.submit(),setTimeout(function(){f.parentNode.removeChild(f)},0)}}}(),g.exportSymbol("utils",g.utils),g.exportSymbol("utils.arrayForEach",g.utils.arrayForEach),g.exportSymbol("utils.arrayFirst",g.utils.arrayFirst),g.exportSymbol("utils.arrayFilter",g.utils.arrayFilter),g.exportSymbol("utils.arrayGetDistinctValues",g.utils.arrayGetDistinctValues),g.exportSymbol("utils.arrayIndexOf",g.utils.arrayIndexOf),g.exportSymbol("utils.arrayMap",g.utils.arrayMap),g.exportSymbol("utils.arrayPushAll",g.utils.arrayPushAll),g.exportSymbol("utils.arrayRemoveItem",g.utils.arrayRemoveItem),g.exportSymbol("utils.extend",g.utils.extend),g.exportSymbol("utils.fieldsIncludedWithJsonPost",g.utils.fieldsIncludedWithJsonPost),g.exportSymbol("utils.getFormFields",g.utils.getFormFields),g.exportSymbol("utils.peekObservable",g.utils.peekObservable),g.exportSymbol("utils.postJson",g.utils.postJson),g.exportSymbol("utils.parseJson",g.utils.parseJson),g.exportSymbol("utils.registerEventHandler",g.utils.registerEventHandler),g.exportSymbol("utils.stringifyJson",g.utils.stringifyJson),g.exportSymbol("utils.range",g.utils.range),g.exportSymbol("utils.toggleDomNodeCssClass",g.utils.toggleDomNodeCssClass),g.exportSymbol("utils.triggerEvent",g.utils.triggerEvent),g.exportSymbol("utils.unwrapObservable",g.utils.unwrapObservable),g.exportSymbol("utils.objectForEach",g.utils.objectForEach),g.exportSymbol("utils.addOrRemoveItem",g.utils.addOrRemoveItem),g.exportSymbol("utils.setTextContent",g.utils.setTextContent),g.exportSymbol("unwrap",g.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice(0);return r.push.apply(r,arguments),t.apply(e,r)}}),g.utils.domData=new function(){function e(e,o){var i=e[n],s=i&&"null"!==i&&r[i];if(!s){if(!o)return a;i=e[n]="ko"+t++,r[i]={}}return r[i]}var t=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(t,n){var r=e(t,!1);return r===a?a:r[n]},set:function(t,n,r){if(r!==a||e(t,!1)!==a){var o=e(t,!0);o[n]=r}},clear:function(e){var t=e[n];return!!t&&(delete r[t],e[n]=null,!0)},nextKey:function(){return t++ +n}}},g.exportSymbol("utils.domData",g.utils.domData),g.exportSymbol("utils.domData.clear",g.utils.domData.clear),g.utils.domNodeDisposal=new function(){function e(e,t){var n=g.utils.domData.get(e,o);return n===a&&t&&(n=[],g.utils.domData.set(e,o,n)),n}function t(e){g.utils.domData.set(e,o,a)}function n(t){var n=e(t,!1);if(n){n=n.slice(0);for(var o=0;o<n.length;o++)n[o](t)}g.utils.domData.clear(t),g.utils.domNodeDisposal.cleanExternalData(t),s[t.nodeType]&&r(t)}function r(e){for(var t,r=e.firstChild;t=r;)r=t.nextSibling,8===t.nodeType&&n(t)}var o=g.utils.domData.nextKey(),i={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{addDisposeCallback:function(t,n){if("function"!=typeof n)throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(n,r){var o=e(n,!1);o&&(g.utils.arrayRemoveItem(o,r),0==o.length&&t(n))},cleanNode:function(e){if(i[e.nodeType]&&(n(e),s[e.nodeType])){var t=[];g.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var r=0,o=t.length;r<o;r++)n(t[r])}return e},removeNode:function(e){g.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){d&&"function"==typeof d.cleanData&&d.cleanData([e])}}},g.cleanNode=g.utils.domNodeDisposal.cleanNode,g.removeNode=g.utils.domNodeDisposal.removeNode,g.exportSymbol("cleanNode",g.cleanNode),g.exportSymbol("removeNode",g.removeNode),g.exportSymbol("utils.domNodeDisposal",g.utils.domNodeDisposal),g.exportSymbol("utils.domNodeDisposal.addDisposeCallback",g.utils.domNodeDisposal.addDisposeCallback),g.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",g.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=e.match(/^<([a-z]+)[ >]/);return t&&f[t[1]]||r}function t(t,n){n||(n=l);var r=n.parentWindow||n.defaultView||u,o=g.utils.stringTrim(t).toLowerCase(),i=n.createElement("div"),s=e(o),a=s[0],c="ignored<div>"+s[1]+t+s[2]+"</div>";for("function"==typeof r.innerShiv?i.appendChild(r.innerShiv(c)):(p&&n.appendChild(i),i.innerHTML=c,p&&i.parentNode.removeChild(i));a--;)i=i.lastChild;return g.utils.makeArray(i.lastChild.childNodes)}function n(e,t){if(d.parseHTML)return d.parseHTML(e,t)||[];var n=d.clean([e],t);if(n&&n[0]){for(var r=n[0];r.parentNode&&11!==r.parentNode.nodeType;)r=r.parentNode;r.parentNode&&r.parentNode.removeChild(r)}return n}var r=[0,"",""],o=[1,"<table>","</table>"],i=[2,"<table><tbody>","</tbody></table>"],s=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,"<select multiple='multiple'>","</select>"],f={thead:o,tbody:o,tfoot:o,tr:i,td:s,th:s,option:c,optgroup:c},p=g.utils.ieVersion<=8;g.utils.parseHtmlFragment=function(e,r){return d?n(e,r):t(e,r)},g.utils.setHtml=function(e,t){if(g.utils.emptyDomNode(e),t=g.utils.unwrapObservable(t),null!==t&&t!==a)if("string"!=typeof t&&(t=t.toString()),d)d(e).html(t);else for(var n=g.utils.parseHtmlFragment(t,e.ownerDocument),r=0;r<n.length;r++)e.appendChild(n[r])}}(),g.exportSymbol("utils.parseHtmlFragment",g.utils.parseHtmlFragment),g.exportSymbol("utils.setHtml",g.utils.setHtml),g.memoization=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function t(){return e()+e()}function n(e,t){if(e)if(8==e.nodeType){var r=g.memoization.parseMemoText(e.nodeValue);null!=r&&t.push({domNode:e,memoId:r})}else if(1==e.nodeType)for(var o=0,i=e.childNodes,s=i.length;o<s;o++)n(i[o],t)}var r={};return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var n=t();return r[n]=e,"<!--[ko_memo:"+n+"]-->"},unmemoize:function(e,t){var n=r[e];if(n===a)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return n.apply(null,t||[]),!0}finally{delete r[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var r=[];n(e,r);for(var o=0,i=r.length;o<i;o++){var s=r[o].domNode,a=[s];t&&g.utils.arrayPushAll(a,t),g.memoization.unmemoize(r[o].memoId,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),g.exportSymbol("memoization",g.memoization),g.exportSymbol("memoization.memoize",g.memoization.memoize),g.exportSymbol("memoization.unmemoize",g.memoization.unmemoize),g.exportSymbol("memoization.parseMemoText",g.memoization.parseMemoText),g.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",g.memoization.unmemoizeDomNodeAndDescendants),g.tasks=function(){function e(){if(i)for(var e,t=i,n=0;a<i;)if(e=o[a++]){if(a>t){if(++n>=5e3){a=i,g.utils.deferError(Error("'Too much recursion' after processing "+n+" task groups."));break}t=i}try{e()}catch(e){g.utils.deferError(e)}}}function t(){e(),a=i=o.length=0}function n(){g.tasks.scheduler(t)}var r,o=[],i=0,s=1,a=0;r=u.MutationObserver?function(e){var t=l.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(t):l&&"onreadystatechange"in l.createElement("script")?function(e){var t=l.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,l.documentElement.removeChild(t),t=null,e()},l.documentElement.appendChild(t)}:function(e){setTimeout(e,0)};var c={scheduler:r,schedule:function(e){return i||n(),o[i++]=e,s++},cancel:function(e){var t=e-(s-i);t>=a&&t<i&&(o[t]=null)},resetForTesting:function(){var e=i-a;return a=i=o.length=0,e},runEarly:e};return c}(),g.exportSymbol("tasks",g.tasks),g.exportSymbol("tasks.schedule",g.tasks.schedule),g.exportSymbol("tasks.runEarly",g.tasks.runEarly),g.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return g.dependentObservable({read:e,write:function(r){clearTimeout(n),n=g.utils.setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,i,s;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e._deferUpdates=!1,s="notifyWhenChangesStop"==i?o:r,e.limit(function(e){return s(e,n)})},deferred:function(e,t){if(t!==!0)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e._deferUpdates||(e._deferUpdates=!0,e.limit(function(t){var n;return function(){g.tasks.cancel(n),n=g.tasks.schedule(t),e.notifySubscribers(a,"dirty")}}))},notify:function(e,t){e.equalityComparer="always"==t?null:n}};var b={undefined:1,boolean:1,number:1,string:1};g.exportSymbol("extenders",g.extenders),g.subscription=function(e,t,n){this._target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,g.exportProperty(this,"dispose",this.dispose)},g.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},g.subscribable=function(){g.utils.setPrototypeOfOrExtend(this,w),w.init(this)};var _="change",w={init:function(e){e._subscriptions={},e._versionNumber=1},subscribe:function(e,t,n){var r=this;n=n||_;var o=t?e.bind(t):e,i=new g.subscription(r,o,function(){g.utils.arrayRemoveItem(r._subscriptions[n],i),r.afterSubscriptionRemove&&r.afterSubscriptionRemove(n)});return r.beforeSubscriptionAdd&&r.beforeSubscriptionAdd(n),r._subscriptions[n]||(r._subscriptions[n]=[]),r._subscriptions[n].push(i),i},notifySubscribers:function(e,t){if(t=t||_,t===_&&this.updateVersion(),this.hasSubscriptionsForEvent(t))try{g.dependencyDetection.begin();for(var n,r=this._subscriptions[t].slice(0),o=0;n=r[o];++o)n.isDisposed||n.callback(e)}finally{g.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(e){var t,n,r,o=this,i=g.isObservable(o),s="beforeChange";o._origNotifySubscribers||(o._origNotifySubscribers=o.notifySubscribers,o.notifySubscribers=p);var a=e(function(){o._notificationIsPending=!1,i&&r===o&&(r=o()),t=!1,o.isDifferent(n,r)&&o._origNotifySubscribers(n=r)});o._limitChange=function(e){o._notificationIsPending=t=!0,r=e,a()},o._limitBeforeChange=function(e){t||(n=e,o._origNotifySubscribers(e,s))}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e)return this._subscriptions[e]&&this._subscriptions[e].length||0;var t=0;return g.utils.objectForEach(this._subscriptions,function(e,n){"dirty"!==e&&(t+=n.length)}),t},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:i};g.exportProperty(w,"subscribe",w.subscribe),g.exportProperty(w,"extend",w.extend),g.exportProperty(w,"getSubscriptionsCount",w.getSubscriptionsCount),g.utils.canSetPrototype&&g.utils.setPrototypeOf(w,Function.prototype),g.subscribable.fn=w,g.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},g.exportSymbol("subscribable",g.subscribable),g.exportSymbol("isSubscribable",g.isSubscribable),g.computedContext=g.dependencyDetection=function(){function e(){return++i}function t(e){o.push(r),r=e}function n(){r=o.pop()}var r,o=[],i=0;return{begin:t,end:n,registerDependency:function(t){if(r){if(!g.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");r.callback.call(r.callbackTarget,t,t._id||(t._id=e()))}},ignore:function(e,r,o){try{return t(),e.apply(r,o||[])}finally{n()}},getDependenciesCount:function(){if(r)return r.computed.getDependenciesCount()},isInitial:function(){if(r)return r.isInitial}}}(),g.exportSymbol("computedContext",g.computedContext),g.exportSymbol("computedContext.getDependenciesCount",g.computedContext.getDependenciesCount),g.exportSymbol("computedContext.isInitial",g.computedContext.isInitial),g.exportSymbol("ignoreDependencies",g.ignoreDependencies=g.dependencyDetection.ignore);var E=g.utils.createSymbolOrString("_latestValue");g.observable=function(e){function t(){return arguments.length>0?(t.isDifferent(t[E],arguments[0])&&(t.valueWillMutate(),t[E]=arguments[0],t.valueHasMutated()),this):(g.dependencyDetection.registerDependency(t),t[E])}return t[E]=e,g.utils.canSetPrototype||g.utils.extend(t,g.subscribable.fn),g.subscribable.fn.init(t),g.utils.setPrototypeOfOrExtend(t,x),g.options.deferUpdates&&g.extenders.deferred(t,!0),t};var x={equalityComparer:n,peek:function(){return this[E]},valueHasMutated:function(){this.notifySubscribers(this[E])},valueWillMutate:function(){this.notifySubscribers(this[E],"beforeChange")}};g.utils.canSetPrototype&&g.utils.setPrototypeOf(x,g.subscribable.fn);var C=g.observable.protoProperty="__ko_proto__";x[C]=g.observable,g.hasPrototype=function(e,t){return null!==e&&e!==a&&e[C]!==a&&(e[C]===t||g.hasPrototype(e[C],t))},g.isObservable=function(e){return g.hasPrototype(e,g.observable)},g.isWriteableObservable=function(e){return"function"==typeof e&&e[C]===g.observable||!("function"!=typeof e||e[C]!==g.dependentObservable||!e.hasWriteFunction)},g.exportSymbol("observable",g.observable),g.exportSymbol("isObservable",g.isObservable),g.exportSymbol("isWriteableObservable",g.isWriteableObservable),g.exportSymbol("isWritableObservable",g.isWriteableObservable),g.exportSymbol("observable.fn",x),g.exportProperty(x,"peek",x.peek),g.exportProperty(x,"valueHasMutated",x.valueHasMutated),g.exportProperty(x,"valueWillMutate",x.valueWillMutate),g.observableArray=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=g.observable(e);return g.utils.setPrototypeOfOrExtend(t,g.observableArray.fn),t.extend({trackArrayChanges:!0})},g.observableArray.fn={remove:function(e){for(var t=this.peek(),n=[],r="function"!=typeof e||g.isObservable(e)?function(t){return t===e}:e,o=0;o<t.length;o++){var i=t[o];r(i)&&(0===n.length&&this.valueWillMutate(),n.push(i),t.splice(o,1),o--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===a){var t=this.peek(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return g.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this.peek(),n="function"!=typeof e||g.isObservable(e)?function(t){return t===e}:e;this.valueWillMutate();for(var r=t.length-1;r>=0;r--){var o=t[r];n(o)&&(t[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===a?this.destroy(function(){return!0}):e?this.destroy(function(t){return g.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return g.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},g.utils.canSetPrototype&&g.utils.setPrototypeOf(g.observableArray.fn,g.observable.fn),g.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){g.observableArray.fn[e]=function(){var t=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(t,e,arguments);var n=t[e].apply(t,arguments);return this.valueHasMutated(),n===t?this:n}}),g.utils.arrayForEach(["slice"],function(e){g.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),g.exportSymbol("observableArray",g.observableArray);var S="arrayChange";g.extenders.trackArrayChanges=function(e,t){function n(){if(!s){s=!0,i=e.notifySubscribers,e.notifySubscribers=function(e,t){return t&&t!==_||++l,i.apply(this,arguments)};var t=[].concat(e.peek()||[]);u=null,o=e.subscribe(function(n){if(n=[].concat(n||[]),e.hasSubscriptionsForEvent(S))var o=r(t,n);t=n,u=null,l=0,o&&o.length&&e.notifySubscribers(o,S)})}}function r(t,n){return(!u||l>1)&&(u=g.utils.compareArrays(t,n,e.compareArrayOptions)),u}if(e.compareArrayOptions={},t&&"object"==typeof t&&g.utils.extend(e.compareArrayOptions,t),e.compareArrayOptions.sparse=!0,!e.cacheDiffForKnownOperation){var o,i,s=!1,u=null,l=0,c=e.beforeSubscriptionAdd,d=e.afterSubscriptionRemove;e.beforeSubscriptionAdd=function(t){c&&c.call(e,t),t===S&&n()},e.afterSubscriptionRemove=function(t){d&&d.call(e,t),t!==S||e.hasSubscriptionsForEvent(S)||(i&&(e.notifySubscribers=i,i=a),o.dispose(),s=!1)},e.cacheDiffForKnownOperation=function(e,t,n){function r(e,t,n){return o[o.length]={status:e,value:t,index:n}}if(s&&!l){var o=[],i=e.length,a=n.length,c=0;switch(t){case"push":c=i;case"unshift":for(var d=0;d<a;d++)r("added",n[d],c+d);break;case"pop":c=i-1;case"shift":i&&r("deleted",e[c],c);break;case"splice":for(var f=Math.min(Math.max(0,n[0]<0?i+n[0]:n[0]),i),p=1===a?i:Math.min(f+(n[1]||0),i),h=f+a-2,m=Math.max(p,h),v=[],y=[],d=f,b=2;d<m;++d,++b)d<p&&y.push(r("deleted",e[d],d)),d<h&&v.push(r("added",n[b],d));g.utils.findMovesInArrayComparison(y,v);break;default:return}u=o}}}};var O=g.utils.createSymbolOrString("_state");g.computed=g.dependentObservable=function(e,t,n){function r(){if(arguments.length>0){if("function"!=typeof o)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return o.apply(i.evaluatorFunctionTarget,arguments),this}return g.dependencyDetection.registerDependency(r),(i.isStale||i.isSleeping&&r.haveDependenciesChanged())&&r.evaluateImmediate(),i.latestValue}if("object"==typeof e?n=e:(n=n||{},e&&(n.read=e)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var o=n.write,i={latestValue:a,isStale:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:n.read,evaluatorFunctionTarget:t||n.owner,disposeWhenNodeIsRemoved:n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,disposeWhen:n.disposeWhen||n.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};return r[O]=i,r.hasWriteFunction="function"==typeof o,g.utils.canSetPrototype||g.utils.extend(r,g.subscribable.fn),g.subscribable.fn.init(r),g.utils.setPrototypeOfOrExtend(r,k),n.pure?(i.pure=!0,i.isSleeping=!0,g.utils.extend(r,T)):n.deferEvaluation&&g.utils.extend(r,A),g.options.deferUpdates&&g.extenders.deferred(r,!0),s&&(r._options=n),i.disposeWhenNodeIsRemoved&&(i.suppressDisposalUntilDisposeWhenReturnsFalse=!0,i.disposeWhenNodeIsRemoved.nodeType||(i.disposeWhenNodeIsRemoved=null)),i.isSleeping||n.deferEvaluation||r.evaluateImmediate(),i.disposeWhenNodeIsRemoved&&r.isActive()&&g.utils.domNodeDisposal.addDisposeCallback(i.disposeWhenNodeIsRemoved,i.domNodeDisposalCallback=function(){r.dispose()}),r};var k={equalityComparer:n,getDependenciesCount:function(){return this[O].dependenciesCount},addDependencyTracking:function(e,t,n){if(this[O].pure&&t===this)throw Error("A 'pure' computed must not be called recursively");this[O].dependencyTracking[e]=n,n._order=this[O].dependenciesCount++,n._version=t.getVersion()},haveDependenciesChanged:function(){var e,t,n=this[O].dependencyTracking;for(e in n)if(n.hasOwnProperty(e)&&(t=n[e],t._target.hasChanged(t._version)))return!0},markDirty:function(){this._evalDelayed&&!this[O].isBeingEvaluated&&this._evalDelayed()},isActive:function(){return this[O].isStale||this[O].dependenciesCount>0},respondToChange:function(){this._notificationIsPending||this.evaluatePossiblyAsync()},subscribeToDependency:function(e){if(e._deferUpdates&&!this[O].disposeWhenNodeIsRemoved){var t=e.subscribe(this.markDirty,this,"dirty"),n=e.subscribe(this.respondToChange,this);return{_target:e,dispose:function(){t.dispose(),n.dispose()}}}return e.subscribe(this.evaluatePossiblyAsync,this)},evaluatePossiblyAsync:function(){var e=this,t=e.throttleEvaluation;t&&t>=0?(clearTimeout(this[O].evaluationTimeoutInstance),this[O].evaluationTimeoutInstance=g.utils.setTimeout(function(){e.evaluateImmediate(!0)},t)):e._evalDelayed?e._evalDelayed():e.evaluateImmediate(!0)},evaluateImmediate:function(e){var t=this,n=t[O],r=n.disposeWhen,o=!1;if(!n.isBeingEvaluated&&!n.isDisposed){if(n.disposeWhenNodeIsRemoved&&!g.utils.domNodeIsAttachedToDocument(n.disposeWhenNodeIsRemoved)||r&&r()){if(!n.suppressDisposalUntilDisposeWhenReturnsFalse)return void t.dispose()}else n.suppressDisposalUntilDisposeWhenReturnsFalse=!1;n.isBeingEvaluated=!0;try{o=this.evaluateImmediate_CallReadWithDependencyDetection(e)}finally{n.isBeingEvaluated=!1}return n.dependenciesCount||t.dispose(),o}},evaluateImmediate_CallReadWithDependencyDetection:function(e){var t=this,n=t[O],r=!1,o=n.pure?a:!n.dependenciesCount,i={computedObservable:t,disposalCandidates:n.dependencyTracking,disposalCount:n.dependenciesCount};g.dependencyDetection.begin({callbackTarget:i,callback:m,computed:t,isInitial:o}),n.dependencyTracking={},n.dependenciesCount=0;var u=this.evaluateImmediate_CallReadThenEndDependencyDetection(n,i);return t.isDifferent(n.latestValue,u)&&(n.isSleeping||t.notifySubscribers(n.latestValue,"beforeChange"),n.latestValue=u,s&&(t._latestValue=u),n.isSleeping?t.updateVersion():e&&t.notifySubscribers(n.latestValue),r=!0),o&&t.notifySubscribers(n.latestValue,"awake"),r},evaluateImmediate_CallReadThenEndDependencyDetection:function(e,t){try{var n=e.readFunction;return e.evaluatorFunctionTarget?n.call(e.evaluatorFunctionTarget):n()}finally{g.dependencyDetection.end(),t.disposalCount&&!e.isSleeping&&g.utils.objectForEach(t.disposalCandidates,h),e.isStale=!1}},peek:function(){var e=this[O];return(e.isStale&&!e.dependenciesCount||e.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),
e.latestValue},limit:function(e){g.subscribable.fn.limit.call(this,e),this._evalDelayed=function(){this._limitBeforeChange(this[O].latestValue),this[O].isStale=!0,this._limitChange(this)}},dispose:function(){var e=this[O];!e.isSleeping&&e.dependencyTracking&&g.utils.objectForEach(e.dependencyTracking,function(e,t){t.dispose&&t.dispose()}),e.disposeWhenNodeIsRemoved&&e.domNodeDisposalCallback&&g.utils.domNodeDisposal.removeDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback),e.dependencyTracking=null,e.dependenciesCount=0,e.isDisposed=!0,e.isStale=!1,e.isSleeping=!1,e.disposeWhenNodeIsRemoved=null}},T={beforeSubscriptionAdd:function(e){var t=this,n=t[O];if(!n.isDisposed&&n.isSleeping&&"change"==e){if(n.isSleeping=!1,n.isStale||t.haveDependenciesChanged())n.dependencyTracking=null,n.dependenciesCount=0,n.isStale=!0,t.evaluateImmediate()&&t.updateVersion();else{var r=[];g.utils.objectForEach(n.dependencyTracking,function(e,t){r[t._order]=e}),g.utils.arrayForEach(r,function(e,r){var o=n.dependencyTracking[e],i=t.subscribeToDependency(o._target);i._order=r,i._version=o._version,n.dependencyTracking[e]=i})}n.isDisposed||t.notifySubscribers(n.latestValue,"awake")}},afterSubscriptionRemove:function(e){var t=this[O];t.isDisposed||"change"!=e||this.hasSubscriptionsForEvent("change")||(g.utils.objectForEach(t.dependencyTracking,function(e,n){n.dispose&&(t.dependencyTracking[e]={_target:n._target,_order:n._order,_version:n._version},n.dispose())}),t.isSleeping=!0,this.notifySubscribers(a,"asleep"))},getVersion:function(){var e=this[O];return e.isSleeping&&(e.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),g.subscribable.fn.getVersion.call(this)}},A={beforeSubscriptionAdd:function(e){"change"!=e&&"beforeChange"!=e||this.peek()}};g.utils.canSetPrototype&&g.utils.setPrototypeOf(k,g.subscribable.fn);var D=g.observable.protoProperty;g.computed[D]=g.observable,k[D]=g.computed,g.isComputed=function(e){return g.hasPrototype(e,g.computed)},g.isPureComputed=function(e){return g.hasPrototype(e,g.computed)&&e[O]&&e[O].pure},g.exportSymbol("computed",g.computed),g.exportSymbol("dependentObservable",g.computed),g.exportSymbol("isComputed",g.isComputed),g.exportSymbol("isPureComputed",g.isPureComputed),g.exportSymbol("computed.fn",k),g.exportProperty(k,"peek",k.peek),g.exportProperty(k,"dispose",k.dispose),g.exportProperty(k,"isActive",k.isActive),g.exportProperty(k,"getDependenciesCount",k.getDependenciesCount),g.pureComputed=function(e,t){return"function"==typeof e?g.computed(e,t,{pure:!0}):(e=g.utils.extend({},e),e.pure=!0,g.computed(e,t))},g.exportSymbol("pureComputed",g.pureComputed),function(){function e(r,o,i){i=i||new n,r=o(r);var s=!("object"!=typeof r||null===r||r===a||r instanceof RegExp||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean);if(!s)return r;var u=r instanceof Array?[]:{};return i.save(r,u),t(r,function(t){var n=o(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":u[t]=n;break;case"object":case"undefined":var s=i.get(n);u[t]=s!==a?s:e(n,o,i)}}),u}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var r in e)t(r)}function n(){this.keys=[],this.values=[]}var r=10;g.toJS=function(t){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;g.isObservable(e)&&t<r;t++)e=e();return e})},g.toJSON=function(e,t,n){var r=g.toJS(e);return g.utils.stringifyJson(r,t,n)},n.prototype={constructor:n,save:function(e,t){var n=g.utils.arrayIndexOf(this.keys,e);n>=0?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var t=g.utils.arrayIndexOf(this.keys,e);return t>=0?this.values[t]:a}}}(),g.exportSymbol("toJS",g.toJS),g.exportSymbol("toJSON",g.toJSON),function(){var e="__ko__hasDomDataOptionValue__";g.selectExtensions={readValue:function(t){switch(g.utils.tagNameLower(t)){case"option":return t[e]===!0?g.utils.domData.get(t,g.bindingHandlers.options.optionValueDomDataKey):g.utils.ieVersion<=7?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return t.selectedIndex>=0?g.selectExtensions.readValue(t.options[t.selectedIndex]):a;default:return t.value}},writeValue:function(t,n,r){switch(g.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":g.utils.domData.set(t,g.bindingHandlers.options.optionValueDomDataKey,a),e in t&&delete t[e],t.value=n;break;default:g.utils.domData.set(t,g.bindingHandlers.options.optionValueDomDataKey,n),t[e]=!0,t.value="number"==typeof n?n:""}break;case"select":""!==n&&null!==n||(n=a);for(var o,i=-1,s=0,u=t.options.length;s<u;++s)if(o=g.selectExtensions.readValue(t.options[s]),o==n||""==o&&n===a){i=s;break}(r||i>=0||n===a&&t.size>1)&&(t.selectedIndex=i);break;default:null!==n&&n!==a||(n=""),t.value=n}}}}(),g.exportSymbol("selectExtensions",g.selectExtensions),g.exportSymbol("selectExtensions.readValue",g.selectExtensions.readValue),g.exportSymbol("selectExtensions.writeValue",g.selectExtensions.writeValue),g.expressionRewriting=function(){function e(e){if(g.utils.arrayIndexOf(r,e)>=0)return!1;var t=e.match(o);return null!==t&&(t[1]?"Object("+t[1]+")"+t[2]:e)}function t(e){var t=g.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,r=[],o=t.match(d),i=[],s=0;if(o){o.push(",");for(var a,u=0;a=o[u];++u){var l=a.charCodeAt(0);if(44===l){if(s<=0){r.push(n&&i.length?{key:n,value:i.join("")}:{unknown:n||i.join("")}),n=s=0,i=[];continue}}else if(58===l){if(!s&&!n&&1===i.length){n=i.pop();continue}}else if(47===l&&u&&a.length>1){var c=o[u-1].match(f);c&&!p[c[0]]&&(t=t.substr(t.indexOf(a)+1),o=t.match(d),o.push(","),u=-1,a="/")}else 40===l||123===l||91===l?++s:41===l||125===l||93===l?--s:n||i.length||34!==l&&39!==l||(a=a.slice(1,-1));i.push(a)}}return r}function n(n,r){function o(t,n){function r(e){return!e||!e.preprocess||(n=e.preprocess(n,t,o))}var l;if(!u){if(!r(g.getBindingHandler(t)))return;h[t]&&(l=e(n))&&s.push("'"+t+"':function(_z){"+l+"=_z}")}a&&(n="function(){return "+n+" }"),i.push("'"+t+"':"+n)}r=r||{};var i=[],s=[],a=r.valueAccessors,u=r.bindingParams,l="string"==typeof n?t(n):n;return g.utils.arrayForEach(l,function(e){o(e.key||e.unknown,e.value)}),s.length&&o("_ko_property_writers","{"+s.join(",")+" }"),i.join(",")}var r=["true","false","null","undefined"],o=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i='"(?:[^"\\\\]|\\\\.)*"',s="'(?:[^'\\\\]|\\\\.)*'",a="/(?:[^/\\\\]|\\\\.)*/w*",u=",\"'{}()/:[\\]",l="[^\\s:,/][^"+u+"]*[^\\s"+u+"]",c="[^\\s]",d=RegExp(i+"|"+s+"|"+a+"|"+l+"|"+c,"g"),f=/[\])"'A-Za-z0-9_$]+$/,p={in:1,return:1,typeof:1},h={};return{bindingRewriteValidators:[],twoWayBindings:h,parseObjectLiteral:t,preProcessBindings:n,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,o){if(e&&g.isObservable(e))!g.isWriteableObservable(e)||o&&e.peek()===r||e(r);else{var i=t.get("_ko_property_writers");i&&i[n]&&i[n](r)}}}}(),g.exportSymbol("expressionRewriting",g.expressionRewriting),g.exportSymbol("expressionRewriting.bindingRewriteValidators",g.expressionRewriting.bindingRewriteValidators),g.exportSymbol("expressionRewriting.parseObjectLiteral",g.expressionRewriting.parseObjectLiteral),g.exportSymbol("expressionRewriting.preProcessBindings",g.expressionRewriting.preProcessBindings),g.exportSymbol("expressionRewriting._twoWayBindings",g.expressionRewriting.twoWayBindings),g.exportSymbol("jsonExpressionRewriting",g.expressionRewriting),g.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.expressionRewriting.preProcessBindings),function(){function e(e){return 8==e.nodeType&&s.test(i?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(i?e.text:e.nodeValue)}function n(n,r){for(var o=n,i=1,s=[];o=o.nextSibling;){if(t(o)&&(i--,0===i))return s;s.push(o),e(o)&&i++}if(!r)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var r=n(e,t);return r?r.length>0?r[r.length-1].nextSibling:e.nextSibling:null}function o(n){var o=n.firstChild,i=null;if(o)do if(i)i.push(o);else if(e(o)){var s=r(o,!0);s?o=s:i=[o]}else t(o)&&(i=[o]);while(o=o.nextSibling);return i}var i=l&&"<!--test-->"===l.createComment("test").text,s=i?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=i?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0};g.virtualElements={allowedBindings:{},childNodes:function(t){return e(t)?n(t):t.childNodes},emptyNode:function(t){if(e(t))for(var n=g.virtualElements.childNodes(t),r=0,o=n.length;r<o;r++)g.removeNode(n[r]);else g.utils.emptyDomNode(t)},setDomNodeChildren:function(t,n){if(e(t)){g.virtualElements.emptyNode(t);for(var r=t.nextSibling,o=0,i=n.length;o<i;o++)r.parentNode.insertBefore(n[o],r)}else g.utils.setDomNodeChildren(t,n)},prepend:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},insertAfter:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):g.virtualElements.prepend(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},hasBindingValue:e,virtualNodeBindingValue:function(e){var t=(i?e.text:e.nodeValue).match(s);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(u[g.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do if(1===t.nodeType){var n=o(t);if(n)for(var r=t.nextSibling,i=0;i<n.length;i++)r?e.insertBefore(n[i],r):e.appendChild(n[i])}while(t=t.nextSibling)}}}}(),g.exportSymbol("virtualElements",g.virtualElements),g.exportSymbol("virtualElements.allowedBindings",g.virtualElements.allowedBindings),g.exportSymbol("virtualElements.emptyNode",g.virtualElements.emptyNode),g.exportSymbol("virtualElements.insertAfter",g.virtualElements.insertAfter),g.exportSymbol("virtualElements.prepend",g.virtualElements.prepend),g.exportSymbol("virtualElements.setDomNodeChildren",g.virtualElements.setDomNodeChildren),function(){function e(e,n,r){var o=e+(r&&r.valueAccessors||"");return n[o]||(n[o]=t(e,r))}function t(e,t){var n=g.expressionRewriting.preProcessBindings(e,t),r="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",r)}var n="data-bind";g.bindingProvider=function(){this.bindingCache={}},g.utils.extend(g.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute(n)||g.components.getComponentNameForNode(e);case 8:return g.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),r=n?this.parseBindingsString(n,t,e):null;return g.components.addBindingsForCustomElement(r,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),r=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return g.components.addBindingsForCustomElement(r,e,t,!0)},getBindingsString:function(e,t){switch(e.nodeType){case 1:return e.getAttribute(n);case 8:return g.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,n,r,o){try{var i=e(t,this.bindingCache,o);return i(n,r)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),g.bindingProvider.instance=new g.bindingProvider}(),g.exportSymbol("bindingProvider",g.bindingProvider),function(){function e(e){return function(){return e}}function t(e){return e()}function n(e){return g.utils.objectMap(g.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function r(t,r,o){return"function"==typeof t?n(t.bind(null,r,o)):g.utils.objectMap(t,e)}function o(e,t){return n(this.getBindings.bind(this,e,t))}function i(e){var t=g.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function s(e,t,n){var r,o=g.virtualElements.firstChild(t),i=g.bindingProvider.instance,s=i.preprocessNode;if(s){for(;r=o;)o=g.virtualElements.nextSibling(r),s.call(i,r);o=g.virtualElements.firstChild(t)}for(;r=o;)o=g.virtualElements.nextSibling(r),l(e,r,n)}function l(e,t,n){var r=!0,o=1===t.nodeType;o&&g.virtualElements.normaliseVirtualElementDomStructure(t);var i=o&&n||g.bindingProvider.instance.nodeHasBindings(t);i&&(r=f(t,null,e,n).shouldBindDescendants),r&&!h[g.utils.tagNameLower(t)]&&s(e,t,!o)}function c(e){var t=[],n={},r=[];return g.utils.objectForEach(e,function o(i){if(!n[i]){var s=g.getBindingHandler(i);s&&(s.after&&(r.push(i),g.utils.arrayForEach(s.after,function(t){if(e[t]){if(g.utils.arrayIndexOf(r,t)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));o(t)}}),r.length--),t.push({key:i,handler:s})),n[i]=!0}}),t}function f(e,n,r,s){function u(){return g.utils.objectMap(h?h():d,t)}var l=g.utils.domData.get(e,m);if(!n){if(l)throw Error("You cannot apply bindings multiple times to the same element.");g.utils.domData.set(e,m,!0)}!l&&s&&g.storedBindingContextForNode(e,r);var d;if(n&&"function"!=typeof n)d=n;else{var f=g.bindingProvider.instance,p=f.getBindingAccessors||o,h=g.dependentObservable(function(){return d=n?n(r,e):p.call(f,e,r),d&&r._subscribable&&r._subscribable(),d},null,{disposeWhenNodeIsRemoved:e});d&&h.isActive()||(h=null)}var v;if(d){var y=h?function(e){return function(){return t(h()[e])}}:function(e){return d[e]};u.get=function(e){return d[e]&&t(y(e))},u.has=function(e){return e in d};var b=c(d);g.utils.arrayForEach(b,function(t){var n=t.handler.init,o=t.handler.update,s=t.key;8===e.nodeType&&i(s);try{"function"==typeof n&&g.dependencyDetection.ignore(function(){var t=n(e,y(s),u,r.$data,r);if(t&&t.controlsDescendantBindings){if(v!==a)throw new Error("Multiple bindings ("+v+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=s}}),"function"==typeof o&&g.dependentObservable(function(){o(e,y(s),u,r.$data,r)},null,{disposeWhenNodeIsRemoved:e})}catch(e){throw e.message='Unable to process binding "'+s+": "+d[s]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:v===a}}function p(e){return e&&e instanceof g.bindingContext?e:new g.bindingContext(e)}g.bindingHandlers={};var h={script:!0,textarea:!0,template:!0};g.getBindingHandler=function(e){return g.bindingHandlers[e]},g.bindingContext=function(e,t,n,r,o){function i(){var o=d?e():e,i=g.utils.unwrapObservable(o);return t?(t._subscribable&&t._subscribable(),g.utils.extend(c,t),c._subscribable=l):(c.$parents=[],c.$root=i,c.ko=g),c.$rawData=o,c.$data=i,n&&(c[n]=i),r&&r(c,t,i),c.$data}function s(){return u&&!g.utils.anyDomNodeIsAttachedToDocument(u)}var u,l,c=this,d="function"==typeof e&&!g.isObservable(e);o&&o.exportDependencies?i():(l=g.dependentObservable(i,null,{disposeWhen:s,disposeWhenNodeIsRemoved:!0}),l.isActive()&&(c._subscribable=l,l.equalityComparer=null,u=[],l._addNode=function(e){u.push(e),g.utils.domNodeDisposal.addDisposeCallback(e,function(e){g.utils.arrayRemoveItem(u,e),u.length||(l.dispose(),c._subscribable=l=a)})}))},g.bindingContext.prototype.createChildContext=function(e,t,n,r){return new g.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)},r)},g.bindingContext.prototype.extend=function(e){return new g.bindingContext(this._subscribable||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,g.utils.extend(t,"function"==typeof e?e():e)})},g.bindingContext.prototype.createStaticChildContext=function(e,t){return this.createChildContext(e,t,null,{exportDependencies:!0})};var m=g.utils.domData.nextKey(),v=g.utils.domData.nextKey();g.storedBindingContextForNode=function(e,t){return 2!=arguments.length?g.utils.domData.get(e,v):(g.utils.domData.set(e,v,t),void(t._subscribable&&t._subscribable._addNode(e)))},g.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&g.virtualElements.normaliseVirtualElementDomStructure(e),f(e,t,p(n),!0)},g.applyBindingsToNode=function(e,t,n){var o=p(n);return g.applyBindingAccessorsToNode(e,r(t,o,e),o)},g.applyBindingsToDescendants=function(e,t){1!==t.nodeType&&8!==t.nodeType||s(p(e),t,!0)},g.applyBindings=function(e,t){if(!d&&u.jQuery&&(d=u.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||u.document.body,l(p(e),t,!0)},g.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=g.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return g.contextFor(e.parentNode)}return a},g.dataFor=function(e){var t=g.contextFor(e);return t?t.$data:a},g.exportSymbol("bindingHandlers",g.bindingHandlers),g.exportSymbol("applyBindings",g.applyBindings),g.exportSymbol("applyBindingsToDescendants",g.applyBindingsToDescendants),g.exportSymbol("applyBindingAccessorsToNode",g.applyBindingAccessorsToNode),g.exportSymbol("applyBindingsToNode",g.applyBindingsToNode),g.exportSymbol("contextFor",g.contextFor),g.exportSymbol("dataFor",g.dataFor)}(),function(e){function t(t,n){return t.hasOwnProperty(n)?t[n]:e}function n(e,n){var o,a=t(i,e);a?a.subscribe(n):(a=i[e]=new g.subscribable,a.subscribe(n),r(e,function(t,n){var r=!(!n||!n.synchronous);s[e]={definition:t,isSynchronousComponent:r},delete i[e],o||r?a.notifySubscribers(t):g.tasks.schedule(function(){a.notifySubscribers(t)})}),o=!0)}function r(e,t){o("getConfig",[e],function(n){n?o("loadComponent",[e,n],function(e){t(e,n)}):t(null,null)})}function o(t,n,r,i){i||(i=g.components.loaders.slice(0));var s=i.shift();if(s){var a=s[t];if(a){var u=!1,l=a.apply(s,n.concat(function(e){u?r(null):null!==e?r(e):o(t,n,r,i)}));if(l!==e&&(u=!0,!s.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else o(t,n,r,i)}else r(null)}var i={},s={};g.components={get:function(e,r){var o=t(s,e);o?o.isSynchronousComponent?g.dependencyDetection.ignore(function(){r(o.definition)}):g.tasks.schedule(function(){r(o.definition)}):n(e,r)},clearCachedDefinition:function(e){delete s[e]},_getFirstResultFromLoaders:o},g.components.loaders=[],g.exportSymbol("components",g.components),g.exportSymbol("components.get",g.components.get),g.exportSymbol("components.clearCachedDefinition",g.components.clearCachedDefinition)}(),function(e){function n(e,t,n,r){var o={},i=2,s=function(){0===--i&&r(o)},a=n.template,u=n.viewModel;a?c(t,a,function(t){g.components._getFirstResultFromLoaders("loadTemplate",[e,t],function(e){o.template=e,s()})}):s(),u?c(t,u,function(t){g.components._getFirstResultFromLoaders("loadViewModel",[e,t],function(e){o[p]=e,s()})}):s()}function r(e,t,n){if("string"==typeof t)n(g.utils.parseHtmlFragment(t));else if(t instanceof Array)n(t);else if(a(t))n(g.utils.makeArray(t.childNodes));else if(t.element){var r=t.element;if(s(r))n(i(r));else if("string"==typeof r){var o=l.getElementById(r);o?n(i(o)):e("Cannot find element with ID "+r)}else e("Unknown element type: "+r)}else e("Unknown template value: "+t)}function o(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[p])n(t[p]);else if("instance"in t){var r=t.instance;n(function(e,t){return r})}else"viewModel"in t?o(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function i(e){switch(g.utils.tagNameLower(e)){case"script":return g.utils.parseHtmlFragment(e.text);case"textarea":return g.utils.parseHtmlFragment(e.value);case"template":if(a(e.content))return g.utils.cloneNodes(e.content.childNodes)}return g.utils.cloneNodes(e.childNodes)}function s(e){return u.HTMLElement?e instanceof HTMLElement:e&&e.tagName&&1===e.nodeType}function a(e){return u.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function c(e,n,r){"string"==typeof n.require?t||u.require?(t||u.require)([n.require],r):e("Uses require, but no AMD loader is present"):r(n)}function d(e){return function(t){throw new Error("Component '"+e+"': "+t)}}var f={};g.components.register=function(e,t){if(!t)throw new Error("Invalid configuration for "+e);if(g.components.isRegistered(e))throw new Error("Component "+e+" is already registered");f[e]=t},g.components.isRegistered=function(e){return f.hasOwnProperty(e)},g.components.unregister=function(e){delete f[e],g.components.clearCachedDefinition(e)},g.components.defaultLoader={getConfig:function(e,t){var n=f.hasOwnProperty(e)?f[e]:null;t(n)},loadComponent:function(e,t,r){var o=d(e);c(o,t,function(t){n(e,o,t,r)})},loadTemplate:function(e,t,n){r(d(e),t,n)},loadViewModel:function(e,t,n){o(d(e),t,n)}};var p="createViewModel";g.exportSymbol("components.register",g.components.register),g.exportSymbol("components.isRegistered",g.components.isRegistered),g.exportSymbol("components.unregister",g.components.unregister),g.exportSymbol("components.defaultLoader",g.components.defaultLoader),g.components.loaders.push(g.components.defaultLoader),g.components._allRegisteredComponents=f}(),function(e){function t(e,t){var r=e.getAttribute("params");if(r){var o=n.parseBindingsString(r,t,e,{valueAccessors:!0,bindingParams:!0}),i=g.utils.objectMap(o,function(t,n){return g.computed(t,null,{disposeWhenNodeIsRemoved:e})}),s=g.utils.objectMap(i,function(t,n){var r=t.peek();return t.isActive()?g.computed({read:function(){return g.utils.unwrapObservable(t())},write:g.isWriteableObservable(r)&&function(e){t()(e)},disposeWhenNodeIsRemoved:e}):r});return s.hasOwnProperty("$raw")||(s.$raw=i),s}return{$raw:{}}}g.components.getComponentNameForNode=function(e){var t=g.utils.tagNameLower(e);if(g.components.isRegistered(t)&&(t.indexOf("-")!=-1||""+e=="[object HTMLUnknownElement]"||g.utils.ieVersion<=8&&e.tagName===t))return t},g.components.addBindingsForCustomElement=function(e,n,r,o){if(1===n.nodeType){var i=g.components.getComponentNameForNode(n);if(i){if(e=e||{},e.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var s={name:i,params:t(n,r)};e.component=o?function(){return s}:s}}return e};var n=new g.bindingProvider;g.utils.ieVersion<9&&(g.components.register=function(e){return function(t){return l.createElement(t),e.apply(this,arguments)}}(g.components.register),l.createDocumentFragment=function(e){return function(){var t=e(),n=g.components._allRegisteredComponents;for(var r in n)n.hasOwnProperty(r)&&t.createElement(r);return t}}(l.createDocumentFragment))}(),function(e){function t(e,t,n){var r=t.template;if(!r)throw new Error("Component '"+e+"' has no template");var o=g.utils.cloneNodes(r);g.virtualElements.setDomNodeChildren(n,o)}function n(e,t,n,r){var o=e.createViewModel;return o?o.call(e,r,{element:t,templateNodes:n}):r}var r=0;g.bindingHandlers.component={init:function(o,i,s,a,u){var l,c,d=function(){var e=l&&l.dispose;"function"==typeof e&&e.call(l),l=null,c=null},f=g.utils.makeArray(g.virtualElements.childNodes(o));return g.utils.domNodeDisposal.addDisposeCallback(o,d),g.computed(function(){var s,a,p=g.utils.unwrapObservable(i());if("string"==typeof p?s=p:(s=g.utils.unwrapObservable(p.name),a=g.utils.unwrapObservable(p.params)),!s)throw new Error("No component name specified");var h=c=++r;g.components.get(s,function(r){if(c===h){if(d(),!r)throw new Error("Unknown component '"+s+"'");t(s,r,o);var i=n(r,o,f,a),p=u.createChildContext(i,e,function(e){e.$component=i,e.$componentTemplateNodes=f});l=i,g.applyBindingsToDescendants(p,o)}})},null,{disposeWhenNodeIsRemoved:o}),{controlsDescendantBindings:!0}}},g.virtualElements.allowedBindings.component=!0}();var N={class:"className",for:"htmlFor"};g.bindingHandlers.attr={update:function(e,t,n){var r=g.utils.unwrapObservable(t())||{};g.utils.objectForEach(r,function(t,n){n=g.utils.unwrapObservable(n);var r=n===!1||null===n||n===a;r&&e.removeAttribute(t),g.utils.ieVersion<=8&&t in N?(t=N[t],r?e.removeAttribute(t):e[t]=n):r||e.setAttribute(t,n.toString()),"name"===t&&g.utils.setElementName(e,r?"":n.toString())})}},function(){g.bindingHandlers.checked={after:["value","attr"],init:function(e,t,n){function r(){var r=e.checked,o=p?i():r;if(!g.computedContext.isInitial()&&(!u||r)){var s=g.dependencyDetection.ignore(t);if(c){var a=d?s.peek():s;f!==o?(r&&(g.utils.addOrRemoveItem(a,o,!0),g.utils.addOrRemoveItem(a,f,!1)),f=o):g.utils.addOrRemoveItem(a,o,r),d&&g.isWriteableObservable(s)&&s(a)}else g.expressionRewriting.writeValueToProperty(s,n,"checked",o,!0)}}function o(){var n=g.utils.unwrapObservable(t());c?e.checked=g.utils.arrayIndexOf(n,i())>=0:s?e.checked=n:e.checked=i()===n}var i=g.pureComputed(function(){return n.has("checkedValue")?g.utils.unwrapObservable(n.get("checkedValue")):n.has("value")?g.utils.unwrapObservable(n.get("value")):e.value}),s="checkbox"==e.type,u="radio"==e.type;if(s||u){var l=t(),c=s&&g.utils.unwrapObservable(l)instanceof Array,d=!(c&&l.push&&l.splice),f=c?i():a,p=u||c;u&&!e.name&&g.bindingHandlers.uniqueName.init(e,function(){return!0}),g.computed(r,null,{disposeWhenNodeIsRemoved:e}),g.utils.registerEventHandler(e,"click",r),g.computed(o,null,{disposeWhenNodeIsRemoved:e}),l=a}}},g.expressionRewriting.twoWayBindings.checked=!0,g.bindingHandlers.checkedValue={update:function(e,t){e.value=g.utils.unwrapObservable(t())}}}();var M="__ko__cssValue";g.bindingHandlers.css={update:function(e,t){var n=g.utils.unwrapObservable(t());null!==n&&"object"==typeof n?g.utils.objectForEach(n,function(t,n){n=g.utils.unwrapObservable(n),g.utils.toggleDomNodeCssClass(e,t,n)}):(n=g.utils.stringTrim(String(n||"")),g.utils.toggleDomNodeCssClass(e,e[M],!1),e[M]=n,g.utils.toggleDomNodeCssClass(e,n,!0))}},g.bindingHandlers.enable={update:function(e,t){var n=g.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},g.bindingHandlers.disable={update:function(e,t){g.bindingHandlers.enable.update(e,function(){return!g.utils.unwrapObservable(t())})}},g.bindingHandlers.event={init:function(e,t,n,r,o){var i=t()||{};g.utils.objectForEach(i,function(i){"string"==typeof i&&g.utils.registerEventHandler(e,i,function(e){var s,a=t()[i];if(a){try{var u=g.utils.makeArray(arguments);r=o.$data,u.unshift(r),s=a.apply(r,u)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=n.get(i+"Bubble")!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},g.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=g.utils.peekObservable(t);return n&&"number"!=typeof n.length?(g.utils.unwrapObservable(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:g.nativeTemplateEngine.instance}):{foreach:t,templateEngine:g.nativeTemplateEngine.instance}}},init:function(e,t,n,r,o){return g.bindingHandlers.template.init(e,g.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,o){return g.bindingHandlers.template.update(e,g.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,o)}},g.expressionRewriting.bindingRewriteValidators.foreach=!1,g.virtualElements.allowedBindings.foreach=!0;var P="__ko_hasfocusUpdating",R="__ko_hasfocusLastValue";g.bindingHandlers.hasfocus={init:function(e,t,n){var r=function(r){e[P]=!0;var o=e.ownerDocument;if("activeElement"in o){var i;try{i=o.activeElement}catch(e){i=o.body}r=i===e}var s=t();g.expressionRewriting.writeValueToProperty(s,n,"hasfocus",r,!0),e[R]=r,e[P]=!1},o=r.bind(null,!0),i=r.bind(null,!1);g.utils.registerEventHandler(e,"focus",o),g.utils.registerEventHandler(e,"focusin",o),g.utils.registerEventHandler(e,"blur",i),g.utils.registerEventHandler(e,"focusout",i)},update:function(e,t){var n=!!g.utils.unwrapObservable(t());e[P]||e[R]===n||(n?e.focus():e.blur(),!n&&e[R]&&e.ownerDocument.body.focus(),g.dependencyDetection.ignore(g.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},g.expressionRewriting.twoWayBindings.hasfocus=!0,g.bindingHandlers.hasFocus=g.bindingHandlers.hasfocus,g.expressionRewriting.twoWayBindings.hasFocus=!0,g.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){g.utils.setHtml(e,t())}},y("if"),y("ifnot",!1,!0),y("with",!0,!1,function(e,t){return e.createStaticChildContext(t)});var L={};g.bindingHandlers.options={init:function(e){if("select"!==g.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;e.length>0;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function r(){return g.utils.arrayFilter(e.options,function(e){return e.selected})}function o(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function i(t,r,i){i.length&&(y=!h&&i[0].selected?[g.selectExtensions.readValue(i[0])]:[],b=!0);var s=e.ownerDocument.createElement("option");if(t===L)g.utils.setTextContent(s,n.get("optionsCaption")),g.selectExtensions.writeValue(s,a);else{var u=o(t,n.get("optionsValue"),t);g.selectExtensions.writeValue(s,g.utils.unwrapObservable(u));var l=o(t,n.get("optionsText"),u);g.utils.setTextContent(s,l)}return[s]}function s(t,r){if(b&&h)g.selectExtensions.writeValue(e,g.utils.unwrapObservable(n.get("value")),!0);else if(y.length){var o=g.utils.arrayIndexOf(y,g.selectExtensions.readValue(r[0]))>=0;g.utils.setOptionNodeSelectionState(r[0],o),b&&!o&&g.dependencyDetection.ignore(g.utils.triggerEvent,null,[e,"change"])}}var u,l,c=0==e.length,d=e.multiple,f=!c&&d?e.scrollTop:null,p=g.utils.unwrapObservable(t()),h=n.get("valueAllowUnset")&&n.has("value"),m=n.get("optionsIncludeDestroyed"),v={},y=[];h||(d?y=g.utils.arrayMap(r(),g.selectExtensions.readValue):e.selectedIndex>=0&&y.push(g.selectExtensions.readValue(e.options[e.selectedIndex]))),p&&("undefined"==typeof p.length&&(p=[p]),l=g.utils.arrayFilter(p,function(e){return m||e===a||null===e||!g.utils.unwrapObservable(e._destroy)}),n.has("optionsCaption")&&(u=g.utils.unwrapObservable(n.get("optionsCaption")),null!==u&&u!==a&&l.unshift(L)));var b=!1;v.beforeRemove=function(t){e.removeChild(t)};var _=s;n.has("optionsAfterRender")&&"function"==typeof n.get("optionsAfterRender")&&(_=function(e,t){s(e,t),g.dependencyDetection.ignore(n.get("optionsAfterRender"),null,[t[0],e!==L?e:a])}),g.utils.setDomNodeChildrenFromArrayMapping(e,l,i,v,_),g.dependencyDetection.ignore(function(){if(h)g.selectExtensions.writeValue(e,g.utils.unwrapObservable(n.get("value")),!0);else{var t;t=d?y.length&&r().length<y.length:y.length&&e.selectedIndex>=0?g.selectExtensions.readValue(e.options[e.selectedIndex])!==y[0]:y.length||e.selectedIndex>=0,t&&g.utils.triggerEvent(e,"change")}}),g.utils.ensureSelectElementIsRenderedCorrectly(e),f&&Math.abs(f-e.scrollTop)>20&&(e.scrollTop=f)}},g.bindingHandlers.options.optionValueDomDataKey=g.utils.domData.nextKey(),g.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(e,t,n){g.utils.registerEventHandler(e,"change",function(){var r=t(),o=[];g.utils.arrayForEach(e.getElementsByTagName("option"),function(e){e.selected&&o.push(g.selectExtensions.readValue(e))}),g.expressionRewriting.writeValueToProperty(r,n,"selectedOptions",o)})},update:function(e,t){if("select"!=g.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=g.utils.unwrapObservable(t()),r=e.scrollTop;n&&"number"==typeof n.length&&g.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=g.utils.arrayIndexOf(n,g.selectExtensions.readValue(e))>=0;e.selected!=t&&g.utils.setOptionNodeSelectionState(e,t)}),e.scrollTop=r}},g.expressionRewriting.twoWayBindings.selectedOptions=!0,g.bindingHandlers.style={update:function(e,t){var n=g.utils.unwrapObservable(t()||{});g.utils.objectForEach(n,function(t,n){n=g.utils.unwrapObservable(n),null!==n&&n!==a&&n!==!1||(n=""),e.style[t]=n})}
},g.bindingHandlers.submit={init:function(e,t,n,r,o){if("function"!=typeof t())throw new Error("The value for a submit binding must be a function");g.utils.registerEventHandler(e,"submit",function(n){var r,i=t();try{r=i.call(o.$data,e)}finally{r!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},g.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){g.utils.setTextContent(e,t())}},g.virtualElements.allowedBindings.text=!0,function(){if(u&&u.navigator)var e=function(e){if(e)return parseFloat(e[1])},t=u.opera&&u.opera.version&&parseInt(u.opera.version()),n=u.navigator.userAgent,r=e(n.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),o=e(n.match(/Firefox\/([^ ]*)/));if(g.utils.ieVersion<10)var i=g.utils.domData.nextKey(),l=g.utils.domData.nextKey(),c=function(e){var t=this.activeElement,n=t&&g.utils.domData.get(t,l);n&&n(e)},d=function(e,t){var n=e.ownerDocument;g.utils.domData.get(n,i)||(g.utils.domData.set(n,i,!0),g.utils.registerEventHandler(n,"selectionchange",c)),g.utils.domData.set(e,l,t)};g.bindingHandlers.textInput={init:function(e,n,i){var u,l,c=e.value,f=function(t){clearTimeout(u),l=u=a;var r=e.value;c!==r&&(s&&t&&(e._ko_textInputProcessedEvent=t.type),c=r,g.expressionRewriting.writeValueToProperty(n(),i,"textInput",r))},p=function(t){if(!u){l=e.value;var n=s?f.bind(e,{type:t.type}):f;u=g.utils.setTimeout(n,4)}},h=9==g.utils.ieVersion?p:f,m=function(){var t=g.utils.unwrapObservable(n());return null!==t&&t!==a||(t=""),l!==a&&t===l?void g.utils.setTimeout(m,4):void(e.value!==t&&(c=t,e.value=t))},v=function(t,n){g.utils.registerEventHandler(e,t,n)};s&&g.bindingHandlers.textInput._forceUpdateOn?g.utils.arrayForEach(g.bindingHandlers.textInput._forceUpdateOn,function(e){"after"==e.slice(0,5)?v(e.slice(5),p):v(e,f)}):g.utils.ieVersion<10?(v("propertychange",function(e){"value"===e.propertyName&&h(e)}),8==g.utils.ieVersion&&(v("keyup",f),v("keydown",f)),g.utils.ieVersion>=8&&(d(e,h),v("dragend",p))):(v("input",f),r<5&&"textarea"===g.utils.tagNameLower(e)?(v("keydown",p),v("paste",p),v("cut",p)):t<11?v("keydown",p):o<4&&(v("DOMAutoComplete",f),v("dragdrop",f),v("drop",f))),v("change",f),g.computed(m,null,{disposeWhenNodeIsRemoved:e})}},g.expressionRewriting.twoWayBindings.textInput=!0,g.bindingHandlers.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),g.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++g.bindingHandlers.uniqueName.currentIndex;g.utils.setElementName(e,n)}}},g.bindingHandlers.uniqueName.currentIndex=0,g.bindingHandlers.value={after:["options","foreach"],init:function(e,t,n){if("input"==e.tagName.toLowerCase()&&("checkbox"==e.type||"radio"==e.type))return void g.applyBindingAccessorsToNode(e,{checkedValue:t});var r=["change"],o=n.get("valueUpdate"),i=!1,s=null;o&&("string"==typeof o&&(o=[o]),g.utils.arrayPushAll(r,o),r=g.utils.arrayGetDistinctValues(r));var a=function(){s=null,i=!1;var r=t(),o=g.selectExtensions.readValue(e);g.expressionRewriting.writeValueToProperty(r,n,"value",o)},u=g.utils.ieVersion&&"input"==e.tagName.toLowerCase()&&"text"==e.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete);u&&g.utils.arrayIndexOf(r,"propertychange")==-1&&(g.utils.registerEventHandler(e,"propertychange",function(){i=!0}),g.utils.registerEventHandler(e,"focus",function(){i=!1}),g.utils.registerEventHandler(e,"blur",function(){i&&a()})),g.utils.arrayForEach(r,function(t){var n=a;g.utils.stringStartsWith(t,"after")&&(n=function(){s=g.selectExtensions.readValue(e),g.utils.setTimeout(a,0)},t=t.substring("after".length)),g.utils.registerEventHandler(e,t,n)});var l=function(){var r=g.utils.unwrapObservable(t()),o=g.selectExtensions.readValue(e);if(null!==s&&r===s)return void g.utils.setTimeout(l,0);var i=r!==o;if(i)if("select"===g.utils.tagNameLower(e)){var a=n.get("valueAllowUnset"),u=function(){g.selectExtensions.writeValue(e,r,a)};u(),a||r===g.selectExtensions.readValue(e)?g.utils.setTimeout(u,0):g.dependencyDetection.ignore(g.utils.triggerEvent,null,[e,"change"])}else g.selectExtensions.writeValue(e,r)};g.computed(l,null,{disposeWhenNodeIsRemoved:e})},update:function(){}},g.expressionRewriting.twoWayBindings.value=!0,g.bindingHandlers.visible={update:function(e,t){var n=g.utils.unwrapObservable(t()),r=!("none"==e.style.display);n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},v("click"),g.templateEngine=function(){},g.templateEngine.prototype.renderTemplateSource=function(e,t,n,r){throw new Error("Override renderTemplateSource")},g.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},g.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||l;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new g.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new g.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},g.templateEngine.prototype.renderTemplate=function(e,t,n,r){var o=this.makeTemplateSource(e,r);return this.renderTemplateSource(o,t,n,r)},g.templateEngine.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===!1||this.makeTemplateSource(e,t).data("isRewritten")},g.templateEngine.prototype.rewriteTemplate=function(e,t,n){var r=this.makeTemplateSource(e,n),o=t(r.text());r.text(o),r.data("isRewritten",!0)},g.exportSymbol("templateEngine",g.templateEngine),g.templateRewriting=function(){function e(e){for(var t=g.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var o=t[r];if("function"==typeof o){var i=o(e[n].value);if(i)throw new Error(i)}else if(!o)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function t(t,n,r,o){var i=g.expressionRewriting.parseObjectLiteral(t);e(i);var s=g.expressionRewriting.preProcessBindings(i,{valueAccessors:!0}),a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s+" } })()},'"+r.toLowerCase()+"')";return o.createJavaScriptEvaluatorBlock(a)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,r=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return g.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,o){return e.replace(n,function(){return t(arguments[4],arguments[1],arguments[2],o)}).replace(r,function(){return t(arguments[1],"<!-- ko -->","#comment",o)})},applyMemoizedBindingsToNextSibling:function(e,t){return g.memoization.memoize(function(n,r){var o=n.nextSibling;o&&o.nodeName.toLowerCase()===t&&g.applyBindingAccessorsToNode(o,e,r)})}}}(),g.exportSymbol("__tr_ambtns",g.templateRewriting.applyMemoizedBindingsToNextSibling),function(){function e(e){return g.utils.domData.get(e,u)||{}}function t(e,t){g.utils.domData.set(e,u,t)}g.templateSources={};var n=1,r=2,o=3,i=4;g.templateSources.domElement=function(e){if(this.domElement=e,e){var t=g.utils.tagNameLower(e);this.templateType="script"===t?n:"textarea"===t?r:"template"==t&&e.content&&11===e.content.nodeType?o:i}},g.templateSources.domElement.prototype.text=function(){var e=this.templateType===n?"text":this.templateType===r?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var t=arguments[0];"innerHTML"===e?g.utils.setHtml(this.domElement,t):this.domElement[e]=t};var s=g.utils.domData.nextKey()+"_";g.templateSources.domElement.prototype.data=function(e){return 1===arguments.length?g.utils.domData.get(this.domElement,s+e):void g.utils.domData.set(this.domElement,s+e,arguments[1])};var u=g.utils.domData.nextKey();g.templateSources.domElement.prototype.nodes=function(){var n=this.domElement;if(0==arguments.length){var r=e(n),s=r.containerData;return s||(this.templateType===o?n.content:this.templateType===i?n:a)}var u=arguments[0];t(n,{containerData:u})},g.templateSources.anonymousTemplate=function(e){this.domElement=e},g.templateSources.anonymousTemplate.prototype=new g.templateSources.domElement,g.templateSources.anonymousTemplate.prototype.constructor=g.templateSources.anonymousTemplate,g.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var n=e(this.domElement);return n.textData===a&&n.containerData&&(n.textData=n.containerData.innerHTML),n.textData}var r=arguments[0];t(this.domElement,{textData:r})},g.exportSymbol("templateSources",g.templateSources),g.exportSymbol("templateSources.domElement",g.templateSources.domElement),g.exportSymbol("templateSources.anonymousTemplate",g.templateSources.anonymousTemplate)}(),function(){function e(e,t,n){for(var r,o=e,i=g.virtualElements.nextSibling(t);o&&(r=o)!==i;)o=g.virtualElements.nextSibling(r),n(r,o)}function t(t,n){if(t.length){var r=t[0],o=t[t.length-1],i=r.parentNode,s=g.bindingProvider.instance,a=s.preprocessNode;if(a){if(e(r,o,function(e,t){var n=e.previousSibling,i=a.call(s,e);i&&(e===r&&(r=i[0]||t),e===o&&(o=i[i.length-1]||n))}),t.length=0,!r)return;r===o?t.push(r):(t.push(r,o),g.utils.fixUpContinuousNodeArray(t,i))}e(r,o,function(e){1!==e.nodeType&&8!==e.nodeType||g.applyBindings(n,e)}),e(r,o,function(e){1!==e.nodeType&&8!==e.nodeType||g.memoization.unmemoizeDomNodeAndDescendants(e,[n])}),g.utils.fixUpContinuousNodeArray(t,i)}}function n(e){return e.nodeType?e:e.length>0?e[0]:null}function r(e,r,o,i,a){a=a||{};var u=e&&n(e),l=(u||o||{}).ownerDocument,c=a.templateEngine||s;g.templateRewriting.ensureTemplateIsRewritten(o,c,l);var d=c.renderTemplate(o,i,a,l);if("number"!=typeof d.length||d.length>0&&"number"!=typeof d[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var f=!1;switch(r){case"replaceChildren":g.virtualElements.setDomNodeChildren(e,d),f=!0;break;case"replaceNode":g.utils.replaceDomNodes(e,d),f=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+r)}return f&&(t(d,i),a.afterRender&&g.dependencyDetection.ignore(a.afterRender,null,[d,i.$data])),d}function o(e,t,n){return g.isObservable(e)?e():"function"==typeof e?e(t,n):e}function i(e,t){var n=g.utils.domData.get(e,u);n&&"function"==typeof n.dispose&&n.dispose(),g.utils.domData.set(e,u,t&&t.isActive()?t:a)}var s;g.setTemplateEngine=function(e){if(e!=a&&!(e instanceof g.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");s=e},g.renderTemplate=function(e,t,i,u,l){if(i=i||{},(i.templateEngine||s)==a)throw new Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",u){var c=n(u),d=function(){return!c||!g.utils.domNodeIsAttachedToDocument(c)},f=c&&"replaceNode"==l?c.parentNode:c;return g.dependentObservable(function(){var s=t&&t instanceof g.bindingContext?t:new g.bindingContext(t,null,null,null,{exportDependencies:!0}),a=o(e,s.$data,s),d=r(u,l,a,s,i);"replaceNode"==l&&(u=d,c=n(u))},null,{disposeWhen:d,disposeWhenNodeIsRemoved:f})}return g.memoization.memoize(function(n){g.renderTemplate(e,t,i,n,"replaceNode")})},g.renderTemplateForEach=function(e,n,i,s,u){var l,c=function(t,n){l=u.createChildContext(t,i.as,function(e){e.$index=n});var s=o(e,t,l);return r(null,"ignoreTargetNode",s,l,i)},d=function(e,n,r){t(n,l),i.afterRender&&i.afterRender(n,e),l=null};return g.dependentObservable(function(){var e=g.utils.unwrapObservable(n)||[];"undefined"==typeof e.length&&(e=[e]);var t=g.utils.arrayFilter(e,function(e){return i.includeDestroyed||e===a||null===e||!g.utils.unwrapObservable(e._destroy)});g.dependencyDetection.ignore(g.utils.setDomNodeChildrenFromArrayMapping,null,[s,t,c,i,d])},null,{disposeWhenNodeIsRemoved:s})};var u=g.utils.domData.nextKey();g.bindingHandlers.template={init:function(e,t){var n=g.utils.unwrapObservable(t());if("string"==typeof n||n.name)g.virtualElements.emptyNode(e);else if("nodes"in n){var r=n.nodes||[];if(g.isObservable(r))throw new Error('The "nodes" option must be a plain, non-observable array.');var o=g.utils.moveCleanedNodesToContainerElement(r);new g.templateSources.anonymousTemplate(e).nodes(o)}else{var i=g.virtualElements.childNodes(e),o=g.utils.moveCleanedNodesToContainerElement(i);new g.templateSources.anonymousTemplate(e).nodes(o)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,o){var s,a=t(),u=g.utils.unwrapObservable(a),l=!0,c=null;if("string"==typeof u?(s=a,u={}):(s=u.name,"if"in u&&(l=g.utils.unwrapObservable(u.if)),l&&"ifnot"in u&&(l=!g.utils.unwrapObservable(u.ifnot))),"foreach"in u){var d=l&&u.foreach||[];c=g.renderTemplateForEach(s||e,d,u,e,o)}else if(l){var f="data"in u?o.createStaticChildContext(u.data,u.as):o;c=g.renderTemplate(s||e,f,u,e)}else g.virtualElements.emptyNode(e);i(e,c)}},g.expressionRewriting.bindingRewriteValidators.template=function(e){var t=g.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:g.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},g.virtualElements.allowedBindings.template=!0}(),g.exportSymbol("setTemplateEngine",g.setTemplateEngine),g.exportSymbol("renderTemplate",g.renderTemplate),g.utils.findMovesInArrayComparison=function(e,t,n){if(e.length&&t.length){var r,o,i,s,a;for(r=o=0;(!n||r<n)&&(s=e[o]);++o){for(i=0;a=t[i];++i)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(i,1),r=i=0;break}r+=i}}},g.utils.compareArrays=function(){function e(e,o,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},e=e||[],o=o||[],e.length<o.length?t(e,o,n,r,i):t(o,e,r,n,i)}function t(e,t,n,r,o){var i,s,a,u,l,c,d=Math.min,f=Math.max,p=[],h=e.length,m=t.length,v=m-h||1,y=h+m+1;for(i=0;i<=h;i++)for(u=a,p.push(a=[]),l=d(m,i+v),c=f(0,i-1),s=c;s<=l;s++)if(s)if(i)if(e[i-1]===t[s-1])a[s]=u[s-1];else{var b=u[s]||y,_=a[s-1]||y;a[s]=d(b,_)+1}else a[s]=s+1;else a[s]=i+1;var w,E=[],x=[],C=[];for(i=h,s=m;i||s;)w=p[i][s]-1,s&&w===p[i][s-1]?x.push(E[E.length]={status:n,value:t[--s],index:s}):i&&w===p[i-1][s]?C.push(E[E.length]={status:r,value:e[--i],index:i}):(--s,--i,o.sparse||E.push({status:"retained",value:t[s]}));return g.utils.findMovesInArrayComparison(C,x,!o.dontLimitMoves&&10*h),E.reverse()}var n="added",r="deleted";return e}(),g.exportSymbol("utils.compareArrays",g.utils.compareArrays),function(){function e(e,t,n,r,o){var i=[],s=g.dependentObservable(function(){var s=t(n,o,g.utils.fixUpContinuousNodeArray(i,e))||[];i.length>0&&(g.utils.replaceDomNodes(i,s),r&&g.dependencyDetection.ignore(r,null,[n,s,o])),i.length=0,g.utils.arrayPushAll(i,s)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!g.utils.anyDomNodeIsAttachedToDocument(i)}});return{mappedNodes:i,dependentObservable:s.isActive()?s:a}}var t=g.utils.domData.nextKey(),n=g.utils.domData.nextKey();g.utils.setDomNodeChildrenFromArrayMapping=function(r,o,i,s,u){function l(e,t){d=m[t],w!==t&&(S[e]=d),d.indexObservable(w++),g.utils.fixUpContinuousNodeArray(d.mappedNodes,r),b.push(d),x.push(d)}function c(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&g.utils.arrayForEach(t[n].mappedNodes,function(r){e(r,n,t[n].arrayEntry)})}o=o||[],s=s||{};for(var d,f,p,h=g.utils.domData.get(r,t)===a,m=g.utils.domData.get(r,t)||[],v=g.utils.arrayMap(m,function(e){return e.arrayEntry}),y=g.utils.compareArrays(v,o,s.dontLimitMoves),b=[],_=0,w=0,E=[],x=[],C=[],S=[],O=[],k=0;f=y[k];k++)switch(p=f.moved,f.status){case"deleted":p===a&&(d=m[_],d.dependentObservable&&(d.dependentObservable.dispose(),d.dependentObservable=a),g.utils.fixUpContinuousNodeArray(d.mappedNodes,r).length&&(s.beforeRemove&&(b.push(d),x.push(d),d.arrayEntry===n?d=null:C[k]=d),d&&E.push.apply(E,d.mappedNodes))),_++;break;case"retained":l(k,_++);break;case"added":p!==a?l(k,p):(d={arrayEntry:f.value,indexObservable:g.observable(w++)},b.push(d),x.push(d),h||(O[k]=d))}g.utils.domData.set(r,t,b),c(s.beforeMove,S),g.utils.arrayForEach(E,s.beforeRemove?g.cleanNode:g.removeNode);for(var T,A,k=0,D=g.virtualElements.firstChild(r);d=x[k];k++){d.mappedNodes||g.utils.extend(d,e(r,i,d.arrayEntry,u,d.indexObservable));for(var N=0;A=d.mappedNodes[N];D=A.nextSibling,T=A,N++)A!==D&&g.virtualElements.insertAfter(r,A,T);!d.initialized&&u&&(u(d.arrayEntry,d.mappedNodes,d.indexObservable),d.initialized=!0)}for(c(s.beforeRemove,C),k=0;k<C.length;++k)C[k]&&(C[k].arrayEntry=n);c(s.afterMove,S),c(s.afterAdd,O)}}(),g.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",g.utils.setDomNodeChildrenFromArrayMapping),g.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},g.nativeTemplateEngine.prototype=new g.templateEngine,g.nativeTemplateEngine.prototype.constructor=g.nativeTemplateEngine,g.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n,r){var o=!(g.utils.ieVersion<9),i=o?e.nodes:null,s=i?e.nodes():null;if(s)return g.utils.makeArray(s.cloneNode(!0).childNodes);var a=e.text();return g.utils.parseHtmlFragment(a,r)},g.nativeTemplateEngine.instance=new g.nativeTemplateEngine,g.setTemplateEngine(g.nativeTemplateEngine.instance),g.exportSymbol("nativeTemplateEngine",g.nativeTemplateEngine),function(){g.jqueryTmplTemplateEngine=function(){function e(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function t(e,t,n){return d.tmpl(e,t,n)}var n=this.jQueryTmplVersion=function(){if(!d||!d.tmpl)return 0;try{if(d.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,o,i){i=i||l,o=o||{},e();var s=n.data("precompiled");if(!s){var a=n.text()||"";a="{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}",s=d.template(null,a),n.data("precompiled",s)}var u=[r.$data],c=d.extend({koBindingContext:r},o.templateOptions),f=t(s,u,c);return f.appendTo(i.createElement("div")),d.fragments={},f},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){l.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},n>0&&(d.tmpl.tag.ko_code={open:"__.push($1 || '');"},d.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},g.jqueryTmplTemplateEngine.prototype=new g.templateEngine,g.jqueryTmplTemplateEngine.prototype.constructor=g.jqueryTmplTemplateEngine;var e=new g.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&g.setTemplateEngine(e),g.exportSymbol("jqueryTmplTemplateEngine",g.jqueryTmplTemplateEngine)}()})}()}()}).call(t,n(194)(e))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n(244),n(246)},function(e,t,n){var r=n(245);"string"==typeof r&&(r=[[e.id,r,""]]);n(149)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(148)(),t.push([e.id,"a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}",""])},function(e,t,n){var r=n(247);"string"==typeof r&&(r=[[e.id,r,""]]);n(149)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(148)(),t.push([e.id,"body{background-color:#f0f0f0;margin:0;overflow:hidden;user-select:none}.wrapper{bottom:0;right:0;left:0;max-width:1800px;min-width:768px}.header,.wrapper{position:absolute;top:0}.header{height:32px;width:100%}.header .menu{height:100%;background-color:#eee}.header .menu .menu-bar{display:inline-block;line-height:32px;padding:0 10px;color:#888;font-size:15px;cursor:pointer}.menu-bar .menu-file{position:absolute;display:none;z-index:10;background:#fff}.menu-bar .menu-file .item{padding:10px}.menu-bar:hover .menu-file{display:block}.content{overflow:hidden;position:absolute;top:32px;bottom:0;width:100%}.content .primary{margin-right:300px;height:100%}.content .primary .map{height:100%}.content .secondary{width:300px;height:100%;position:absolute;right:0;top:0;overflow-y:auto;background-color:#eee}.obj-info{color:#888}#Stats-output{position:absolute;left:0;bottom:0}.user-modal{position:relative;width:400px;margin:auto}",""])}]);